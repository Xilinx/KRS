<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
<!-- End Google Tag Manager -->
  <title>HowTo and Troubleshooting &mdash; KRS 1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Definitions" href="other/definitions.html" />
    <link rel="prev" title="How to use Vitis Accelerated Functions" href="examples/vitis_accelerated_function.html" /> 
</head>

<body class="wy-body-for-nav">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
<!-- End Google Tag Manager --> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="../index.html" class="icon icon-home"> KRS
            <img src="../_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">SOM</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/">Home</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/creating_applications/2022.1/build/html/index.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kria_som_ubuntu_support/build/html/index.html">Ubuntu Support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://xilinx.github.io/kria-apps-docs/kr260/build/html/index.html">Robotics Starter Kit Applications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Kria Robotics Stack (KRS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install KRS</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Hardware supported</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="features/ros2centric.html">ROS 2-centric</a></li>
<li class="toctree-l1"><a class="reference internal" href="features/realtime_ros2.html">Real-time ROS 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="features/accelerated_apps_ros2.html">ROS 2 Accelerated Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="features/contributing_ros2.html">Contributing back to ROS 2</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples/nodes.html">Accelerating ROS 2 Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/graphs.html">Accelerating ROS 2 Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/vitis_accelerated.html">Vitis Accelerated Functions with ROS2</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">HowTo</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">HowTo and Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#kv260">KV260</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-update-the-kv260-firmware">How do I update the KV260 firmware ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-emulate-kv260-images">How do I emulate KV260 images?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-configure-the-kv260-to-jtag-boot-mode">How do I configure the KV260 to JTAG boot mode?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-can-t-set-jtag-boot-mode-because-xsct-is-not-behaving-as-expected">I can’t set JTAG boot mode because xsct is not behaving as expected?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-can-i-deal-with-xrt-error-no-devices-found-issues-when-launching-an-accelerated-app">How can I deal with “[XRT] ERROR: No devices found” issues when launching an accelerated app?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#basic-embedded">Basic embedded</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-install-a-package-built-with-petalinux-in-my-embedded-target">How do I install a package built with PetaLinux in my embedded target?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-get-the-sources-dts-from-a-device-tree-blob-dtb">How do I get the sources (.dts) from a device tree blob (.dtb)?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-build-a-device-tree-blob-dtb-from-the-sources-dts">How do I build a device tree blob (.dtb) from the sources (.dts)?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-get-a-better-gdb-debugging-environment">How do I get a better gdb debugging environment?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-do-i-get-a-serial-to-zcu10x-boards">Get do I get a serial to ZCU10X boards?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-hdmi-in-my-zcu10x-boards">Get HDMI in my ZCU10X boards?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-calculate-the-offsets-for-the-raw-img-images-so-that-i-can-mount-them">How do I calculate the offsets for the raw <code class="docutils literal notranslate"><span class="pre">.img</span></code> images, so that I can mount them?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-mount-a-img-file-for-inspection">How do I mount a <code class="docutils literal notranslate"><span class="pre">.img</span></code> file for inspection?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-create-an-initramfs-from-an-rootfs-partition">How do I create an initramfs from an rootfs partition?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-handle-corrupted-sd-card-img-files">How do I handle corrupted sd_card.img files?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extracting-bitstream-from-xclbin-file">Extracting bitstream from xclbin file:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-figure-out-version-of-a-kernel-binary">How do I figure out version of a kernel binary?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-copy-an-image-to-the-sd-card-in-os-x-from-cli">How do I copy an image to the SD card in OS X from CLI?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-increase-swap-in-linux-for-vitis-vivado-builds">How do I increase swap in Linux for Vitis/Vivado builds?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#network-boot">Network boot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tftp-server">TFTP server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ipxe">iPXE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-create-boot-scripts-from-their-sources">How do I create boot scripts from their sources?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-can-t-boot-my-image-because-i-get-a-kernel-panic-like-the-following-one">I can’t boot my image because I get a kernel panic like the following one</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#petalinux">PetaLinux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-setup-the-ros-2-bsp">How do I setup the ROS 2 BSP?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-deal-with-the-following-error-could-not-inherit-file-classes-ros-distro-ros-distro-bbclass">How do I deal with the following error: Could not inherit file classes/ros_distro_${ROS_DISTRO}.bbclass?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-update-the-pre-built-directory-in-a-petalinux-yocto-project">How to update the pre-built directory in a PetaLinux/Yocto project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-create-a-project-out-of-the-bsp">How to create a project out of the BSP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-generate-a-bsp-out-of-a-petalinux-yocto-project">How to generate a BSP (out of a PetaLinux/Yocto project):</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-launch-a-quick-emulation-from-the-bsp-pre-built-packages">How to launch a quick emulation from the BSP pre-built packages:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-launch-a-quick-emulation-from-images-linux-folder-just-built-artifacts">How to launch a quick emulation from images/linux folder (just built artifacts):</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-launch-a-quick-emulation-from-a-built-petalinux-yocto-project-using-a-tftp-directory-fetching-things-from-tftp">How to launch a quick emulation from a built PetaLinux/Yocto project using a TFTP directory (fetching things from TFTP):</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-add-the-rootfs-resulting-from-a-new-build-to-a-pre-built-img">How to add the rootfs resulting from a new build to a pre-built <code class="docutils literal notranslate"><span class="pre">.img</span></code>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-find-linux-kernel-latencies">How to find Linux Kernel Latencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-generate-the-boot-bin-file">How to generate the <code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code> file?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-compile-a-preempt-rt-patched-environment">How do I compile a PREEMPT_RT patched environment?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-set-up-tsn-in-a-yocto-petalinux-project">How do I set up TSN in a Yocto/PetaLinux project?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-set-up-xen-in-petalinux">How do I set up Xen in PetaLinux?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-set-up-xrt-in-petalinux">How do I set up XRT in PetaLinux?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-clean-up-a-petalinux-component">How do I clean up a PetaLinux component?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-build-an-sdk-out-of-a-petalinux-project">How do I build an SDK out of a PetaLinux project?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#xen-and-mixed-criticality">Xen and mixed-criticality</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-switch-in-between-consoles-serial-inputs-dom0-dom1-xen">How do I switch in between consoles/serial inputs (Dom0, Dom1, Xen)?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-connect-to-a-vm-from-dom0">How do I connect to a VM from Dom0?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#why-there-s-no-prompt-in-dom0-after-boot">Why there’s no prompt in Dom0 after boot?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-create-a-dom0less-setup">How do I create a Dom0less setup?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-create-domu-machines-then">How do I create DomU machines then?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-are-vms-with-no-name">What are VMs with no name?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-exit-from-a-domu-without-stopping-it-and-get-back-to-dom0">How do I exit from a DomU without stopping it and get back to Dom0?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#domu-vms-are-not-initiating-with-an-error-like-the-following">DomU VMs are not initiating with an error like the following</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-deal-with-kernel-errors-while-building-xen-with-petalinux">How do I deal with kernel errors while building Xen with PetaLinux?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#domus-stored-in-sd-partitions-create-a-kernel-panic-when-launching">DomUs stored in SD partitions create a kernel panic when Launching</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#krs">KRS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-ssh-into-an-emulation-through-krs-tools-e-g-colcon-acceleration-emulation">How do I ssh into an emulation through KRS tools (e.g. <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">acceleration</span> <span class="pre">emulation</span></code>)?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-scp-files-from-into-an-emulation-launched-through-krs-tools-e-g-colcon-acceleration-emulation">How do I scp files from/into an emulation launched through KRS tools (e.g. <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">acceleration</span> <span class="pre">emulation</span></code>)?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-rebuild-ros-2-packages-without-the-acceleration-kernels">How do I rebuild ROS 2 packages without the acceleration kernels?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-port-krs-to-a-new-board">How do I port KRS to a new board?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-build-several-accelerators-when-invoking-colcon-build">How do I build several accelerators when invoking <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">build</span></code>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-handle-device-mapper-issues">How do I handle device-mapper issues?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-handle-board-part-definition-was-not-found-type-of-issues">How do I handle “board_part definition was not found” type of issues?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#couldn-t-load-file-librdi-commontasks-so-libtinfo-so-5">Couldn’t load file “librdi_commontasks.so”: libtinfo.so.5 ?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ros">ROS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-change-the-install-path-whereto-search-for-libraries">How do I change the install path whereto search for libraries?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-add-additional-verbosity-to-the-build-process-with-colcon">How do I add additional verbosity to the build process with <code class="docutils literal notranslate"><span class="pre">colcon</span></code>?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-add-debugging-symbols-to-ros-2-builds">How do I add debugging symbols to ROS 2 builds?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-enable-disable-tracing-for-benchmarking-purposes">How do I enable/disable tracing for benchmarking purposes?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#vitis">Vitis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-s-the-boot-image-format-bif-files-and-where-do-i-learn-more-about-it">What’s the Boot Image Format (<code class="docutils literal notranslate"><span class="pre">.bif</span></code> files) and where do I learn more about it?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-generate-a-boot-bin-from-a-bif-file-and-its-related-artifacts">How do I generate a boot.bin from a <code class="docutils literal notranslate"><span class="pre">.bif</span></code> file and its related artifacts?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-introspect-a-boot-bin-file">How do I introspect a BOOT.BIN file?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-execute-a-tcl-script-from-cli">How do I execute a Tcl script from CLI?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#vivado">Vivado</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-map-an-soc-featured-in-datasheets-to-the-part-for-hls">How do I map an SoC featured in datasheets to the part for HLS?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="other/definitions.html">Definitions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">KRS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>HowTo and Troubleshooting</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/docs/howto.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="howto-and-troubleshooting">
<h1>HowTo and Troubleshooting<a class="headerlink" href="#howto-and-troubleshooting" title="Permalink to this heading">¶</a></h1>
<!-- ////////// --><!-- ////////// --><!--     KV260  --><!-- ////////// --><!-- ////////// --><section id="kv260">
<h2>KV260<a class="headerlink" href="#kv260" title="Permalink to this heading">¶</a></h2>
<section id="how-do-i-update-the-kv260-firmware">
<h3>How do I update the KV260 firmware ?<a class="headerlink" href="#how-do-i-update-the-kv260-firmware" title="Permalink to this heading">¶</a></h3>
<p>According to <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1641152513/Kria+K26+SOM#Boot-FW-via-xmutil">https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/1641152513/Kria+K26+SOM#Boot-FW-via-xmutil</a> initial KV260 boards were shipped with a firmware that requires an update for <code class="docutils literal notranslate"><span class="pre">xmutil</span></code> tools to work appropriately. The corresponding firmware can be fetched from <a class="reference external" href="https://www.xilinx.com/member/forms/download/xef.html?filename=XilinxSom_QspiImage_v1.1_20210422.bin">https://www.xilinx.com/member/forms/download/xef.html?filename=XilinxSom_QspiImage_v1.1_20210422.bin</a>.</p>
</section>
<section id="how-do-i-emulate-kv260-images">
<h3>How do I emulate KV260 images?<a class="headerlink" href="#how-do-i-emulate-kv260-images" title="Permalink to this heading">¶</a></h3>
<p>In Vitis 2020.2 there’s a bug which limits the emulation capabilities with KV260. The current images are able to boot only up until the ramfs and end up in something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>...
SOM: CARRIER_CARD: REVISION:
NO CARRIER DTBO FOUND, PLEASE CHECK /boot/devicetree/
Waiting for /dev/mmcblk0p2 to pop up (attempt 1)
Waiting for /dev/mmcblk0p2 to pop up (attempt 2)
Waiting for /dev/mmcblk0p2 to pop up (attempt 3)
Waiting for /dev/mmcblk0p2 to pop up (attempt 4)
Waiting for /dev/mmcblk0p2 to pop up (attempt 5)
Waiting for /dev/mmcblk0p2 to pop up (attempt 6)
Waiting for /dev/mmcblk0p2 to pop up (attempt 7)
Waiting for /dev/mmcblk0p2 to pop up (attempt 8)
Waiting for /dev/mmcblk0p2 to pop up (attempt 9)
Waiting for /dev/mmcblk0p2 to pop up (attempt 10)
Device /dev/mmcblk0p2 not found
ERROR: There&#39;s no &#39;/dev&#39; on rootfs.
</pre></div>
</div>
<p>To finalize the boot, manually type the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>/configfs
mount<span class="w"> </span>-t<span class="w"> </span>configfs<span class="w"> </span>configfs<span class="w"> </span>/configfs
<span class="nb">cd</span><span class="w"> </span>/configfs/device-tree/overlays/
mkdir<span class="w"> </span>full
mkdir<span class="w"> </span>/lib/firmware/
cp<span class="w"> </span>/boot/devicetree/zynqmp-sck-kv-g-qemu.dtbo<span class="w"> </span>/lib/firmware/.
<span class="nb">echo</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;zynqmp-sck-kv-g-qemu.dtbo&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>full/path
<span class="nb">exec</span><span class="w"> </span>/init
</pre></div>
</div>
<p>this should lead you all the way down to the prompt:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>...
Starting<span class="w"> </span>system<span class="w"> </span>log<span class="w"> </span>daemon...0
Starting<span class="w"> </span>kernel<span class="w"> </span>log<span class="w"> </span>daemon...0
Starting<span class="w"> </span>crond:<span class="w"> </span>OK
Starting<span class="w"> </span>tcf-agent:<span class="w"> </span>OK
Starting<span class="w"> </span>TCG<span class="w"> </span>TSS2<span class="w"> </span>Access<span class="w"> </span>Broker<span class="w"> </span>and<span class="w"> </span>Resource<span class="w"> </span>Management<span class="w"> </span>daemon:<span class="w"> </span>device<span class="w"> </span>driver<span class="w"> </span>not<span class="w"> </span>loaded,<span class="w"> </span>skipping.

PetaLinux<span class="w"> </span><span class="m">2020</span>.2.2<span class="w"> </span>xilinx-k26-starterkit-2020_2.2<span class="w"> </span>ttyPS0

xilinx-k26-starterkit-2020_2<span class="w"> </span>login:
</pre></div>
</div>
</section>
<section id="how-do-i-configure-the-kv260-to-jtag-boot-mode">
<h3>How do I configure the KV260 to JTAG boot mode?<a class="headerlink" href="#how-do-i-configure-the-kv260-to-jtag-boot-mode" title="Permalink to this heading">¶</a></h3>
<p>The easiest way to do so is through a Tcl script and the Xilinx Software Commandline Tool (<code class="docutils literal notranslate"><span class="pre">xsct</span></code>). Connect the board to the computer via its USB/UART/JTAG FTDI adapter and power it on:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>/tools/Xilinx/Vitis/2022.1/settings64.sh<span class="w">  </span><span class="c1"># path might be different in your machine</span>
cat<span class="w"> </span><span class="s">&lt;&lt; &#39;EOF&#39; &gt; som_bootmode.tcl</span>

<span class="s">proc boot_jtag { } {</span>
<span class="s">############################</span>
<span class="s"># Switch to JTAG boot mode #</span>
<span class="s">############################</span>
<span class="s">targets -set -nocase -filter {name =~ &quot;PSU&quot;}</span>
<span class="s">stop</span>
<span class="s"># update multiboot to ZERO</span>
<span class="s">mwr 0xffca0010 0x0</span>
<span class="s"># change boot mode to JTAG</span>
<span class="s">mwr 0xff5e0200 0x0100</span>
<span class="s"># reset</span>
<span class="s">rst -system</span>

<span class="s">}</span>
<span class="s">EOF</span>

xsct
...

xsct%
xsct%
xsct%
xsct%<span class="w"> </span><span class="nb">source</span><span class="w"> </span>som_bootmode.tcl
xsct%<span class="w"> </span>connect
attempting<span class="w"> </span>to<span class="w"> </span>launch<span class="w"> </span>hw_server

******<span class="w"> </span>Xilinx<span class="w"> </span>hw_server<span class="w"> </span>v2020.2.2
<span class="w">  </span>****<span class="w"> </span>Build<span class="w"> </span>date<span class="w"> </span>:<span class="w"> </span>Feb<span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">2021</span><span class="w"> </span>at<span class="w"> </span><span class="m">05</span>:51:02
<span class="w">    </span>**<span class="w"> </span>Copyright<span class="w"> </span><span class="m">1986</span>-2021<span class="w"> </span>Xilinx,<span class="w"> </span>Inc.<span class="w"> </span>All<span class="w"> </span>Rights<span class="w"> </span>Reserved.

INFO:<span class="w"> </span>hw_server<span class="w"> </span>application<span class="w"> </span>started
INFO:<span class="w"> </span>Use<span class="w"> </span>Ctrl-C<span class="w"> </span>to<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>hw_server<span class="w"> </span>application

INFO:<span class="w"> </span>To<span class="w"> </span>connect<span class="w"> </span>to<span class="w"> </span>this<span class="w"> </span>hw_server<span class="w"> </span>instance<span class="w"> </span>use<span class="w"> </span>url:<span class="w"> </span>TCP:127.0.0.1:3121

tcfchan#0
xsct%
xsct%<span class="w"> </span>ta
<span class="w">  </span><span class="m">2</span><span class="w">  </span>PS<span class="w"> </span>TAP
<span class="w">     </span><span class="m">3</span><span class="w">  </span>PMU
<span class="w">     </span><span class="m">4</span><span class="w">  </span>PL
<span class="w">  </span><span class="m">6</span><span class="w">  </span>PSU
<span class="w">     </span><span class="m">7</span><span class="w">  </span>RPU
<span class="w">        </span><span class="m">8</span><span class="w">  </span>Cortex-R5<span class="w"> </span><span class="c1">#0 (Halted)</span>
<span class="w">        </span><span class="m">9</span><span class="w">  </span>Cortex-R5<span class="w"> </span><span class="c1">#1 (Lock Step Mode)</span>
<span class="w">    </span><span class="m">10</span><span class="w">  </span>APU
<span class="w">       </span><span class="m">11</span><span class="w">  </span>Cortex-A53<span class="w"> </span><span class="c1">#0 (Running)</span>
<span class="w">       </span><span class="m">12</span><span class="w">  </span>Cortex-A53<span class="w"> </span><span class="c1">#1 (Power On Reset)</span>
<span class="w">       </span><span class="m">13</span><span class="w">  </span>Cortex-A53<span class="w"> </span><span class="c1">#2 (Power On Reset)</span>
<span class="w">       </span><span class="m">14</span><span class="w">  </span>Cortex-A53<span class="w"> </span><span class="c1">#3 (Power On Reset)</span>
xsct%
xsct%<span class="w"> </span>boot_jtag
xsct%<span class="w"> </span><span class="nb">exit</span>
</pre></div>
</div>
<p>That’s it, now JTAG boot mode is set :).</p>
</section>
<section id="i-can-t-set-jtag-boot-mode-because-xsct-is-not-behaving-as-expected">
<h3>I can’t set JTAG boot mode because xsct is not behaving as expected?<a class="headerlink" href="#i-can-t-set-jtag-boot-mode-because-xsct-is-not-behaving-as-expected" title="Permalink to this heading">¶</a></h3>
<p>If you’re getting the following behavior:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xsct<span class="w">  </span><span class="c1"># enter the Xilinx Software Command-Line Tool</span>
xsct%<span class="w"> </span><span class="nb">source</span><span class="w"> </span>./som_bootmode.tcl
xsct%
xsct%
xsct%<span class="w"> </span>connect
attempting<span class="w"> </span>to<span class="w"> </span>launch<span class="w"> </span>hw_server

******<span class="w"> </span>Xilinx<span class="w"> </span>hw_server<span class="w"> </span>v2020.2.2
<span class="w">  </span>****<span class="w"> </span>Build<span class="w"> </span>date<span class="w"> </span>:<span class="w"> </span>Feb<span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">2021</span><span class="w"> </span>at<span class="w"> </span><span class="m">05</span>:51:02
<span class="w">    </span>**<span class="w"> </span>Copyright<span class="w"> </span><span class="m">1986</span>-2021<span class="w"> </span>Xilinx,<span class="w"> </span>Inc.<span class="w"> </span>All<span class="w"> </span>Rights<span class="w"> </span>Reserved.

INFO:<span class="w"> </span>hw_server<span class="w"> </span>application<span class="w"> </span>started
INFO:<span class="w"> </span>Use<span class="w"> </span>Ctrl-C<span class="w"> </span>to<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>hw_server<span class="w"> </span>application

INFO:<span class="w"> </span>To<span class="w"> </span>connect<span class="w"> </span>to<span class="w"> </span>this<span class="w"> </span>hw_server<span class="w"> </span>instance<span class="w"> </span>use<span class="w"> </span>url:<span class="w"> </span>TCP:127.0.0.1:3121

tcfchan#0
xsct%<span class="w"> </span>ta
xsct%<span class="w"> </span>boot_jtag
no<span class="w"> </span>targets<span class="w"> </span>found<span class="w"> </span>with<span class="w"> </span><span class="s2">&quot;name =~ &quot;</span>PSU<span class="s2">&quot;&quot;</span>.<span class="w"> </span>available<span class="w"> </span>targets:<span class="w"> </span>none
xsct%
</pre></div>
</div>
<p>Chances are you’ve got the wrong drivers. Install the ones that come with Vivado as documented at https://forums.xilinx.com/t5/Xilinx-Evaluation-Boards/Unable-to-connect-to-ZCU104-with-Ubuntu-16-04LTS/td-p/889856:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/tools/Xilinx/Vivado/2020.2/data/xicom/cable_drivers/lin64/install_script/install_drivers
sudo<span class="w"> </span>./install_drivers
<span class="o">[</span>sudo<span class="o">]</span><span class="w"> </span>password<span class="w"> </span><span class="k">for</span><span class="w"> </span>xilinx:
INFO:<span class="w"> </span>Installing<span class="w"> </span>cable<span class="w"> </span>drivers.
INFO:<span class="w"> </span>Script<span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>./install_drivers
INFO:<span class="w"> </span><span class="nv">HostName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>xilinx
INFO:<span class="w"> </span>Current<span class="w"> </span>working<span class="w"> </span><span class="nv">dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>/tools/Xilinx/Vivado/2020.2/data/xicom/cable_drivers/lin64/install_script/install_drivers
INFO:<span class="w"> </span>Kernel<span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span>.10.37-rt39-tsn-measurements.
INFO:<span class="w"> </span><span class="nv">Arch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>x86_64.
Successfully<span class="w"> </span>installed<span class="w"> </span>Digilent<span class="w"> </span>Cable<span class="w"> </span>Drivers
--File<span class="w"> </span>/etc/udev/rules.d/52-xilinx-ftdi-usb.rules<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist.
--File<span class="w"> </span>version<span class="w"> </span>of<span class="w"> </span>/etc/udev/rules.d/52-xilinx-ftdi-usb.rules<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0000</span>.
--Updating<span class="w"> </span>rules<span class="w"> </span>file.
--File<span class="w"> </span>/etc/udev/rules.d/52-xilinx-pcusb.rules<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist.
--File<span class="w"> </span>version<span class="w"> </span>of<span class="w"> </span>/etc/udev/rules.d/52-xilinx-pcusb.rules<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0000</span>.
--Updating<span class="w"> </span>rules<span class="w"> </span>file.

INFO:<span class="w"> </span>Digilent<span class="w"> </span>Return<span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
INFO:<span class="w"> </span>Xilinx<span class="w"> </span>Return<span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
INFO:<span class="w"> </span>Xilinx<span class="w"> </span>FTDI<span class="w"> </span>Return<span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
INFO:<span class="w"> </span>Return<span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
INFO:<span class="w"> </span>Driver<span class="w"> </span>installation<span class="w"> </span>successful.
CRITICAL<span class="w"> </span>WARNING:<span class="w"> </span>Cable<span class="o">(</span>s<span class="o">)</span><span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>system<span class="w"> </span>must<span class="w"> </span>be<span class="w"> </span>unplugged<span class="w"> </span><span class="k">then</span><span class="w"> </span>plugged<span class="w"> </span>back<span class="w"> </span><span class="k">in</span><span class="w"> </span>order<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>driver<span class="w"> </span>scripts<span class="w"> </span>to<span class="w"> </span>update<span class="w"> </span>the<span class="w"> </span>cables.
</pre></div>
</div>
</section>
<section id="how-can-i-deal-with-xrt-error-no-devices-found-issues-when-launching-an-accelerated-app">
<h3>How can I deal with “[XRT] ERROR: No devices found” issues when launching an accelerated app?<a class="headerlink" href="#how-can-i-deal-with-xrt-error-no-devices-found-issues-when-launching-an-accelerated-app" title="Permalink to this heading">¶</a></h3>
<p>!!! note
This is caused by issues within the <code class="docutils literal notranslate"><span class="pre">2020.2.2</span></code> PetaLinux BSP release. <code class="docutils literal notranslate"><span class="pre">2021.1</span></code> should address these issues.</p>
<p>If when launching accelerated applications you observe the following</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>XRT<span class="w"> </span>build<span class="w"> </span>version:<span class="w"> </span><span class="m">2</span>.8.0
Build<span class="w"> </span>hash:<span class="w"> </span>b94857f15ba8c8251df446e8c51af7e0a7c9e061
Build<span class="w"> </span>date:<span class="w"> </span><span class="m">2021</span>-06-11<span class="w"> </span><span class="m">07</span>:18:33
Git<span class="w"> </span>branch:<span class="w"> </span><span class="m">2020</span>.2
PID:<span class="w"> </span><span class="m">1694</span>
UID:<span class="w"> </span><span class="m">0</span>
<span class="o">[</span>Sat<span class="w"> </span>Jul<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">16</span>:33:09<span class="w"> </span><span class="m">2021</span><span class="w"> </span>GMT<span class="o">]</span>
HOST:<span class="w"> </span>xilinx-k26-starterkit-2020_2.2
EXE:<span class="w"> </span>/ros2_ws/lib/faster_vadd_publisher/faster_vadd
<span class="o">[</span>XRT<span class="o">]</span><span class="w"> </span>ERROR:<span class="w"> </span>No<span class="w"> </span>devices<span class="w"> </span>found
<span class="o">[</span>XRT<span class="o">]</span><span class="w"> </span>ERROR:<span class="w"> </span>No<span class="w"> </span>devices<span class="w"> </span>found
<span class="o">[</span>XRT<span class="o">]</span><span class="w"> </span>ERROR:<span class="w"> </span>No<span class="w"> </span>devices<span class="w"> </span>found
ERROR:<span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>find<span class="w"> </span>Xilinx<span class="w"> </span>platform
</pre></div>
</div>
<p>And <code class="docutils literal notranslate"><span class="pre">xbutil</span></code> shows an error like the following one:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xilinx-k26-starterkit-2020_2:/ros2_ws/lib/faster_vadd_publisher#<span class="w"> </span>xbutil<span class="w"> </span>list
INFO:<span class="w"> </span>Found<span class="w"> </span>total<span class="w"> </span><span class="m">1</span><span class="w"> </span>card<span class="o">(</span>s<span class="o">)</span>,<span class="w"> </span><span class="m">1</span><span class="w"> </span>are<span class="w"> </span>usable
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
System<span class="w"> </span>Configuration
OS<span class="w"> </span>name:<span class="w">	</span>Linux
Release:<span class="w">	</span><span class="m">5</span>.4.0-xilinx-v2020.2
Version:<span class="w">	</span><span class="c1">#1 SMP Thu Jun 10 22:03:38 UTC 2021</span>
Machine:<span class="w">	</span>aarch64
Glibc:<span class="w">		</span><span class="m">2</span>.30
Distribution:<span class="w">	</span>N/A
Now:<span class="w">		</span>Sat<span class="w"> </span>Jul<span class="w"> </span><span class="m">31</span><span class="w"> </span><span class="m">16</span>:40:06<span class="w"> </span><span class="m">2021</span><span class="w"> </span>GMT
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
XRT<span class="w"> </span>Information
Version:<span class="w">	</span><span class="m">2</span>.8.0
Git<span class="w"> </span>Hash:<span class="w">	</span>b94857f15ba8c8251df446e8c51af7e0a7c9e061
Git<span class="w"> </span>Branch:<span class="w">	</span><span class="m">2020</span>.2
Build<span class="w"> </span>Date:<span class="w">	</span><span class="m">2021</span>-06-11<span class="w"> </span><span class="m">07</span>:18:33
ZOCL:<span class="w">		</span><span class="m">2</span>.8.0,b94857f15ba8c8251df446e8c51af7e0a7c9e061
Failed<span class="w"> </span>to<span class="w"> </span>open<span class="w"> </span>device<span class="o">[</span><span class="m">0</span><span class="o">]</span>
ERROR:<span class="w"> </span>Card<span class="w"> </span>index<span class="w"> </span><span class="m">0</span><span class="w"> </span>is<span class="w"> </span>out<span class="w"> </span>of<span class="w"> </span>range
</pre></div>
</div>
<p>then, chances are your device tree does not include the corresponding <code class="docutils literal notranslate"><span class="pre">zocl</span></code> entry. A quick fix to to manually add it and rebuild the blob. To do so, get the sources from the device tree blob:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dtc<span class="w"> </span>-I<span class="w"> </span>dtb<span class="w"> </span>-O<span class="w"> </span>dts<span class="w"> </span>-o<span class="w"> </span>system.dts<span class="w"> </span>system.dtb
</pre></div>
</div>
<p>Edit <code class="docutils literal notranslate"><span class="pre">system.dts</span></code> and add the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                <span class="n">zyxclmm_drm</span> <span class="p">{</span>
                        <span class="n">compatible</span> <span class="o">=</span> <span class="s2">&quot;xlnx,zocl&quot;</span><span class="p">;</span>
                        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;okay&quot;</span><span class="p">;</span>
                <span class="p">};</span>
</pre></div>
</div>
<p>Build again the device tree into its blob:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dtc<span class="w"> </span>-I<span class="w"> </span>dts<span class="w"> </span>-O<span class="w"> </span>dtb<span class="w"> </span>-o<span class="w"> </span>system.dtb<span class="w"> </span>system.dts
</pre></div>
</div>
<p>After this, a good looking tree should have the following response:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xbutil<span class="w"> </span>list
INFO:<span class="w"> </span>Found<span class="w"> </span>total<span class="w"> </span><span class="m">1</span><span class="w"> </span>card<span class="o">(</span>s<span class="o">)</span>,<span class="w"> </span><span class="m">1</span><span class="w"> </span>are<span class="w"> </span>usable
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
System<span class="w"> </span>Configuration
OS<span class="w"> </span>name:<span class="w">	</span>Linux
Release:<span class="w">	</span><span class="m">5</span>.4.0-xilinx-v2020.2
Version:<span class="w">	</span><span class="c1">#1 SMP Thu Jun 10 22:03:38 UTC 2021</span>
Machine:<span class="w">	</span>aarch64
Glibc:<span class="w">		</span><span class="m">2</span>.30
Distribution:<span class="w">	</span>N/A
Now:<span class="w">		</span>Wed<span class="w"> </span>Aug<span class="w">  </span><span class="m">4</span><span class="w"> </span><span class="m">14</span>:49:47<span class="w"> </span><span class="m">2021</span><span class="w"> </span>GMT
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
XRT<span class="w"> </span>Information
Version:<span class="w">	</span><span class="m">2</span>.8.0
Git<span class="w"> </span>Hash:<span class="w">	</span>b94857f15ba8c8251df446e8c51af7e0a7c9e061
Git<span class="w"> </span>Branch:<span class="w">	</span><span class="m">2020</span>.2
Build<span class="w"> </span>Date:<span class="w">	</span><span class="m">2021</span>-06-11<span class="w"> </span><span class="m">07</span>:18:33
ZOCL:<span class="w">		</span><span class="m">2</span>.8.0,b94857f15ba8c8251df446e8c51af7e0a7c9e061
<span class="w"> </span><span class="o">[</span><span class="m">0</span><span class="o">]</span>:edge
</pre></div>
</div>
</section>
</section>
<section id="basic-embedded">
<h2>Basic embedded<a class="headerlink" href="#basic-embedded" title="Permalink to this heading">¶</a></h2>
<section id="how-do-i-install-a-package-built-with-petalinux-in-my-embedded-target">
<h3>How do I install a package built with PetaLinux in my embedded target?<a class="headerlink" href="#how-do-i-install-a-package-built-with-petalinux-in-my-embedded-target" title="Permalink to this heading">¶</a></h3>
<p>You can build individual packages with PetaLinux using the following syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-build<span class="w"> </span>-c<span class="w"> </span>&lt;package&gt;<span class="w">  </span><span class="c1"># e.g. petalinux-build -c dfx-mgr</span>
</pre></div>
</div>
<p>the resulting package will be built and archived, resulting in an <code class="docutils literal notranslate"><span class="pre">.rpm</span></code> file which you can often find at <code class="docutils literal notranslate"><span class="pre">build/tmp/deploy/rpm/aarch64/dfx-mgr*.rpm</span></code>.</p>
<p>We can install this in the embedded target as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># host</span>
scp<span class="w"> </span>build/tmp/deploy/rpm/aarch64/dfx-mgr*.rpm<span class="w"> </span>root@192.168.1.86:~/<span class="w">  </span><span class="c1"># copy them</span>

<span class="c1"># embedded target</span>
rpm<span class="w"> </span>-i<span class="w"> </span>--force<span class="w"> </span>dfx-mgr-1.0-r0.aarch64.rpm<span class="w">  </span><span class="c1"># force install to overwrite same version</span>
</pre></div>
</div>
</section>
<section id="how-do-i-get-the-sources-dts-from-a-device-tree-blob-dtb">
<h3>How do I get the sources (.dts) from a device tree blob (.dtb)?<a class="headerlink" href="#how-do-i-get-the-sources-dts-from-a-device-tree-blob-dtb" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dtc<span class="w"> </span>-I<span class="w"> </span>dtb<span class="w"> </span>-O<span class="w"> </span>dts<span class="w"> </span>-o<span class="w"> </span>system.dts<span class="w"> </span>system.dtb
</pre></div>
</div>
</section>
<section id="how-do-i-build-a-device-tree-blob-dtb-from-the-sources-dts">
<h3>How do I build a device tree blob (.dtb) from the sources (.dts)?<a class="headerlink" href="#how-do-i-build-a-device-tree-blob-dtb-from-the-sources-dts" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dtc<span class="w"> </span>-I<span class="w"> </span>dts<span class="w"> </span>-O<span class="w"> </span>dtb<span class="w"> </span>-o<span class="w"> </span>system.dtb<span class="w"> </span>system.dts
</pre></div>
</div>
</section>
<section id="how-do-i-get-a-better-gdb-debugging-environment">
<h3>How do I get a better gdb debugging environment?<a class="headerlink" href="#how-do-i-get-a-better-gdb-debugging-environment" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">-</span><span class="n">P</span> <span class="o">~</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="o">.</span><span class="n">io</span><span class="o">/.</span><span class="n">gdbinit</span>
</pre></div>
</div>
</section>
<section id="get-do-i-get-a-serial-to-zcu10x-boards">
<h3>Get do I get a serial to ZCU10X boards?<a class="headerlink" href="#get-do-i-get-a-serial-to-zcu10x-boards" title="Permalink to this heading">¶</a></h3>
<p>Use a simple TTY terminal application. There’re various you could use: <code class="docutils literal notranslate"><span class="pre">minicom</span></code>, <code class="docutils literal notranslate"><span class="pre">picocom</span></code>, etc.</p>
<p>I like <a class="reference external" href="https://tio.github.io/">tio</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>tio
sudo<span class="w"> </span>tio<span class="w"> </span>/dev/ttyUSB0
</pre></div>
</div>
</section>
<section id="get-hdmi-in-my-zcu10x-boards">
<h3>Get HDMI in my ZCU10X boards?<a class="headerlink" href="#get-hdmi-in-my-zcu10x-boards" title="Permalink to this heading">¶</a></h3>
<p>Through the DisplayPort port. We support selected connectors. The following have been tested:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Product</th>
<th>Works</th>
</tr>
</thead>
<tbody>
<tr>
<td>JSAUX JSESNZ4KDP2HDF</td>
<td>==Yes==</td>
</tr>
<tr>
<td>J5create JDA158</td>
<td> ==Yes==</td>
</tr>
<tr>
<td>IVANKY-DP11</td>
<td>No</td>
</tr>
<tr>
<td>ICZI  IZEC-A10-IT</td>
<td>No</td>
</tr>
<tr>
<td>Snowkids cable</td>
<td>No</td>
</tr>
</tbody>
</table></section>
<section id="how-do-i-calculate-the-offsets-for-the-raw-img-images-so-that-i-can-mount-them">
<h3>How do I calculate the offsets for the raw <code class="docutils literal notranslate"><span class="pre">.img</span></code> images, so that I can mount them?<a class="headerlink" href="#how-do-i-calculate-the-offsets-for-the-raw-img-images-so-that-i-can-mount-them" title="Permalink to this heading">¶</a></h3>
<p>Offsets can be inspected in the following manner:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>fdisk<span class="w"> </span>-l<span class="w"> </span>&lt;path-to-img&gt;/sd_card.img
Disk<span class="w"> </span>/home/xilinx/ros2_ws/acceleration/firmware/xilinx/sd_card.img:<span class="w"> </span><span class="m">2</span>.47<span class="w"> </span>GiB,<span class="w"> </span><span class="m">2635071488</span><span class="w"> </span>bytes,<span class="w"> </span><span class="m">5146624</span><span class="w"> </span>sectors
Units:<span class="w"> </span>sectors<span class="w"> </span>of<span class="w"> </span><span class="m">1</span><span class="w"> </span>*<span class="w"> </span><span class="nv">512</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
Sector<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>logical/physical<span class="o">)</span>:<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes<span class="w"> </span>/<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
I/O<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>minimum/optimal<span class="o">)</span>:<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes<span class="w"> </span>/<span class="w"> </span><span class="m">512</span><span class="w"> </span>bytes
Disklabel<span class="w"> </span>type:<span class="w"> </span>dos
Disk<span class="w"> </span>identifier:<span class="w"> </span>0xe29caf3d

Device<span class="w">                                          </span>Boot<span class="w">   </span>Start<span class="w">     </span>End<span class="w"> </span>Sectors<span class="w">  </span>Size<span class="w"> </span>Id<span class="w"> </span>Type
/home/xilinx/ros2_ws/acceleration/firmware/xilinx/sd_card.img1<span class="w"> </span>*<span class="w">       </span><span class="m">2048</span><span class="w"> </span><span class="m">2000895</span><span class="w"> </span><span class="m">1998848</span><span class="w">  </span>976M<span class="w"> </span><span class="m">83</span><span class="w"> </span>Linux
/home/xilinx/ros2_ws/acceleration/firmware/xilinx/sd_card.img2<span class="w">      </span><span class="m">2000896</span><span class="w"> </span><span class="m">5146623</span><span class="w"> </span><span class="m">3145728</span><span class="w">  </span><span class="m">1</span>.5G<span class="w"> </span><span class="m">83</span><span class="w"> </span>Linux
</pre></div>
</div>
<p>To calculate them, multiple the <code class="docutils literal notranslate"><span class="pre">End</span></code> by the <code class="docutils literal notranslate"><span class="pre">Units</span></code>. For example, for the second partition:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="k">$(($(</span>fdisk<span class="w"> </span>-l<span class="w"> </span>/home/xilinx/ros2_ws/acceleration/firmware/xilinx/sd_card.img<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;img2&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $2}&#39;</span><span class="k">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">$(</span>fdisk<span class="w"> </span>-l<span class="w"> </span>/home/xilinx/ros2_ws/acceleration/firmware/xilinx/sd_card.img<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s1">&#39;Units&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $8}&#39;</span><span class="k">)))</span>
<span class="m">1024458752</span>
</pre></div>
</div>
</section>
<section id="how-do-i-mount-a-img-file-for-inspection">
<h3>How do I mount a <code class="docutils literal notranslate"><span class="pre">.img</span></code> file for inspection?<a class="headerlink" href="#how-do-i-mount-a-img-file-for-inspection" title="Permalink to this heading">¶</a></h3>
<p>!!! note
The offsets need to be calculated first.</p>
<p>Raw image files contain several partitions. The first one is often the boot partition and the second one typically contains the file system. The following two commands will help mount the first two:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># mount boot partition</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>/tmp/sdcard_img_p1<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>mount<span class="w"> </span>-o<span class="w"> </span>loop,offset<span class="o">=</span><span class="m">1048576</span><span class="w"> </span>/home/xilinx/ros2_ws/acceleration/firmware/xilinx/sd_card.img<span class="w"> </span>/tmp/sdcard_img_p1

<span class="c1"># mount rootfs partition</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>/tmp/sdcard_img_p2<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>mount<span class="w"> </span>-o<span class="w"> </span>loop,offset<span class="o">=</span><span class="m">588251136</span><span class="w"> </span>/home/xilinx/ros2_ws/acceleration/firmware/xilinx/sd_card.img<span class="w"> </span>/tmp/sdcard_img_p2
</pre></div>
</div>
<p>To umount:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>umount<span class="w"> </span>/tmp/sdcard_img_p1<span class="w">  </span><span class="c1"># or *_p2, as appropriate</span>
</pre></div>
</div>
</section>
<section id="how-do-i-create-an-initramfs-from-an-rootfs-partition">
<h3>How do I create an initramfs from an rootfs partition?<a class="headerlink" href="#how-do-i-create-an-initramfs-from-an-rootfs-partition" title="Permalink to this heading">¶</a></h3>
<p>See [^32] for more details:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon<span class="w"> </span>acceleration<span class="w"> </span>mkinitramfs<span class="w"> </span>out.cpio.gz
</pre></div>
</div>
<p>Alternatively:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># mount sd card rootfs partition</span>
sudo<span class="w"> </span>mount<span class="w"> </span>-o<span class="w"> </span>loop,offset<span class="o">=</span><span class="m">1024458752</span><span class="w"> </span>/home/xilinx/ros2_ws/acceleration/firmware/xilinx/sd_card.img<span class="w"> </span>/tmp/sdcard_img_p2
<span class="c1"># create script, no variable expansion</span>
cat<span class="w"> </span><span class="s">&lt;&lt; &#39;EOF&#39; &gt; mkinitramfs.sh</span>
<span class="s">#!/bin/sh</span>

<span class="s"># Copyright 2006 Rob Landley &lt;rob@landley.net&gt; and TimeSys Corporation.</span>
<span class="s"># Licensed under GPL version 2</span>

<span class="s">if [ $# -ne 2 ]</span>
<span class="s">then</span>
<span class="s">    echo &quot;usage: mkinitramfs directory imagename.cpio.gz&quot;</span>
<span class="s">    exit 1</span>
<span class="s">fi</span>

<span class="s">if [ -d &quot;$1&quot; ]</span>
<span class="s">then</span>
<span class="s">    echo &quot;creating $2 from $1&quot;</span>
<span class="s">    (cd &quot;$1&quot;; find . | cpio -o -H newc | gzip) &gt; &quot;$2&quot;</span>
<span class="s">else</span>
<span class="s">    echo &quot;First argument must be a directory&quot;</span>
<span class="s">    exit 1</span>
<span class="s">fi</span>
<span class="s">EOF</span>
chmod<span class="w"> </span>+x<span class="w"> </span>mkinitramfs.sh
<span class="c1"># create initramfs</span>
sudo<span class="w"> </span>./mkinitramfs.sh<span class="w"> </span>/tmp/sdcard_img_p2<span class="w"> </span>test.cpio.gz
</pre></div>
</div>
</section>
<section id="how-do-i-handle-corrupted-sd-card-img-files">
<h3>How do I handle corrupted sd_card.img files?<a class="headerlink" href="#how-do-i-handle-corrupted-sd-card-img-files" title="Permalink to this heading">¶</a></h3>
<p>It’s been observed that <code class="docutils literal notranslate"><span class="pre">sd_card.img</span></code> files get sometimes corrupted but neither <code class="docutils literal notranslate"><span class="pre">ddrescue</span></code> nor <code class="docutils literal notranslate"><span class="pre">testdisk</span></code> helped recovering them. The typicaly behavior observed in a corrupted image can be reproduced by trying to mount its second partition:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p /tmp/sdcard_img_p2 &amp;&amp; sudo mount -o loop,offset=1024458752 /home/xilinx/ros2_ws/acceleration/firmware/xilinx/sd_card.img /tmp/sdcard_img_p2
[sudo] password for xilinx:
NTFS signature is missing.
Failed to mount &#39;/dev/loop1&#39;: Invalid argument
The device &#39;/dev/loop1&#39; doesn&#39;t seem to have a valid NTFS.
Maybe the wrong device is used? Or the whole disk instead of a
partition (e.g. /dev/sda, not /dev/sda1)? Or the other way around?
</pre></div>
</div>
<p>??? warning “Reproduce this behavior with KRS hypervisor functionality”</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>```bash
cd ~/ros2_ws/xilinx/firmware
tar -xzf sd_card.img.tar.gz  # decompress the image
cd ~/ros2_ws/
colcon acceleration hypervisor --dom0 vanilla --domU vanilla --ramdisk initrd.cpio  # this works just fine, can mount afterwards
colcon acceleration hypervisor --dom0 vanilla --domU vanilla --ramdisk initrd.cpio.gz  # this works just fine, can mount afterwards
colcon acceleration hypervisor --dom0 vanilla --domU vanilla --ramdisk rootfs.cpio.gz  # this works just fine, can mount afterwards
colcon acceleration hypervisor --dom0 vanilla --domU vanilla --ramdisk test.cpio.gz

```
</pre></div>
</div>
<p>The current solution for this issue is to discard the sd_card.img file and create a new one from the <code class="docutils literal notranslate"><span class="pre">sd_card.img.tar.gz</span></code> file.</p>
<p>!!! note
This might be related to the fact that p1 in the sd_card is filling and overloading p2.</p>
</section>
<section id="extracting-bitstream-from-xclbin-file">
<h3>Extracting bitstream from xclbin file:<a class="headerlink" href="#extracting-bitstream-from-xclbin-file" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xclbinutil<span class="w"> </span>--dump-section<span class="w"> </span>BITSTREAM:RAW:bitstream.bit<span class="w"> </span>--input<span class="w"> </span>vadd.xclbin
</pre></div>
</div>
</section>
<section id="how-do-i-figure-out-version-of-a-kernel-binary">
<h3>How do I figure out version of a kernel binary?<a class="headerlink" href="#how-do-i-figure-out-version-of-a-kernel-binary" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>strings<span class="w"> </span>Image<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;Linux version&quot;</span>
Linux<span class="w"> </span>version<span class="w"> </span><span class="m">5</span>.4.0-xilinx-v2020.2<span class="w"> </span><span class="o">(</span>oe-user@oe-host<span class="o">)</span><span class="w"> </span><span class="o">(</span>gcc<span class="w"> </span>version<span class="w"> </span><span class="m">9</span>.2.0<span class="w"> </span><span class="o">(</span>GCC<span class="o">))</span><span class="w"> </span><span class="c1">#1 SMP Thu Jun 10 22:03:38 UTC 2021</span>
Linux<span class="w"> </span>version<span class="w"> </span>%s<span class="w"> </span><span class="o">(</span>%s<span class="o">)</span>
</pre></div>
</div>
<p>or more elaborated:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>strings<span class="w"> </span>Image<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;5\.[0123456789]\.[0123456789]&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;Linux version&quot;</span>
Linux<span class="w"> </span>version<span class="w"> </span><span class="m">5</span>.4.0-xilinx-v2020.2<span class="w"> </span><span class="o">(</span>oe-user@oe-host<span class="o">)</span><span class="w"> </span><span class="o">(</span>gcc<span class="w"> </span>version<span class="w"> </span><span class="m">9</span>.2.0<span class="w"> </span><span class="o">(</span>GCC<span class="o">))</span><span class="w"> </span><span class="c1">#1 SMP Thu Jun 10 22:03:38 UTC 2021</span>
</pre></div>
</div>
</section>
<section id="how-do-i-copy-an-image-to-the-sd-card-in-os-x-from-cli">
<h3>How do I copy an image to the SD card in OS X from CLI?<a class="headerlink" href="#how-do-i-copy-an-image-to-the-sd-card-in-os-x-from-cli" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>diskutil<span class="w"> </span>unmount<span class="w"> </span>/dev/rdisk2s1
pv<span class="w"> </span>sd_card.img<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>dd<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/dev/rdisk2<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>4m
</pre></div>
</div>
</section>
<section id="how-do-i-increase-swap-in-linux-for-vitis-vivado-builds">
<h3>How do I increase swap in Linux for Vitis/Vivado builds?<a class="headerlink" href="#how-do-i-increase-swap-in-linux-for-vitis-vivado-builds" title="Permalink to this heading">¶</a></h3>
<p>For a 30G swap:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>swapoff<span class="w"> </span>-a
sudo<span class="w"> </span>dd<span class="w"> </span><span class="k">if</span><span class="o">=</span>/dev/zero<span class="w"> </span><span class="nv">of</span><span class="o">=</span>/swapfile<span class="w"> </span><span class="nv">bs</span><span class="o">=</span>1G<span class="w"> </span><span class="nv">count</span><span class="o">=</span><span class="m">30</span>
sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">600</span><span class="w"> </span>/swapfile
sudo<span class="w"> </span>mkswap<span class="w"> </span>/swapfile
sudo<span class="w"> </span>swapon<span class="w"> </span>/swapfile
</pre></div>
</div>
<p>To fix things at boot, edit <code class="docutils literal notranslate"><span class="pre">/etc/fstab</span> </code> and add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">swapfile</span> <span class="n">none</span> <span class="n">swap</span> <span class="n">sw</span> <span class="mi">0</span> <span class="mi">0</span>
</pre></div>
</div>
</section>
</section>
<section id="network-boot">
<h2>Network boot<a class="headerlink" href="#network-boot" title="Permalink to this heading">¶</a></h2>
<section id="tftp-server">
<h3>TFTP server<a class="headerlink" href="#tftp-server" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; /etc/xinetd.d/tftp</span>
<span class="s">service tftp</span>
<span class="s">{</span>
<span class="s">    protocol        = udp</span>
<span class="s">    port            = 69</span>
<span class="s">    socket_type     = dgram</span>
<span class="s">    wait            = yes</span>
<span class="s">    user            = xilinx</span>
<span class="s">    server          = /usr/sbin/in.tftpd</span>
<span class="s">    server_args     = /srv/tftp</span>
<span class="s">    disable         = no</span>
<span class="s">}</span>
<span class="s">EOF</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>xinetd.service
setenv<span class="w"> </span>ipaddr<span class="w"> </span><span class="m">192</span>.168.1.86
setenv<span class="w"> </span>serverip<span class="w"> </span><span class="m">192</span>.168.1.33
tftpb<span class="w"> </span>0xC00000<span class="w"> </span>xen_boot_tftp.scr<span class="w">  </span><span class="c1"># fetch one file in address 0xC00000</span>
<span class="nb">source</span><span class="w"> </span>0xC00000
</pre></div>
</div>
</section>
<section id="ipxe">
<h3>iPXE<a class="headerlink" href="#ipxe" title="Permalink to this heading">¶</a></h3>
<p>iPXE is the “swiss army knife” of network booting. It supports both HTTPS and iSCSI. In addition, it has a script engine for fine grained control of the boot process and can provide a command shell. iPXE can be built as an EFI application (named snp.efi) which can be loaded and run by U-Boot:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># compile iPXE</span>
git<span class="w"> </span>clone<span class="w"> </span>http://git.ipxe.org/ipxe.git
<span class="nb">cd</span><span class="w"> </span>ipxe/src/
cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; myscript.ipxe</span>
<span class="s">#!ipxe</span>

<span class="s">dhcp</span>
<span class="s">:loop</span>
<span class="s">echo Hello world</span>
<span class="s">goto loop</span>
<span class="s">EOF</span>
make<span class="w"> </span><span class="nv">CROSS_COMPILE</span><span class="o">=</span>aarch64-linux-gnu-<span class="w"> </span><span class="nv">ARCH</span><span class="o">=</span>arm64<span class="w"> </span>bin-arm64-efi/snp.efi<span class="w"> </span>-j6<span class="w"> </span><span class="nv">EMBED</span><span class="o">=</span>myscript.ipxe

<span class="c1"># copy to tftp folder</span>
cp<span class="w"> </span>bin-arm64-efi/snp.efi<span class="w"> </span>/srv/tftp

<span class="c1"># in the embedded board, fetch result</span>
setenv<span class="w"> </span>ipaddr<span class="w"> </span><span class="m">192</span>.168.1.86
setenv<span class="w"> </span>serverip<span class="w"> </span><span class="m">192</span>.168.1.33
tftpb<span class="w"> </span>0xC00000<span class="w"> </span>snp.efi
bootefi<span class="w"> </span>0xc00000
</pre></div>
</div>
<p>that’ll get us something like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ZynqMP&gt;<span class="w"> </span>tftpb<span class="w"> </span>0xC00000<span class="w"> </span>snp.efi
Using<span class="w"> </span>ethernet@ff0e0000<span class="w"> </span>device
TFTP<span class="w"> </span>from<span class="w"> </span>server<span class="w"> </span><span class="m">192</span>.168.1.33<span class="p">;</span><span class="w"> </span>our<span class="w"> </span>IP<span class="w"> </span>address<span class="w"> </span>is<span class="w"> </span><span class="m">192</span>.168.1.86
Filename<span class="w"> </span><span class="s1">&#39;snp.efi&#39;</span>.
Load<span class="w"> </span>address:<span class="w"> </span>0xc00000
Loading:<span class="w"> </span><span class="c1">#######################################</span>
<span class="w">	 </span><span class="m">3</span>.7<span class="w"> </span>MiB/s
<span class="k">done</span>
Bytes<span class="w"> </span><span class="nv">transferred</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">197632</span><span class="w"> </span><span class="o">(</span><span class="m">30400</span><span class="w"> </span>hex<span class="o">)</span>
ZynqMP&gt;<span class="w"> </span>bootefi<span class="w"> </span>0xc00000
Scanning<span class="w"> </span>disk<span class="w"> </span>mmc@ff170000.blk...
Found<span class="w"> </span><span class="m">3</span><span class="w"> </span>disks
efi_load_pe:<span class="w"> </span>Invalid<span class="w"> </span>DOS<span class="w"> </span>Signature
iPXE<span class="w"> </span>initialising<span class="w"> </span>devices...ok



iPXE<span class="w"> </span><span class="m">1</span>.21.1+<span class="w"> </span><span class="o">(</span>g3ae83<span class="o">)</span><span class="w"> </span>--<span class="w"> </span>Open<span class="w"> </span>Source<span class="w"> </span>Network<span class="w"> </span>Boot<span class="w"> </span>Firmware<span class="w"> </span>--<span class="w"> </span>http://ipxe.org
Features:<span class="w"> </span>DNS<span class="w"> </span>HTTP<span class="w"> </span>iSCSI<span class="w"> </span>TFTP<span class="w"> </span>AoE<span class="w"> </span>EFI<span class="w"> </span>Menu
Configuring<span class="w"> </span><span class="o">(</span>net0<span class="w"> </span><span class="m">00</span>:0a:35:00:22:01<span class="o">)</span>......<span class="w"> </span>ok
Hello<span class="w"> </span>world
Hello<span class="w"> </span>world
Hello<span class="w"> </span>world
Hello<span class="w"> </span>world
Hello<span class="w"> </span>world
...
</pre></div>
</div>
<p>Alternatively, one could deposit the iPXE binary in the boot partition and create a boot script to automate it. The following example creates the boot script and fetches it over TFTP (it could also be pushed into the boot partition in which case will initiate automatically):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># create source file and compile it as a script for u-boot</span>
cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; boot.source</span>
<span class="s">load mmc 0:1 0xE00000 snp.efi</span>
<span class="s">bootefi 0xE00000</span>
<span class="s">EOF</span>
mkimage<span class="w"> </span>-A<span class="w"> </span>arm<span class="w"> </span>-O<span class="w"> </span>linux<span class="w"> </span>-T<span class="w"> </span>script<span class="w"> </span>-C<span class="w"> </span>none<span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;u-boot commands&quot;</span><span class="w"> </span>-d<span class="w"> </span>boot.source<span class="w"> </span>boot.scr
<span class="c1"># copy to tftp directory and test it manually</span>
cp<span class="w"> </span>boot.scr<span class="w"> </span>/srv/tftp

<span class="c1"># within u-boot</span>
tftpb<span class="w"> </span>0xC00000<span class="w"> </span>boot.scr
<span class="nb">source</span><span class="w"> </span>0xC00000
<span class="c1">## Executing script at 00c00000</span>
<span class="m">197632</span><span class="w"> </span>bytes<span class="w"> </span><span class="nb">read</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">39</span><span class="w"> </span>ms<span class="w"> </span><span class="o">(</span><span class="m">4</span>.8<span class="w"> </span>MiB/s<span class="o">)</span>
Scanning<span class="w"> </span>disk<span class="w"> </span>mmc@ff170000.blk...
**<span class="w"> </span>Unrecognized<span class="w"> </span>filesystem<span class="w"> </span><span class="nb">type</span><span class="w"> </span>**
Found<span class="w"> </span><span class="m">3</span><span class="w"> </span>disks
efi_load_pe:<span class="w"> </span>Invalid<span class="w"> </span>DOS<span class="w"> </span>Signature
iPXE<span class="w"> </span>initialising<span class="w"> </span>devices...ok



iPXE<span class="w"> </span><span class="m">1</span>.21.1+<span class="w"> </span><span class="o">(</span>g3ae83<span class="o">)</span><span class="w"> </span>--<span class="w"> </span>Open<span class="w"> </span>Source<span class="w"> </span>Network<span class="w"> </span>Boot<span class="w"> </span>Firmware<span class="w"> </span>--<span class="w"> </span>http://ipxe.org
Features:<span class="w"> </span>DNS<span class="w"> </span>HTTP<span class="w"> </span>iSCSI<span class="w"> </span>TFTP<span class="w"> </span>AoE<span class="w"> </span>EFI<span class="w"> </span>Menu
Configuring<span class="w"> </span><span class="o">(</span>net0<span class="w"> </span><span class="m">00</span>:0a:35:00:22:01<span class="o">)</span>......<span class="w"> </span>ok
Hello<span class="w"> </span>world
Hello<span class="w"> </span>world
Hello<span class="w"> </span>world
Hello<span class="w"> </span>world
Hello<span class="w"> </span>world
...
</pre></div>
</div>
</section>
<section id="how-do-i-create-boot-scripts-from-their-sources">
<h3>How do I create boot scripts from their sources?<a class="headerlink" href="#how-do-i-create-boot-scripts-from-their-sources" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkimage<span class="w"> </span>-c<span class="w"> </span>none<span class="w"> </span>-A<span class="w"> </span>arm<span class="w"> </span>-T<span class="w"> </span>script<span class="w"> </span>-d<span class="w"> </span>boot.source<span class="w"> </span>boot.scr
</pre></div>
</div>
</section>
<section id="i-can-t-boot-my-image-because-i-get-a-kernel-panic-like-the-following-one">
<h3>I can’t boot my image because I get a kernel panic like the following one<a class="headerlink" href="#i-can-t-boot-my-image-because-i-get-a-kernel-panic-like-the-following-one" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="w">    </span><span class="m">4</span>.549695<span class="o">]</span><span class="w"> </span>cfg80211:<span class="w"> </span>Loaded<span class="w"> </span>X.509<span class="w"> </span>cert<span class="w"> </span><span class="s1">&#39;sforshee: 00b28ddf47aef9cea7&#39;</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.550434<span class="o">]</span><span class="w"> </span>clk:<span class="w"> </span>Not<span class="w"> </span>disabling<span class="w"> </span>unused<span class="w"> </span>clocks
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.579404<span class="o">]</span><span class="w"> </span>ALSA<span class="w"> </span>device<span class="w"> </span>list:
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.579697<span class="o">]</span><span class="w">   </span>No<span class="w"> </span>soundcards<span class="w"> </span>found.
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.589301<span class="o">]</span><span class="w"> </span>platform<span class="w"> </span>regulatory.0:<span class="w"> </span>Direct<span class="w"> </span>firmware<span class="w"> </span>load<span class="w"> </span><span class="k">for</span><span class="w"> </span>regulatory.db<span class="w"> </span>failed<span class="w"> </span>with<span class="w"> </span>error<span class="w"> </span>-2
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.590014<span class="o">]</span><span class="w"> </span>cfg80211:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>load<span class="w"> </span>regulatory.db
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.609105<span class="o">]</span><span class="w"> </span>List<span class="w"> </span>of<span class="w"> </span>all<span class="w"> </span>partitions:
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.610016<span class="o">]</span><span class="w"> </span><span class="m">0100</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram0
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.610034<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.610678<span class="o">]</span><span class="w"> </span><span class="m">0101</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram1
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.610683<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.611911<span class="o">]</span><span class="w"> </span><span class="m">0102</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram2
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.611915<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.612126<span class="o">]</span><span class="w"> </span><span class="m">0103</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram3
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.612129<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.612401<span class="o">]</span><span class="w"> </span><span class="m">0104</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram4
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.612405<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.612617<span class="o">]</span><span class="w"> </span><span class="m">0105</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram5
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.612620<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.613813<span class="o">]</span><span class="w"> </span><span class="m">0106</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram6
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.613817<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.614004<span class="o">]</span><span class="w"> </span><span class="m">0107</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram7
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.614055<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.614430<span class="o">]</span><span class="w"> </span><span class="m">0108</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram8
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.614435<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.614645<span class="o">]</span><span class="w"> </span><span class="m">0109</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram9
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.614649<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.614953<span class="o">]</span><span class="w"> </span>010a<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram10
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.614958<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.615299<span class="o">]</span><span class="w"> </span>010b<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram11
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.615305<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.615627<span class="o">]</span><span class="w"> </span>010c<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram12
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.615631<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.615957<span class="o">]</span><span class="w"> </span>010d<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram13
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.615961<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.616295<span class="o">]</span><span class="w"> </span>010e<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram14
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.616298<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.616614<span class="o">]</span><span class="w"> </span>010f<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram15
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.616618<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.617030<span class="o">]</span><span class="w"> </span>1f00<span class="w">           </span><span class="m">30720</span><span class="w"> </span>mtdblock0
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.617054<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.617373<span class="o">]</span><span class="w"> </span>1f01<span class="w">             </span><span class="m">256</span><span class="w"> </span>mtdblock1
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.617379<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.617653<span class="o">]</span><span class="w"> </span>1f02<span class="w">           </span><span class="m">36864</span><span class="w"> </span>mtdblock2
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.617666<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.618745<span class="o">]</span><span class="w"> </span>b300<span class="w">         </span><span class="m">2573312</span><span class="w"> </span>mmcblk0
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.618774<span class="o">]</span><span class="w">  </span>driver:<span class="w"> </span>mmcblk
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.619190<span class="o">]</span><span class="w">   </span>b301<span class="w">          </span><span class="m">999424</span><span class="w"> </span>mmcblk0p1<span class="w"> </span>e29caf3d-01
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.619204<span class="o">]</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.619532<span class="o">]</span><span class="w">   </span>b302<span class="w">         </span><span class="m">1572864</span><span class="w"> </span>mmcblk0p2<span class="w"> </span>e29caf3d-02
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.619536<span class="o">]</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.619883<span class="o">]</span><span class="w"> </span>No<span class="w"> </span>filesystem<span class="w"> </span>could<span class="w"> </span>mount<span class="w"> </span>root,<span class="w"> </span>tried:
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.619909<span class="o">]</span><span class="w">  </span>ext3
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.620114<span class="o">]</span><span class="w">  </span>ext2
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.620170<span class="o">]</span><span class="w">  </span>ext4
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.620222<span class="o">]</span><span class="w">  </span>cramfs
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.620274<span class="o">]</span><span class="w">  </span>vfat
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.620326<span class="o">]</span><span class="w">  </span>msdos
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.620375<span class="o">]</span><span class="w">  </span>iso9660
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.620427<span class="o">]</span><span class="w">  </span>btrfs
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.620486<span class="o">]</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.620735<span class="o">]</span><span class="w"> </span>Kernel<span class="w"> </span>panic<span class="w"> </span>-<span class="w"> </span>not<span class="w"> </span>syncing:<span class="w"> </span>VFS:<span class="w"> </span>Unable<span class="w"> </span>to<span class="w"> </span>mount<span class="w"> </span>root<span class="w"> </span>fs<span class="w"> </span>on<span class="w"> </span>unknown-block<span class="o">(</span><span class="m">1</span>,0<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.620979<span class="o">]</span><span class="w"> </span>CPU:<span class="w"> </span><span class="m">0</span><span class="w"> </span>PID:<span class="w"> </span><span class="m">1</span><span class="w"> </span>Comm:<span class="w"> </span>swapper/0<span class="w"> </span>Tainted:<span class="w"> </span>G<span class="w">        </span>W<span class="w">         </span><span class="m">5</span>.4.0-xilinx-v2020.2<span class="w"> </span><span class="c1">#1</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.621158<span class="o">]</span><span class="w"> </span>Hardware<span class="w"> </span>name:<span class="w"> </span>ZynqMP<span class="w"> </span>ZCU102<span class="w"> </span>Rev1.0<span class="w"> </span><span class="o">(</span>DT<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.621283<span class="o">]</span><span class="w"> </span>Call<span class="w"> </span>trace:
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.621374<span class="o">]</span><span class="w">  </span>dump_backtrace+0x0/0x140
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.621462<span class="o">]</span><span class="w">  </span>show_stack+0x14/0x20
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.621553<span class="o">]</span><span class="w">  </span>dump_stack+0xac/0xd0
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.621713<span class="o">]</span><span class="w">  </span>panic+0x140/0x30c
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.621884<span class="o">]</span><span class="w">  </span>mount_block_root+0x254/0x284
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.622123<span class="o">]</span><span class="w">  </span>mount_root+0x124/0x158
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.622338<span class="o">]</span><span class="w">  </span>prepare_namespace+0x15c/0x1a4
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.622561<span class="o">]</span><span class="w">  </span>kernel_init_freeable+0x234/0x258
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.622815<span class="o">]</span><span class="w">  </span>kernel_init+0x10/0xfc
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.623047<span class="o">]</span><span class="w">  </span>ret_from_fork+0x10/0x18
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.623774<span class="o">]</span><span class="w"> </span>Kernel<span class="w"> </span>Offset:<span class="w"> </span>disabled
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.624068<span class="o">]</span><span class="w"> </span>CPU<span class="w"> </span>features:<span class="w"> </span>0x0002,24002004
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.624218<span class="o">]</span><span class="w"> </span>Memory<span class="w"> </span>Limit:<span class="w"> </span>none
<span class="o">[</span><span class="w">    </span><span class="m">4</span>.624790<span class="o">]</span><span class="w"> </span>---<span class="o">[</span><span class="w"> </span>end<span class="w"> </span>Kernel<span class="w"> </span>panic<span class="w"> </span>-<span class="w"> </span>not<span class="w"> </span>syncing:<span class="w"> </span>VFS:<span class="w"> </span>Unable<span class="w"> </span>to<span class="w"> </span>mount<span class="w"> </span>root<span class="w"> </span>fs<span class="w"> </span>on<span class="w"> </span>unknown-block<span class="o">(</span><span class="m">1</span>,0<span class="o">)</span><span class="w"> </span><span class="o">]</span>---
</pre></div>
</div>
<p>This is often indicator that the kernel’s not finding the root file system. This might be caused by tools to generate boot scripts (<code class="docutils literal notranslate"><span class="pre">boot.scr</span></code>) automatically. Make sure the boot line of your boot scripts points to your rootfs partition (e.g. <code class="docutils literal notranslate"><span class="pre">/dev/mmcblk0p2</span></code>).</p>
<!-- ////////// --></section>
</section>
<section id="petalinux">
<h2>PetaLinux<a class="headerlink" href="#petalinux" title="Permalink to this heading">¶</a></h2>
<section id="how-do-i-setup-the-ros-2-bsp">
<h3>How do I setup the ROS 2 BSP?<a class="headerlink" href="#how-do-i-setup-the-ros-2-bsp" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://gitlab.com/xilinxrobotics/zcu102/bsp
<span class="nb">source</span><span class="w"> </span>/tools/Xilinx/PetaLinux/2020.2/bin/settings.sh
petalinux-create<span class="w"> </span>-t<span class="w"> </span>project<span class="w"> </span>-s<span class="w"> </span>bsp/xilinx-zcu102-2020.2-ros2-foxy.bsp
<span class="nb">cd</span><span class="w"> </span>xilinx-zcu102-2020.2
mkdir<span class="w"> </span>-p<span class="w"> </span>build/conf
cp<span class="w"> </span>project-spec/configs/plnxtool.conf<span class="w"> </span>build/conf/
cp<span class="w"> </span>project-spec/configs/bblayers.conf<span class="w"> </span>build/conf/

<span class="c1"># IMPORTANT: fix bug manually</span>
<span class="c1"># Edit build/conf/bblayers.conf and remove the last workspace line</span>
<span class="c1">#</span>

petalinux-config<span class="w"> </span>--silentconfig<span class="w">  </span><span class="c1"># generate additional files</span>
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;ROS_DISTRO = &quot;foxy&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>build/conf/bblayers.conf

<span class="c1"># NOTE: you might need to do what&#39;s described in:</span>
<span class="c1">#  How do I deal with the following error: Could not inherit file classes/ros_distro_${ROS_DISTRO}.bbclass</span>

petalinux-build<span class="w">  </span><span class="c1"># takes about 30 mins</span>
</pre></div>
</div>
</section>
<section id="how-do-i-deal-with-the-following-error-could-not-inherit-file-classes-ros-distro-ros-distro-bbclass">
<h3>How do I deal with the following error: Could not inherit file classes/ros_distro_${ROS_DISTRO}.bbclass?<a class="headerlink" href="#how-do-i-deal-with-the-following-error-could-not-inherit-file-classes-ros-distro-ros-distro-bbclass" title="Permalink to this heading">¶</a></h3>
<p>When building the Yocto project with ROS, you may face:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-build<span class="w">  </span><span class="c1"># takes about 30 mins</span>
INFO:<span class="w"> </span>Sourcing<span class="w"> </span>build<span class="w"> </span>tools
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>Building<span class="w"> </span>project
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>Sourcing<span class="w"> </span>build<span class="w"> </span>environment
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span>Generating<span class="w"> </span>workspace<span class="w"> </span>directory
INFO:<span class="w"> </span>bitbake<span class="w"> </span>petalinux-image-minimal
WARNING:<span class="w"> </span>Layer<span class="w"> </span>example<span class="w"> </span>should<span class="w"> </span><span class="nb">set</span><span class="w"> </span>LAYERSERIES_COMPAT_example<span class="w"> </span><span class="k">in</span><span class="w"> </span>its<span class="w"> </span>conf/layer.conf<span class="w"> </span>file<span class="w"> </span>to<span class="w"> </span>list<span class="w"> </span>the<span class="w"> </span>core<span class="w"> </span>layer<span class="w"> </span>names<span class="w"> </span>it<span class="w"> </span>is<span class="w"> </span>compatible<span class="w"> </span>with.
WARNING:<span class="w"> </span>Host<span class="w"> </span>distribution<span class="w"> </span><span class="s2">&quot;ubuntu-20.04&quot;</span><span class="w"> </span>has<span class="w"> </span>not<span class="w"> </span>been<span class="w"> </span>validated<span class="w"> </span>with<span class="w"> </span>this<span class="w"> </span>version<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>build<span class="w"> </span>system<span class="p">;</span><span class="w"> </span>you<span class="w"> </span>may<span class="w"> </span>possibly<span class="w"> </span>experience<span class="w"> </span>unexpected<span class="w"> </span>failures.<span class="w"> </span>It<span class="w"> </span>is<span class="w"> </span>recommended<span class="w"> </span>that<span class="w"> </span>you<span class="w"> </span>use<span class="w"> </span>a<span class="w"> </span>tested<span class="w"> </span>distribution.
ERROR:<span class="w"> </span>ParseError<span class="w"> </span>at<span class="w"> </span>/home/xilinx/xilinx-zcu102-2020.2/project-spec/meta-user/recipes-images/images/petalinux-image-ros2-basic.bb:6:<span class="w"> </span>Could<span class="w"> </span>not<span class="w"> </span>inherit<span class="w"> </span>file<span class="w"> </span>classes/ros_distro_<span class="si">${</span><span class="nv">ROS_DISTRO</span><span class="si">}</span>.bbclass40

Summary:<span class="w"> </span>There<span class="w"> </span>were<span class="w"> </span><span class="m">2</span><span class="w"> </span>WARNING<span class="w"> </span>messages<span class="w"> </span>shown.
Summary:<span class="w"> </span>There<span class="w"> </span>was<span class="w"> </span><span class="m">1</span><span class="w"> </span>ERROR<span class="w"> </span>message<span class="w"> </span>shown,<span class="w"> </span>returning<span class="w"> </span>a<span class="w"> </span>non-zero<span class="w"> </span><span class="nb">exit</span><span class="w"> </span>code.
ERROR:<span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>build<span class="w"> </span>project
</pre></div>
</div>
<p>Add the following to the <code class="docutils literal notranslate"><span class="pre">BBLAYERS</span></code> variable in the <code class="docutils literal notranslate"><span class="pre">build/conf/bblayers.conf</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="si">${</span><span class="nv">SDKBASEMETAPATH</span><span class="si">}</span>/../../project-spec/meta-ros/meta-ros2-foxy<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="si">${</span><span class="nv">SDKBASEMETAPATH</span><span class="si">}</span>/../../project-spec/meta-ros/meta-ros2<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="si">${</span><span class="nv">SDKBASEMETAPATH</span><span class="si">}</span>/../../project-spec/meta-ros/meta-ros-common<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="si">${</span><span class="nv">SDKBASEMETAPATH</span><span class="si">}</span>/../../project-spec/meta-ros/meta-ros-backports-dunfell<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="si">${</span><span class="nv">SDKBASEMETAPATH</span><span class="si">}</span>/../../project-spec/meta-user<span class="w"> </span><span class="se">\</span>
</pre></div>
</div>
</section>
<section id="how-to-update-the-pre-built-directory-in-a-petalinux-yocto-project">
<h3>How to update the pre-built directory in a PetaLinux/Yocto project<a class="headerlink" href="#how-to-update-the-pre-built-directory-in-a-petalinux-yocto-project" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-package<span class="w"> </span>--prebuilt
</pre></div>
</div>
</section>
<section id="how-to-create-a-project-out-of-the-bsp">
<h3>How to create a project out of the BSP<a class="headerlink" href="#how-to-create-a-project-out-of-the-bsp" title="Permalink to this heading">¶</a></h3>
<p>E.g. from <a class="reference external" href="https://gitlab.com/xilinxrobotics/zcu102/bsp">ZCU102 Robotics BSP</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-create<span class="w"> </span>-t<span class="w"> </span>project<span class="w"> </span>-s<span class="w"> </span>&lt;location-to&gt;/xilinx-zcu102-2020.2-ros2-foxy.bsp
</pre></div>
</div>
</section>
<section id="how-to-generate-a-bsp-out-of-a-petalinux-yocto-project">
<h3>How to generate a BSP (out of a PetaLinux/Yocto project):<a class="headerlink" href="#how-to-generate-a-bsp-out-of-a-petalinux-yocto-project" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-package<span class="w"> </span>--bsp<span class="w"> </span>--o<span class="w"> </span>/tmp/xilinx-zcu102-2020.2-ros2-foxy.bsp<span class="w"> </span>-p<span class="w"> </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>
</pre></div>
</div>
</section>
<section id="how-to-launch-a-quick-emulation-from-the-bsp-pre-built-packages">
<h3>How to launch a quick emulation from the BSP pre-built packages:<a class="headerlink" href="#how-to-launch-a-quick-emulation-from-the-bsp-pre-built-packages" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-boot<span class="w"> </span>--qemu<span class="w"> </span>--prebuilt<span class="w"> </span><span class="m">3</span>
</pre></div>
</div>
</section>
<section id="how-to-launch-a-quick-emulation-from-images-linux-folder-just-built-artifacts">
<h3>How to launch a quick emulation from images/linux folder (just built artifacts):<a class="headerlink" href="#how-to-launch-a-quick-emulation-from-images-linux-folder-just-built-artifacts" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-boot<span class="w"> </span>--qemu<span class="w"> </span>--kernel
</pre></div>
</div>
</section>
<section id="how-to-launch-a-quick-emulation-from-a-built-petalinux-yocto-project-using-a-tftp-directory-fetching-things-from-tftp">
<h3>How to launch a quick emulation from a built PetaLinux/Yocto project using a TFTP directory (fetching things from TFTP):<a class="headerlink" href="#how-to-launch-a-quick-emulation-from-a-built-petalinux-yocto-project-using-a-tftp-directory-fetching-things-from-tftp" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-boot<span class="w"> </span>--qemu<span class="w"> </span>--prebuilt<span class="w"> </span><span class="m">2</span><span class="w"> </span>--qemu-args<span class="w"> </span><span class="s2">&quot;-net nic -net nic -net nic -net nic -net user,tftp=images/linux/tftpboot,hostfwd=tcp:127.0.0.1:2222-10.0.2.15:22&quot;</span>
</pre></div>
</div>
</section>
<section id="how-to-add-the-rootfs-resulting-from-a-new-build-to-a-pre-built-img">
<h3>How to add the rootfs resulting from a new build to a pre-built <code class="docutils literal notranslate"><span class="pre">.img</span></code>?<a class="headerlink" href="#how-to-add-the-rootfs-resulting-from-a-new-build-to-a-pre-built-img" title="Permalink to this heading">¶</a></h3>
<p>Partially inspired by [^26]:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># mount p2, which contains the rootfs</span>
sudo<span class="w"> </span>mount<span class="w"> </span>-o<span class="w"> </span>loop,offset<span class="o">=</span><span class="m">1024458752</span><span class="w"> </span>/home/xilinx/ros2_ws/acceleration/firmware/xilinx/sd_card.img<span class="w"> </span>/tmp/sdcard_img_p2
<span class="c1"># extract new rootfs on .cpio format</span>
<span class="nb">cd</span><span class="w"> </span>/tmp/sdcard_img_p2
sudo<span class="w"> </span>cpio<span class="w"> </span>-idv<span class="w"> </span>&lt;<span class="w"> </span>/media/xilinx/hd/xilinx-zcu102-2020.2/images/linux/rootfs.cpio
</pre></div>
</div>
<p>or if the file available is gzipped:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>/home/xilinx/ros2_ws/acceleration/firmware/xilinx/rootfs.cpio.gz<span class="w"> </span><span class="p">|</span><span class="w"> </span>gunzip<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>cpio<span class="w"> </span>-idv
</pre></div>
</div>
</section>
<section id="how-to-find-linux-kernel-latencies">
<h3>How to find Linux Kernel Latencies<a class="headerlink" href="#how-to-find-linux-kernel-latencies" title="Permalink to this heading">¶</a></h3>
<p>Inspired by [^26]:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># run cyclictests for 10 seconds</span>
<span class="c1"># NOTE: you should run benchmarks for a much longer time</span>
cyclictest<span class="w"> </span>--smp<span class="w"> </span>-p95<span class="w"> </span>-m<span class="w"> </span>-D<span class="w"> </span><span class="m">10</span>
</pre></div>
</div>
</section>
<section id="how-to-generate-the-boot-bin-file">
<h3>How to generate the <code class="docutils literal notranslate"><span class="pre">BOOT.BIN</span></code> file?<a class="headerlink" href="#how-to-generate-the-boot-bin-file" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-package<span class="w"> </span>--boot<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--fsbl<span class="w"> </span>images/linux/zynqmp_fsbl.elf<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--u-boot<span class="w"> </span>images/linux/u-boot.elf<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--pmufw<span class="w"> </span>images/linux/pmufw.elf<span class="w"> </span><span class="se">\</span>
<span class="w">   </span>--atf<span class="w"> </span>images/linux/bl31.elf
</pre></div>
</div>
</section>
<section id="how-do-i-compile-a-preempt-rt-patched-environment">
<h3>How do I compile a PREEMPT_RT patched environment?<a class="headerlink" href="#how-do-i-compile-a-preempt-rt-patched-environment" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-build<span class="w"> </span>-c<span class="w"> </span>linux-xlnx<span class="w"> </span>-x<span class="w"> </span>distclean<span class="w">  </span><span class="c1"># clean up kernel build files</span>
petalinux-config<span class="w"> </span>-c<span class="w"> </span>kernel<span class="w">  </span><span class="c1"># get the kernel under components for configuration, do not modify anything</span>
<span class="nb">cd</span><span class="w"> </span>components/yocto/workspace/sources/linux-xlnx/<span class="w">  </span><span class="c1"># head to the kernel source tree</span>
wget<span class="w"> </span>http://cdn.kernel.org/pub/linux/kernel/projects/rt/5.4/older/patch-5.4.10-rt4.patch.gz<span class="w">  </span><span class="c1"># fetch patches</span>
zcat<span class="w"> </span>patch-5.4.10-rt4.patch.gz<span class="w"> </span><span class="p">|</span><span class="w"> </span>patch<span class="w"> </span>-p1<span class="w">  </span><span class="c1"># apply patches</span>

<span class="c1"># manual fixes, unfortunately patches are a hack and not meant for this version. Need to:</span>
<span class="c1">#   Change instances of spin_lock for raw_spin_lock in function rescuer_thread(). See</span>
<span class="c1">#   https://gitlab.com/xilinxrobotics/docs/-/issues/11#note_523328000 for the actual fixes.</span>

<span class="nb">cd</span><span class="w"> </span>../../../../..<span class="w"> </span><span class="c1"># then back to the root of the project and:</span>
petalinux-config<span class="w"> </span>-c<span class="w"> </span>kernel<span class="w">  </span><span class="c1"># configure PREEMPT_RT options, setting to =y the following</span>
<span class="c1"># CONFIG_PREEMPT_RT</span>
<span class="c1"># CONFIG_HIGH_RES_TIMERS</span>
<span class="c1"># CONFIG_NO_HZ_FULL</span>
<span class="c1"># CONFIG_HZ_1000</span>
<span class="c1"># CPU_FREQ_DEFAULT_GOV_PERFORMANCE</span>
petalinux-build
</pre></div>
</div>
<p><em>Done with 2020.2</em></p>
</section>
<section id="how-do-i-set-up-tsn-in-a-yocto-petalinux-project">
<h3>How do I set up TSN in a Yocto/PetaLinux project?<a class="headerlink" href="#how-do-i-set-up-tsn-in-a-yocto-petalinux-project" title="Permalink to this heading">¶</a></h3>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://gitlab.com/xilinxrobotics/meta-tsn</span></code> under project*</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build/conf/local.conf</span></code> as in https://gist.github.com/vmayoral/f93d0070b93d9a7f43756ae9ae9c0bc3</p></li>
<li><p>Edit <code class="docutils literal notranslate"><span class="pre">build/conf/bblayers.conf</span></code> and add</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="si">${</span><span class="nv">SDKBASEMETAPATH</span><span class="si">}</span>/../../project-spec/meta-tsn/meta-xilinx-tsn<span class="w"> </span><span class="se">\</span>
</pre></div>
</div>
<ol class="simple">
<li><p>Also, change the machine name in <code class="docutils literal notranslate"><span class="pre">petalinux-config</span></code> to match the one matching the config of the TSN IP core. Use <code class="docutils literal notranslate"><span class="pre">zcu102-zynqmp</span></code> instead (Yocto Seetings –&gt; <code class="docutils literal notranslate"><span class="pre">YOCTO_MACHINE_NAME</span></code>)</p></li>
<li><p>Pick up the right hardware description file so that the right <code class="docutils literal notranslate"><span class="pre">dtb</span></code> is generated. E.g.:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-config<span class="w"> </span>--get-hw-description<span class="w"> </span>project-spec/meta-tsn/tsn-packages/design/zcu102-zynqmp/
</pre></div>
</div>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">petalinux-build</span></code></p></li>
</ol>
</section>
<section id="how-do-i-set-up-xen-in-petalinux">
<h3>How do I set up Xen in PetaLinux?<a class="headerlink" href="#how-do-i-set-up-xen-in-petalinux" title="Permalink to this heading">¶</a></h3>
<p>To set up Xen hypervisor in PetaLinux, follow the <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/384663561/Building+Xen+Hypervisor+with+Petalinux+2020.1+and+2020.2#BuildingXenHypervisorwithPetalinux2020.1and2020.2-RunXendom0onQEMU">Confluence instructions</a>.</p>
</section>
<section id="how-do-i-set-up-xrt-in-petalinux">
<h3>How do I set up XRT in PetaLinux?<a class="headerlink" href="#how-do-i-set-up-xrt-in-petalinux" title="Permalink to this heading">¶</a></h3>
<p>To set up XRT in PetaLinux, follow <a class="reference external" href="https://xilinx.github.io/XRT/2020.2/html/yocto.html#create-petalinux-project-with-xrt">these instructions</a>.</p>
</section>
<section id="how-do-i-clean-up-a-petalinux-component">
<h3>How do I clean up a PetaLinux component?<a class="headerlink" href="#how-do-i-clean-up-a-petalinux-component" title="Permalink to this heading">¶</a></h3>
<p>There’re different ways to do. See PetaLinux Command Line Reference UG1157 for more details:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-buid<span class="w"> </span>-c<span class="w"> </span>&lt;component&gt;<span class="w"> </span>-x<span class="w"> </span>&lt;verb&gt;
</pre></div>
</div>
<p>wherein <code class="docutils literal notranslate"><span class="pre">&lt;component&gt;</span></code> corresponds with one of the recipes, e.g. <code class="docutils literal notranslate"><span class="pre">u-boot</span></code>.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>verb</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>clean</code></td>
<td>Cleans build data for the target component.</td>
</tr>
<tr>
<td><code>cleansstate</code></td>
<td>This removes the sstate cache of the corresponding component.</td>
</tr>
<tr>
<td><code>distclean</code></td>
<td>This removes the sstate cache of the corresponding component.</td>
</tr>
<tr>
<td><code>cleanall</code></td>
<td>This removes the downloads, sstate cache and cleans the work directory of a component.</td>
</tr>
<tr>
<td><code>mrproper</code></td>
<td>Cleans the build area. This removes the <code>&lt;plnx-proj-root&gt;/build/</code> and <code>&lt;plnx-proj-root&gt;/images/directories</code></td>
</tr>
</tbody>
</table></section>
<section id="how-do-i-build-an-sdk-out-of-a-petalinux-project">
<h3>How do I build an SDK out of a PetaLinux project?<a class="headerlink" href="#how-do-i-build-an-sdk-out-of-a-petalinux-project" title="Permalink to this heading">¶</a></h3>
<p>The following command builds SDK and copies it at <code class="docutils literal notranslate"><span class="pre">&lt;proj_root&gt;/images/linux/sdk.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-build<span class="w"> </span>--sdk
</pre></div>
</div>
<p>The following is the equivalent bitbake command bitbake</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>petalinux-user-image<span class="w"> </span>-c<span class="w"> </span>do_populate_sdk
</pre></div>
</div>
<!-- /////////////// --></section>
</section>
<section id="xen-and-mixed-criticality">
<h2>Xen and mixed-criticality<a class="headerlink" href="#xen-and-mixed-criticality" title="Permalink to this heading">¶</a></h2>
<section id="how-do-i-switch-in-between-consoles-serial-inputs-dom0-dom1-xen">
<h3>How do I switch in between consoles/serial inputs (Dom0, Dom1, Xen)?<a class="headerlink" href="#how-do-i-switch-in-between-consoles-serial-inputs-dom0-dom1-xen" title="Permalink to this heading">¶</a></h3>
<p>Press Ctrl-aaa <strong>twice</strong>.</p>
</section>
<section id="how-do-i-connect-to-a-vm-from-dom0">
<h3>How do I connect to a VM from Dom0?<a class="headerlink" href="#how-do-i-connect-to-a-vm-from-dom0" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xl<span class="w"> </span>console<span class="w"> </span>domU0<span class="w">  </span><span class="c1"># or whatever the domain name is</span>
</pre></div>
</div>
</section>
<section id="why-there-s-no-prompt-in-dom0-after-boot">
<h3>Why there’s no prompt in Dom0 after boot?<a class="headerlink" href="#why-there-s-no-prompt-in-dom0-after-boot" title="Permalink to this heading">¶</a></h3>
<p>The default FS built with PetaLinux may contain a wrong configuration. Make sure that the following is set appropriately in <code class="docutils literal notranslate"><span class="pre">/etc/inittab</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#PS0:12345:respawn:/bin/start_getty 115200 ttyPS0 vt102</span>
<span class="n">X0</span><span class="p">:</span><span class="mi">12345</span><span class="p">:</span><span class="n">respawn</span><span class="p">:</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">getty</span> <span class="mi">115200</span> <span class="n">hvc0</span>
</pre></div>
</div>
</section>
<section id="how-do-i-create-a-dom0less-setup">
<h3>How do I create a Dom0less setup?<a class="headerlink" href="#how-do-i-create-a-dom0less-setup" title="Permalink to this heading">¶</a></h3>
<p>By default, VMs created with the Imagebuilder tool (e.g. <code class="docutils literal notranslate"><span class="pre">uboot-script-gen</span></code>) through configuration scripts are dom0less at the time of writing. For example, in the following piece, Dom1 is Dom0less:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">MEMORY_START</span><span class="o">=</span><span class="s2">&quot;0x0&quot;</span>
<span class="nv">MEMORY_END</span><span class="o">=</span><span class="s2">&quot;0x80000000&quot;</span>

<span class="nv">DEVICE_TREE</span><span class="o">=</span><span class="s2">&quot;system.dtb&quot;</span>
<span class="nv">XEN</span><span class="o">=</span><span class="s2">&quot;xen&quot;</span>
<span class="nv">DOM0_KERNEL</span><span class="o">=</span><span class="s2">&quot;Image&quot;</span>
<span class="nv">DOM0_RAMDISK</span><span class="o">=</span><span class="s2">&quot;initrd.cpio&quot;</span>

<span class="nv">NUM_DOMUS</span><span class="o">=</span><span class="m">1</span>
DOMU_KERNEL<span class="o">[</span><span class="m">0</span><span class="o">]=</span><span class="s2">&quot;Image&quot;</span>
DOMU_RAMDISK<span class="o">[</span><span class="m">0</span><span class="o">]=</span><span class="s2">&quot;initrd.cpio&quot;</span>

<span class="nv">UBOOT_SOURCE</span><span class="o">=</span><span class="s2">&quot;boot.source&quot;</span>
<span class="nv">UBOOT_SCRIPT</span><span class="o">=</span><span class="s2">&quot;boot.scr&quot;</span>
</pre></div>
</div>
</section>
<section id="how-do-i-create-domu-machines-then">
<h3>How do I create DomU machines then?<a class="headerlink" href="#how-do-i-create-domu-machines-then" title="Permalink to this heading">¶</a></h3>
<p>Through the <code class="docutils literal notranslate"><span class="pre">xl</span></code> tooling. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># create config file and launch VM</span>
<span class="nb">cd</span><span class="w"> </span>/etc/xen
cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; example-minimalistic.cfg</span>
<span class="s">name = &quot;guest0&quot;</span>
<span class="s">kernel = &quot;/media/sd-mmcblk0p1/Image&quot;</span>
<span class="s">ramdisk = &quot;/media/sd-mmcblk0p1/initrd.cpio&quot;</span>
<span class="s">memory = 256</span>
<span class="s">EOF</span>
xl<span class="w"> </span>create<span class="w"> </span>-c<span class="w"> </span>example-minimalistic.cfg
</pre></div>
</div>
<p>You can exit Xen pressing <code class="docutils literal notranslate"><span class="pre">Ctrl-]</span></code> and then check that the VM is running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@xilinx-zcu102-2020_2-ros2-foxy:/etc/xen#<span class="w"> </span>xl<span class="w"> </span>list
Name<span class="w">                                        </span>ID<span class="w">   </span>Mem<span class="w"> </span>VCPUs<span class="w">	</span>State<span class="w">	</span>Time<span class="o">(</span>s<span class="o">)</span>
Domain-0<span class="w">                                     </span><span class="m">0</span><span class="w">  </span><span class="m">1024</span><span class="w">     </span><span class="m">1</span><span class="w">     </span>r-----<span class="w">     </span><span class="m">206</span>.3
guest0<span class="w">                                       </span><span class="m">2</span><span class="w">   </span><span class="m">255</span><span class="w">     </span><span class="m">1</span><span class="w">     </span>r-----<span class="w">       </span><span class="m">9</span>.0
</pre></div>
</div>
</section>
<section id="what-are-vms-with-no-name">
<h3>What are VMs with no name?<a class="headerlink" href="#what-are-vms-with-no-name" title="Permalink to this heading">¶</a></h3>
<p>When VMs are dom0less, they will get presented as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@xilinx-zcu102-2020_2-ros2-foxy:/#<span class="w"> </span>xl<span class="w"> </span>list
Name<span class="w">                                        </span>ID<span class="w">   </span>Mem<span class="w"> </span>VCPUs<span class="w">	</span>State<span class="w">	</span>Time<span class="o">(</span>s<span class="o">)</span>
<span class="o">(</span>null<span class="o">)</span><span class="w">                                       </span><span class="m">0</span><span class="w">  </span><span class="m">1024</span><span class="w">     </span><span class="m">1</span><span class="w">     </span>r-----<span class="w">     </span><span class="m">722</span>.6
<span class="o">(</span>null<span class="o">)</span><span class="w">                                       </span><span class="m">1</span><span class="w">   </span><span class="m">512</span><span class="w">     </span><span class="m">1</span><span class="w">     </span>r-----<span class="w">     </span><span class="m">722</span>.6
</pre></div>
</div>
<p>One way to attempt to access these VMs is by switching between serials/consoles as described above.</p>
</section>
<section id="how-do-i-exit-from-a-domu-without-stopping-it-and-get-back-to-dom0">
<h3>How do I exit from a DomU without stopping it and get back to Dom0?<a class="headerlink" href="#how-do-i-exit-from-a-domu-without-stopping-it-and-get-back-to-dom0" title="Permalink to this heading">¶</a></h3>
<p>Press <code class="docutils literal notranslate"><span class="pre">Ctrl-]</span></code>. That’ll exit from the DomU console.</p>
</section>
<section id="domu-vms-are-not-initiating-with-an-error-like-the-following">
<h3>DomU VMs are not initiating with an error like the following<a class="headerlink" href="#domu-vms-are-not-initiating-with-an-error-like-the-following" title="Permalink to this heading">¶</a></h3>
<p>It’s been observe that PetaLinux creates file systems that miss some Xen-related folders. This leads to issues initiating DomUs:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xl create -c example-minimalistic.c
Parsing config from example-minimalistic.cfg
libxl: error: libxl_domain.c:1405:libxl__get_domid: failed to get own domid (domid)
libxl: error: libxl_dm.c:3415:libxl__need_xenpv_qemu: unable to get domain id
libxl: error: libxl_domain.c:1405:libxl__get_domid: failed to get own domid (domid)
libxl: error: libxl_internal.c:421:libxl__lock_domain_userdata: Domain 2:cannot open lockfile /var/lib/xen/userdata-l.2.f10ed589-4870-40d0-a4cc-758e10e8c9e3.domain-userdata-lock, errno=2: No such file or directory
libxl: error: libxl_domain.c:1131:domain_destroy_callback: Domain 2:Unable to destroy guest
libxl: error: libxl_create.c:1826:domcreate_destruction_cb: Domain 2:unable to destroy domain following failed creation
libxl: error: libxl_xshelp.c:201:libxl__xs_read_mandatory: xenstore read failed: `/libxl/2/type&#39;: No such file or directory
libxl: warning: libxl_dom.c:52:libxl__domain_type: unable to get domain type for domid=2, assuming HVM
libxl: error: libxl_internal.c:421:libxl__lock_domain_userdata: Domain 2:cannot open lockfile /var/lib/xen/userdata-l.2.f10ed589-4870-40d0-a4cc-758e10e8c9e3.domain-userdata-lock, errno=2: No such file or directory
libxl: error: libxl_domain.c:1131:domain_destroy_callback: Domain 2:Unable to destroy guest
libxl: error: libxl_domain.c:1058:domain_destroy_cb: Domain 2:Destruction of domain failed
</pre></div>
</div>
<p>The reason why this is happening is because Xen is missing some folders which block from it to behave normally. This is illustrated also by the following error present in the boot log:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>libxl:<span class="w"> </span>error:<span class="w"> </span>libxl_internal.c:421:libxl__lock_domain_userdata:<span class="w"> </span>Domain<span class="w"> </span><span class="m">0</span>:cannot<span class="w"> </span>open<span class="w"> </span>lockfile<span class="w"> </span>/var/lib/xen/userdata-l.0.00000000-0000-0000-0000-000000000000.domain-userdata-lock,<span class="w"> </span><span class="nv">errno</span><span class="o">=</span><span class="m">2</span>:<span class="w"> </span>No<span class="w"> </span>such<span class="w"> </span>file<span class="w"> </span>or<span class="w"> </span>directory
</pre></div>
</div>
<p>The solution is to manually create the missing folder and reboot:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>/var/lib/xen
reboot
</pre></div>
</div>
</section>
<section id="how-do-i-deal-with-kernel-errors-while-building-xen-with-petalinux">
<h3>How do I deal with kernel errors while building Xen with PetaLinux?<a class="headerlink" href="#how-do-i-deal-with-kernel-errors-while-building-xen-with-petalinux" title="Permalink to this heading">¶</a></h3>
<p>When facing the following error:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>NOTE: Setscene tasks completed
ERROR: petalinux-image-minimal-1.0-r0 do_rootfs: Could not invoke dnf. Command &#39;/home/xilinx/xilinx-zcu102-2020.2/build/tmp/work/zcu102_zynqmp-xilinx-linux/petalinux-image-minimal/1.0-r0/recipe-sysroot-native/usr/bin/dnf -v --rpmverbosity=info -y -c /home/xilinx/xilinx-zcu102-2020.2/build/tmp/work/zcu102_zynqmp-xilinx-linux/petalinux-image-minimal/1.0-r0/rootfs/etc/dnf/dnf.conf --setopt=reposdir=/home/xilinx/xilinx-zcu102-2020.2/build/tmp/work/zcu102_zynqmp-xilinx-linux/petalinux-image-minimal/1.0-r0/rootfs/etc/yum.repos.d --installroot=/home/xilinx/xilinx-zcu102-2020.2/build/tmp/work/zcu102_zynqmp-xilinx-linux/petalinux-image-minimal/1.0-r0/rootfs --setopt=logdir=/home/xilinx/xilinx-zcu102-2020.2/build/tmp/work/zcu102_zynqmp-xilinx-linux/petalinux-image-minimal/1.0-r0/temp --repofrompath=oe-repo,/home/xilinx/xilinx-zcu102-2020.2/build/tmp/work/zcu102_zynqmp-xilinx-linux/petalinux-image-minimal/1.0-r0/oe-rootfs-repo --nogpgcheck install base-passwd bridge-utils byobu can-utils cyclonedds demo-nodes-cpp demo-nodes-cpp-rosnative demo-nodes-py ethtool examples-rclcpp-minimal-action-client examples-rclcpp-minimal-action-server examples-rclcpp-minimal-client examples-rclcpp-minimal-composition examples-rclcpp-minimal-publisher examples-rclcpp-minimal-service examples-rclcpp-minimal-subscriber examples-rclcpp-minimal-timer examples-rclcpp-multithreaded-executor examples-rclpy-executors examples-rclpy-minimal-action-client examples-rclpy-minimal-action-server examples-rclpy-minimal-client examples-rclpy-minimal-publisher examples-rclpy-minimal-service examples-rclpy-minimal-subscriber fpga-manager-script gdb libc6-utils haveged hellopm kernel-modules localedef mtd-utils opencl-clhpp opencl-clhpp-dev opencl-headers opencl-headers-dev openssh openssh-scp openssh-sftp-server openssh-ssh openssh-sshd packagegroup-core-boot packagegroup-core-ssh-openssh packagegroup-petalinux-xen packagegroup-petalinux-xrt pciutils python3-argcomplete rmw-cyclonedds-cpp ros-base rpm rt-tests run-postinsts shadow stress tcf-agent tmux udev-extraconf watchdog-init xrt xrt-dev zocl&#39; returned 1:
DNF version: 4.2.2
cachedir: /home/xilinx/xilinx-zcu102-2020.2/build/tmp/work/zcu102_zynqmp-xilinx-linux/petalinux-image-minimal/1.0-r0/rootfs/var/cache/dnf
Added oe-repo repo from /home/xilinx/xilinx-zcu102-2020.2/build/tmp/work/zcu102_zynqmp-xilinx-linux/petalinux-image-minimal/1.0-r0/oe-rootfs-repo
repo: using cache for: oe-repo
not found other for:
not found modules for:
not found deltainfo for:
not found updateinfo for:
oe-repo: using metadata from Wed 26 May 2021 03:15:15 PM UTC.
Last metadata expiration check: 0:00:01 ago on Wed 26 May 2021 03:15:15 PM UTC.
No module defaults found
--&gt; Starting dependency resolution
--&gt; Finished dependency resolution
Error:
 Problem: conflicting requests
  - nothing provides kernel-module-xen-blkback needed by packagegroup-petalinux-xen-1.0-r0.noarch
  - nothing provides kernel-module-xen-gntalloc needed by packagegroup-petalinux-xen-1.0-r0.noarch
  - nothing provides kernel-module-xen-gntdev needed by packagegroup-petalinux-xen-1.0-r0.noarch
  - nothing provides kernel-module-xen-netback needed by packagegroup-petalinux-xen-1.0-r0.noarch
  - nothing provides kernel-module-xen-wdt needed by packagegroup-petalinux-xen-1.0-r0.noarch
(try to add &#39;--skip-broken&#39; to skip uninstallable packages or &#39;--nobest&#39; to use not only best candidate packages)

ERROR: Logfile of failure stored in: /home/xilinx/xilinx-zcu102-2020.2/build/tmp/work/zcu102_zynqmp-xilinx-linux/petalinux-image-minimal/1.0-r0/temp/log.do_rootfs.1714208
ERROR: Task (/home/xilinx/xilinx-zcu102-2020.2/components/yocto/layers/meta-petalinux/recipes-core/images/petalinux-image-minimal.bb:do_rootfs) failed with exit code &#39;1&#39;
NOTE: Tasks Summary: Attempted 9800 tasks of which 9498 didn&#39;t need to be rerun and 1 failed.
</pre></div>
</div>
</section>
<section id="domus-stored-in-sd-partitions-create-a-kernel-panic-when-launching">
<h3>DomUs stored in SD partitions create a kernel panic when Launching<a class="headerlink" href="#domus-stored-in-sd-partitions-create-a-kernel-panic-when-launching" title="Permalink to this heading">¶</a></h3>
<p>If you’re running Vitis <code class="docutils literal notranslate"><span class="pre">2020.2</span></code> or earlier and observe something like when creating DomUs:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>...
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.257786<span class="o">]</span><span class="w"> </span>cfg80211:<span class="w"> </span>Loaded<span class="w"> </span>X.509<span class="w"> </span>cert<span class="w"> </span><span class="s1">&#39;sforshee: 00b28ddf47aef9cea7&#39;</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.258491<span class="o">]</span><span class="w"> </span>ALSA<span class="w"> </span>device<span class="w"> </span>list:
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.258603<span class="o">]</span><span class="w">   </span>No<span class="w"> </span>soundcards<span class="w"> </span>found.
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.264081<span class="o">]</span><span class="w"> </span>platform<span class="w"> </span>regulatory.0:<span class="w"> </span>Direct<span class="w"> </span>firmware<span class="w"> </span>load<span class="w"> </span><span class="k">for</span><span class="w"> </span>regulatory.db<span class="w"> </span>failed<span class="w"> </span>with<span class="w"> </span>error<span class="w"> </span>-2
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.264785<span class="o">]</span><span class="w"> </span>cfg80211:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>load<span class="w"> </span>regulatory.db
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.318562<span class="o">]</span><span class="w"> </span>random:<span class="w"> </span>fast<span class="w"> </span>init<span class="w"> </span><span class="k">done</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.389439<span class="o">]</span><span class="w"> </span>List<span class="w"> </span>of<span class="w"> </span>all<span class="w"> </span>partitions:
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.389763<span class="o">]</span><span class="w"> </span><span class="m">0100</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram0
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.389800<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.389941<span class="o">]</span><span class="w"> </span><span class="m">0101</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram1
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.389949<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.390181<span class="o">]</span><span class="w"> </span><span class="m">0102</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram2
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.390185<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.390318<span class="o">]</span><span class="w"> </span><span class="m">0103</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram3
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.390324<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.390420<span class="o">]</span><span class="w"> </span><span class="m">0104</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram4
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.390424<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.390510<span class="o">]</span><span class="w"> </span><span class="m">0105</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram5
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.390514<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.390926<span class="o">]</span><span class="w"> </span><span class="m">0106</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram6
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.390931<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391029<span class="o">]</span><span class="w"> </span><span class="m">0107</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram7
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391032<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391112<span class="o">]</span><span class="w"> </span><span class="m">0108</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram8
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391115<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391301<span class="o">]</span><span class="w"> </span><span class="m">0109</span><span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram9
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391305<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391395<span class="o">]</span><span class="w"> </span>010a<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram10
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391398<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391484<span class="o">]</span><span class="w"> </span>010b<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram11
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391487<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391573<span class="o">]</span><span class="w"> </span>010c<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram12
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391578<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391680<span class="o">]</span><span class="w"> </span>010d<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram13
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391696<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391924<span class="o">]</span><span class="w"> </span>010e<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram14
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.391929<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.392739<span class="o">]</span><span class="w"> </span>010f<span class="w">           </span><span class="m">65536</span><span class="w"> </span>ram15
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.392744<span class="o">]</span><span class="w">  </span><span class="o">(</span>driver?<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.392916<span class="o">]</span><span class="w"> </span>ca00<span class="w">         </span><span class="m">1656832</span><span class="w"> </span>xvda
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.392945<span class="o">]</span><span class="w">  </span>driver:<span class="w"> </span>vbd
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.393071<span class="o">]</span><span class="w"> </span>No<span class="w"> </span>filesystem<span class="w"> </span>could<span class="w"> </span>mount<span class="w"> </span>root,<span class="w"> </span>tried:
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.393173<span class="o">]</span><span class="w">  </span>ext3
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.393266<span class="o">]</span><span class="w">  </span>ext2
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.393337<span class="o">]</span><span class="w">  </span>ext4
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.393378<span class="o">]</span><span class="w">  </span>cramfs
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.393412<span class="o">]</span><span class="w">  </span>vfat
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.393447<span class="o">]</span><span class="w">  </span>msdos
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.393489<span class="o">]</span><span class="w">  </span>iso9660
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.393628<span class="o">]</span><span class="w">  </span>btrfs
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.393681<span class="o">]</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.394073<span class="o">]</span><span class="w"> </span>Kernel<span class="w"> </span>panic<span class="w"> </span>-<span class="w"> </span>not<span class="w"> </span>syncing:<span class="w"> </span>VFS:<span class="w"> </span>Unable<span class="w"> </span>to<span class="w"> </span>mount<span class="w"> </span>root<span class="w"> </span>fs<span class="w"> </span>on<span class="w"> </span>unknown-block<span class="o">(</span><span class="m">202</span>,0<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.395086<span class="o">]</span><span class="w"> </span>CPU:<span class="w"> </span><span class="m">0</span><span class="w"> </span>PID:<span class="w"> </span><span class="m">1</span><span class="w"> </span>Comm:<span class="w"> </span>swapper/0<span class="w"> </span>Not<span class="w"> </span>tainted<span class="w"> </span><span class="m">5</span>.4.0-xilinx-v2020.2<span class="w"> </span><span class="c1">#1</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.395268<span class="o">]</span><span class="w"> </span>Hardware<span class="w"> </span>name:<span class="w"> </span>XENVM-4.13<span class="w"> </span><span class="o">(</span>DT<span class="o">)</span>
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.395587<span class="o">]</span><span class="w"> </span>Call<span class="w"> </span>trace:
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.395667<span class="o">]</span><span class="w">  </span>dump_backtrace+0x0/0x140
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.395859<span class="o">]</span><span class="w">  </span>show_stack+0x14/0x20
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.396728<span class="o">]</span><span class="w">  </span>dump_stack+0xac/0xd0
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.396825<span class="o">]</span><span class="w">  </span>panic+0x140/0x30c
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.396912<span class="o">]</span><span class="w">  </span>mount_block_root+0x254/0x284
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.396985<span class="o">]</span><span class="w">  </span>mount_root+0x124/0x158
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.397061<span class="o">]</span><span class="w">  </span>prepare_namespace+0x15c/0x1a4
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.397222<span class="o">]</span><span class="w">  </span>kernel_init_freeable+0x234/0x258
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.397396<span class="o">]</span><span class="w">  </span>kernel_init+0x10/0xfc
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.397532<span class="o">]</span><span class="w">  </span>ret_from_fork+0x10/0x18
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.398088<span class="o">]</span><span class="w"> </span>Kernel<span class="w"> </span>Offset:<span class="w"> </span>disabled
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.398414<span class="o">]</span><span class="w"> </span>CPU<span class="w"> </span>features:<span class="w"> </span>0x0002,24002004
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.398541<span class="o">]</span><span class="w"> </span>Memory<span class="w"> </span>Limit:<span class="w"> </span>none
<span class="o">[</span><span class="w">    </span><span class="m">3</span>.399028<span class="o">]</span><span class="w"> </span>---<span class="o">[</span><span class="w"> </span>end<span class="w"> </span>Kernel<span class="w"> </span>panic<span class="w"> </span>-<span class="w"> </span>not<span class="w"> </span>syncing:<span class="w"> </span>VFS:<span class="w"> </span>Unable<span class="w"> </span>to<span class="w"> </span>mount<span class="w"> </span>root<span class="w"> </span>fs<span class="w"> </span>on<span class="w"> </span>unknown-block<span class="o">(</span><span class="m">202</span>,0<span class="o">)</span><span class="w"> </span><span class="o">]</span>---
</pre></div>
</div>
<p>Chances are that your Xen tree doesn’t include https://github.com/Xilinx/xen/commit/ab9054b8e902b0fa80af02ad1e0a8c4d383e90e1 which fixes a bug with PV drivers that causes that error. Make sure you rebuild Xen including that commit.</p>
</section>
</section>
<section id="krs">
<h2>KRS<a class="headerlink" href="#krs" title="Permalink to this heading">¶</a></h2>
<section id="how-do-i-ssh-into-an-emulation-through-krs-tools-e-g-colcon-acceleration-emulation">
<h3>How do I ssh into an emulation through KRS tools (e.g. <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">acceleration</span> <span class="pre">emulation</span></code>)?<a class="headerlink" href="#how-do-i-ssh-into-an-emulation-through-krs-tools-e-g-colcon-acceleration-emulation" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">acceleration</span></code> extensions enable emulations which forward ports between the guest/host machines. Particularly, the following flags are passed to QEMU: <code class="docutils literal notranslate"><span class="pre">hostfwd=tcp:127.0.0.1:2222-10.0.2.15:22</span></code> (among others). To ssh into the emulation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh<span class="w"> </span>-o<span class="w"> </span><span class="nv">UserKnownHostsFile</span><span class="o">=</span>/dev/null<span class="w"> </span>-o<span class="w"> </span><span class="nv">StrictHostKeyChecking</span><span class="o">=</span>no<span class="w"> </span>-p<span class="w"> </span><span class="m">2222</span><span class="w"> </span>root@localhost
</pre></div>
</div>
</section>
<section id="how-do-i-scp-files-from-into-an-emulation-launched-through-krs-tools-e-g-colcon-acceleration-emulation">
<h3>How do I scp files from/into an emulation launched through KRS tools (e.g. <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">acceleration</span> <span class="pre">emulation</span></code>)?<a class="headerlink" href="#how-do-i-scp-files-from-into-an-emulation-launched-through-krs-tools-e-g-colcon-acceleration-emulation" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">acceleration</span></code> extensions enable emulations which forward ports between the guest/host machines. Particularly, the following flags are passed to QEMU: <code class="docutils literal notranslate"><span class="pre">hostfwd=tcp:127.0.0.1:2222-10.0.2.15:22</span></code> (among others). E.g., to copy files from the emulation into the host machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>scp<span class="w"> </span>-o<span class="w"> </span><span class="nv">UserKnownHostsFile</span><span class="o">=</span>/dev/null<span class="w"> </span>-o<span class="w"> </span><span class="nv">StrictHostKeyChecking</span><span class="o">=</span>no<span class="w"> </span>-P<span class="w"> </span><span class="m">2222</span><span class="w"> </span>root@localhost:/ros2_ws/lib/accelerated_vadd_publisher_once/*.csv<span class="w"> </span>.
</pre></div>
</div>
</section>
<section id="how-do-i-rebuild-ros-2-packages-without-the-acceleration-kernels">
<h3>How do I rebuild ROS 2 packages without the acceleration kernels?<a class="headerlink" href="#how-do-i-rebuild-ros-2-packages-without-the-acceleration-kernels" title="Permalink to this heading">¶</a></h3>
<p>Just add <code class="docutils literal notranslate"><span class="pre">--cmake-args</span> <span class="pre">-DNOKERNELS=true</span></code> to the build command. E.g.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon<span class="w"> </span>build<span class="w"> </span>--merge-install<span class="w"> </span>--mixin<span class="w"> </span>zcu102<span class="w"> </span>--install-base<span class="w"> </span>install-zcu102<span class="w"> </span>--build-base<span class="w"> </span>build-zcu102<span class="w"> </span>--cmake-args<span class="w"> </span>-DNOKERNELS<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>!!! note
This flag persists so if you wish to change it afterwards and re-build kernels, you’ll need to set it to false <code class="docutils literal notranslate"><span class="pre">--cmake-args</span> <span class="pre">-DNOKERNELS=false</span></code>.</p>
</section>
<section id="how-do-i-port-krs-to-a-new-board">
<h3>How do I port KRS to a new board?<a class="headerlink" href="#how-do-i-port-krs-to-a-new-board" title="Permalink to this heading">¶</a></h3>
<ol class="simple">
<li><p>Build firmware artifacts in <code class="docutils literal notranslate"><span class="pre">acceleration_firmware_*</span></code></p></li>
</ol>
<ul class="simple">
<li><p>If your board is based on a Xilinx adaptive SoC (e.g. Versal, Zynq Ultrascale+, Zynq 7000), we recommend you to clone <a class="reference external" href="#">acceleration_firmware_xilinx</a> and create a new branch for your board replacing all artifacts as defined in the ARTIFACTS.md file. Afterwards, submit a pull request.</p></li>
<li><p>A minimal rootfs should be created including:</p>
<ul>
<li><p>ROS 2 Foxy (at least bare bones)</p></li>
<li><p>Xen hypervisor capabilities</p></li>
<li><p><a class="reference external" href="https://github.com/Xilinx/XRT">Xilinx Runtime</a> (XRT)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vanilla</span></code> and <code class="docutils literal notranslate"><span class="pre">PREEMPT_RT</span></code> patched kernels including:</p>
<ul>
<li><p>LTTng kernel support</p></li>
</ul>
</li>
<li><p>U-boot with PXE support</p></li>
</ul>
</li>
<li><p>Create a sysroot (or an SDK that produces such sysroot) for the target rootfs. NOTE that this sysroot might differ across different file systems (e.g. Ubuntu-based vs Yocto-based).</p></li>
</ul>
<ol class="simple">
<li><p>Add custom mixins in <code class="docutils literal notranslate"><span class="pre">acceleration_firmware_*</span></code> for the new board. See <code class="docutils literal notranslate"><span class="pre">xilinx.mixin.template</span></code> for an example.</p></li>
<li></li>
</ol>
</section>
<section id="how-do-i-build-several-accelerators-when-invoking-colcon-build">
<h3>How do I build several accelerators when invoking <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">build</span></code>?<a class="headerlink" href="#how-do-i-build-several-accelerators-when-invoking-colcon-build" title="Permalink to this heading">¶</a></h3>
<p>The current implementation of KRS leverages Vitis Unified platform and compiler which expects to build one accelerator at a time. If two are being built simultaneously, undefined behaviour is triggered and typically, only one of the accelerators will finalize while the other one won’t (and thereby no <code class="docutils literal notranslate"><span class="pre">xclbin</span></code> file will be generated as a result).</p>
<p>The solution to this is to serialize the generation of acceleration kernels using colcon arguments as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon<span class="w"> </span>build<span class="w"> </span>--executor<span class="w"> </span>sequential<span class="w"> </span>--merge-install<span class="w"> </span>--mixin<span class="w"> </span>kv260<span class="w"> </span>--install-base<span class="w"> </span>install-kv260<span class="w"> </span>--build-base<span class="w"> </span>build-kv260
</pre></div>
</div>
<p>For more, review <a class="reference external" href="https://gitlab.com/xilinxrobotics/docs/-/issues/22#note_574594754">this ticket</a>.</p>
</section>
<section id="how-do-i-handle-device-mapper-issues">
<h3>How do I handle device-mapper issues?<a class="headerlink" href="#how-do-i-handle-device-mapper-issues" title="Permalink to this heading">¶</a></h3>
<p>KRS relies on imagebuilder which employs <code class="docutils literal notranslate"><span class="pre">/dev/mapper</span></code>. This Linux interface is a bit sensitive and if not disabled properly in past runs will lead into:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon acceleration linux --install-dir install-kv260
SECURITY WARNING: This class invokes explicitly a shell via the shell=True argument of the Python subprocess library, and uses admin privileges to manage raw disk images. It is the user&#39;s responsibility to ensure that all whitespace and metacharacters passed are quoted appropriately to avoid shell injection vulnerabilities.
- Creating a new base image using /home/xilinx/ros2_ws/acceleration/firmware/xilinx/rootfs.cpio.gz ...
- Detected previous sd_card.img raw image, moving to sd_card.img.old.
device-mapper: create ioctl on diskimage  failed: Device or resource busy
Command failed.
...
</pre></div>
</div>
<p>To fix this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>kpartx<span class="w"> </span>-d<span class="w"> </span>/dev/mapper/diskimage
sudo<span class="w">  </span>dmsetup<span class="w"> </span>remove<span class="w"> </span>diskimage
sudo<span class="w"> </span>losetup<span class="w"> </span>-d<span class="w"> </span><span class="k">$(($(</span>sudo<span class="w"> </span>losetup<span class="w"> </span>-f<span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39;s*/dev/loop**&#39;</span><span class="k">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="k">))</span>
</pre></div>
</div>
<!-- where `$_loop_dev` is the loop device used (which you can figure out by substracting one to `sudo losetup -f`). --><p><strong>A simpler approach was implemented in KRS with <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">acceleration</span> <span class="pre">umount</span> <span class="pre">--fix</span></code></strong> which does exactly the same.</p>
</section>
<section id="how-do-i-handle-board-part-definition-was-not-found-type-of-issues">
<h3>How do I handle “board_part definition was not found” type of issues?<a class="headerlink" href="#how-do-i-handle-board-part-definition-was-not-found-type-of-issues" title="Permalink to this heading">¶</a></h3>
<p>Consider the following error while building an acceleration kernel:</p>
<p>!!! note
This issue was first documented at https://forums.xilinx.com/t5/Kria-SOMs/Vitis-IDE-ERROR-v-60-602-Source-file-does-not-exist/m-p/1264669/highlight/true</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>INFO:<span class="w"> </span><span class="o">[</span>VPL<span class="w"> </span><span class="m">60</span>-839<span class="o">]</span><span class="w"> </span>Read<span class="w"> </span><span class="k">in</span><span class="w"> </span>kernel<span class="w"> </span>information<span class="w"> </span>from<span class="w"> </span>file<span class="w"> </span><span class="s1">&#39;/home/xilinx/ros2_ws/build-kv260/accelerated_vadd_publisher/_x/link/int/kernel_info.dat&#39;</span>.
INFO:<span class="w"> </span><span class="o">[</span>VPL<span class="w"> </span><span class="m">60</span>-423<span class="o">]</span><span class="w">   </span>Target<span class="w"> </span>device:<span class="w"> </span>kv260_ispMipiRx_vcu_DP
INFO:<span class="w"> </span><span class="o">[</span>VPL<span class="w"> </span><span class="m">60</span>-1032<span class="o">]</span><span class="w"> </span>Extracting<span class="w"> </span>hardware<span class="w"> </span>platform<span class="w"> </span>to<span class="w"> </span>/home/xilinx/ros2_ws/build-kv260/accelerated_vadd_publisher/_x/link/vivado/vpl/.local/hw_platform
WARNING:<span class="w"> </span>/tools/Xilinx/Vitis/2020.2/tps/lnx64/jre9.0.4<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist.
<span class="o">[</span><span class="m">19</span>:52:08<span class="o">]</span><span class="w"> </span>Run<span class="w"> </span>vpl:<span class="w"> </span>Step<span class="w"> </span>create_project:<span class="w"> </span>Started
Creating<span class="w"> </span>Vivado<span class="w"> </span>project.
<span class="o">[</span><span class="m">19</span>:52:10<span class="o">]</span><span class="w"> </span>Run<span class="w"> </span>vpl:<span class="w"> </span>Step<span class="w"> </span>create_project:<span class="w"> </span>Failed
<span class="o">[</span><span class="m">19</span>:52:11<span class="o">]</span><span class="w"> </span>Run<span class="w"> </span>vpl:<span class="w"> </span>FINISHED.<span class="w"> </span>Run<span class="w"> </span>Status:<span class="w"> </span>create_project<span class="w"> </span>ERROR
ERROR:<span class="w"> </span><span class="o">[</span>VPL<span class="w"> </span><span class="m">60</span>-773<span class="o">]</span><span class="w"> </span>In<span class="w"> </span><span class="s1">&#39;/home/xilinx/ros2_ws/build-kv260/accelerated_vadd_publisher/_x/link/vivado/vpl/runme.log&#39;</span>,<span class="w"> </span>caught<span class="w"> </span>Tcl<span class="w"> </span>error:<span class="w">  </span>ERROR:<span class="w"> </span><span class="o">[</span>Board<span class="w"> </span><span class="m">49</span>-71<span class="o">]</span><span class="w"> </span>The<span class="w"> </span>board_part<span class="w"> </span>definition<span class="w"> </span>was<span class="w"> </span>not<span class="w"> </span>found<span class="w"> </span><span class="k">for</span><span class="w"> </span>xilinx.com:kv260:part0:1.1.<span class="w"> </span>The<span class="w"> </span>project<span class="s1">&#39;s board_part property was not set, but the project&#39;</span>s<span class="w"> </span>part<span class="w"> </span>property<span class="w"> </span>was<span class="w"> </span><span class="nb">set</span><span class="w"> </span>to<span class="w"> </span>xck26-sfvc784-2LV-c.<span class="w"> </span>Valid<span class="w"> </span>board_part<span class="w"> </span>values<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>retrieved<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span><span class="s1">&#39;get_board_parts&#39;</span><span class="w"> </span>Tcl<span class="w"> </span>command.<span class="w"> </span>Check<span class="w"> </span><span class="k">if</span><span class="w"> </span>board.repoPaths<span class="w"> </span>parameter<span class="w"> </span>is<span class="w"> </span><span class="nb">set</span><span class="w"> </span>and<span class="w"> </span>the<span class="w"> </span>board_part<span class="w"> </span>is<span class="w"> </span>installed<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>tcl<span class="w"> </span>app<span class="w"> </span>store.
ERROR:<span class="w"> </span><span class="o">[</span>VPL<span class="w"> </span><span class="m">60</span>-704<span class="o">]</span><span class="w"> </span>Integration<span class="w"> </span>error,<span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>rebuild<span class="w"> </span>a<span class="w"> </span>project<span class="w"> </span>required<span class="w"> </span><span class="k">for</span><span class="w"> </span>hardware<span class="w"> </span>synthesis.<span class="w"> </span>The<span class="w"> </span>project<span class="w"> </span>is<span class="w"> </span><span class="s1">&#39;prj&#39;</span>.<span class="w"> </span>The<span class="w"> </span>rebuild<span class="w"> </span>script<span class="w"> </span>is<span class="w"> </span><span class="s1">&#39;.local/hw_platform/prj/rebuild.tcl&#39;</span>.<span class="w"> </span>The<span class="w"> </span>rebuild<span class="w"> </span>script<span class="w"> </span>was<span class="w"> </span>delivered<span class="w"> </span>as<span class="w"> </span>part<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>hardware<span class="w"> </span>platform.<span class="w"> </span>Consult<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>hardware<span class="w"> </span>platform<span class="w"> </span>provider<span class="w"> </span>to<span class="w"> </span>investigate<span class="w"> </span>the<span class="w"> </span>rebuild<span class="w"> </span>script<span class="w"> </span>contents.<span class="w"> </span>An<span class="w"> </span>error<span class="w"> </span>stack<span class="w"> </span>with<span class="w"> </span><span class="k">function</span><span class="w"> </span>names<span class="w"> </span>and<span class="w"> </span>arguments<span class="w"> </span>may<span class="w"> </span>be<span class="w"> </span>available<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span><span class="s1">&#39;vivado.log&#39;</span>.
ERROR:<span class="w"> </span><span class="o">[</span>VPL<span class="w"> </span><span class="m">60</span>-1328<span class="o">]</span><span class="w"> </span>Vpl<span class="w"> </span>run<span class="w"> </span><span class="s1">&#39;vpl&#39;</span><span class="w"> </span>failed
WARNING:<span class="w"> </span><span class="o">[</span>VPL<span class="w"> </span><span class="m">60</span>-1142<span class="o">]</span><span class="w"> </span>Unable<span class="w"> </span>to<span class="w"> </span><span class="nb">read</span><span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;/home/xilinx/ros2_ws/build-kv260/accelerated_vadd_publisher/_x/link/vivado/vpl/output/generated_reports.log&#39;</span>,<span class="w"> </span>generated<span class="w"> </span>reports<span class="w"> </span>will<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>copied.
ERROR:<span class="w"> </span><span class="o">[</span>VPL<span class="w"> </span><span class="m">60</span>-806<span class="o">]</span><span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>finish<span class="w"> </span>platform<span class="w"> </span>linker
INFO:<span class="w"> </span><span class="o">[</span>v++<span class="w"> </span><span class="m">60</span>-1442<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">19</span>:52:11<span class="o">]</span><span class="w"> </span>Run<span class="w"> </span>run_link:<span class="w"> </span>Step<span class="w"> </span>vpl:<span class="w"> </span>Failed
Time<span class="w"> </span><span class="o">(</span>s<span class="o">)</span>:<span class="w"> </span><span class="nv">cpu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">00</span>:00:05<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nv">elapsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">00</span>:00:15<span class="w"> </span>.<span class="w"> </span>Memory<span class="w"> </span><span class="o">(</span>MB<span class="o">)</span>:<span class="w"> </span><span class="nv">peak</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1574</span>.906<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nv">gain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>.000<span class="w"> </span><span class="p">;</span><span class="w"> </span>free<span class="w"> </span><span class="nv">physical</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1594</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>free<span class="w"> </span><span class="nv">virtual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20748</span>
ERROR:<span class="w"> </span><span class="o">[</span>v++<span class="w"> </span><span class="m">60</span>-661<span class="o">]</span><span class="w"> </span>v++<span class="w"> </span>link<span class="w"> </span>run<span class="w"> </span><span class="s1">&#39;run_link&#39;</span><span class="w"> </span>failed
ERROR:<span class="w"> </span><span class="o">[</span>v++<span class="w"> </span><span class="m">60</span>-626<span class="o">]</span><span class="w"> </span>Kernel<span class="w"> </span>link<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span><span class="nb">complete</span>
ERROR:<span class="w"> </span><span class="o">[</span>v++<span class="w"> </span><span class="m">60</span>-703<span class="o">]</span><span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>finish<span class="w"> </span>linking
INFO:<span class="w"> </span><span class="o">[</span>v++<span class="w"> </span><span class="m">60</span>-1653<span class="o">]</span><span class="w"> </span>Closing<span class="w"> </span>dispatch<span class="w"> </span>client.
</pre></div>
</div>
<p>In this case, Vivado’s not able to find the <code class="docutils literal notranslate"><span class="pre">xilinx.com:kv260:part0:1.1</span></code> board part. We can verify this manually through Vivado CLI:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vivado<span class="w"> </span>-mode<span class="w"> </span>tcl
Vivado%<span class="w"> </span>get_board_parts<span class="w"> </span>xilinx.com:kv*
WARNING:<span class="w"> </span><span class="o">[</span>Vivado<span class="w"> </span><span class="m">12</span>-4842<span class="o">]</span><span class="w"> </span>No<span class="w"> </span>board<span class="w"> </span>parts<span class="w"> </span>matched<span class="w"> </span><span class="s1">&#39;get_board_parts xilinx.com:kv*&#39;</span>.
</pre></div>
</div>
<p>!!! todo “Figure out if this can be automated via scripting”
This could likely be automated through Tcl or similar. Find out if time allows for it in the future.</p>
<p>To fetch these, one needs to go ahead and install the corresponding files. This can be done through Vivado’s XHub Stores:</p>
<p><img alt="../_images/vivado1.png" src="../_images/vivado1.png" />
<img alt="../_images/vivado2.png" src="../_images/vivado2.png" />
<img alt="../_images/vivado3.png" src="../_images/vivado3.png" /></p>
<p>And then add a script that gets them automatically:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a file that loads 2020.2.2 board files at vivado init</span>
cat<span class="w"> </span><span class="s">&lt;&lt; &#39;EOF&#39; &gt; ~/.Xilinx/Vivado/Vivado_init.tcl</span>
<span class="s">set_param board.repoPaths {\</span>
<span class="s">	/home/xilinx/.Xilinx/Vivado/2020.2.2/xhub/board_store/xilinx_board_store \</span>
<span class="s">}</span>
<span class="s">EOF</span>

<span class="c1"># then search again</span>
vivado<span class="w"> </span>-mode<span class="w"> </span>tcl
...
Vivado%<span class="w"> </span>get_board_parts<span class="w"> </span>xilinx.com:kv*
xilinx.com:kv260:part0:1.1
</pre></div>
</div>
</section>
<section id="couldn-t-load-file-librdi-commontasks-so-libtinfo-so-5">
<h3>Couldn’t load file “librdi_commontasks.so”: libtinfo.so.5 ?<a class="headerlink" href="#couldn-t-load-file-librdi-commontasks-so-libtinfo-so-5" title="Permalink to this heading">¶</a></h3>
<p>If when launching HLS through colcon extensions as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon<span class="w"> </span>acceleration<span class="w"> </span>hls<span class="w"> </span>simple_adder<span class="w"> </span>--run
</pre></div>
</div>
<p>You get issues and the log files (<code class="docutils literal notranslate"><span class="pre">vitis_hls.log</span></code>) indicate the error in the question. Proceed as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>libtinfo-dev
sudo<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span>/lib/x86_64-linux-gnu/libtinfo.so.6<span class="w"> </span>/lib/x86_64-linux-gnu/libtinfo.so.5
</pre></div>
</div>
<!-- /////////////// --><!-- /////////////// --><!-- /////////////// --></section>
</section>
<section id="ros">
<h2>ROS<a class="headerlink" href="#ros" title="Permalink to this heading">¶</a></h2>
<section id="how-do-i-change-the-install-path-whereto-search-for-libraries">
<h3>How do I change the install path whereto search for libraries?<a class="headerlink" href="#how-do-i-change-the-install-path-whereto-search-for-libraries" title="Permalink to this heading">¶</a></h3>
<p>Using the <code class="docutils literal notranslate"><span class="pre">--cmake-args</span> <span class="pre">-DCMAKE_FIND_ROOT_PATH=$(pwd)/install-kv260</span></code> argument. E.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon<span class="w"> </span>build<span class="w"> </span>--build-base<span class="o">=</span>build-kv260<span class="w"> </span>--install-base<span class="o">=</span>install-kv260<span class="w"> </span>--merge-install<span class="w"> </span>--mixin<span class="w"> </span>kv260<span class="w"> </span>--cmake-args<span class="w"> </span>-DNOKERNELS<span class="o">=</span><span class="nb">true</span><span class="w"> </span>-DCMAKE_FIND_ROOT_PATH<span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/install-kv260
</pre></div>
</div>
</section>
<section id="how-do-i-add-additional-verbosity-to-the-build-process-with-colcon">
<h3>How do I add additional verbosity to the build process with <code class="docutils literal notranslate"><span class="pre">colcon</span></code>?<a class="headerlink" href="#how-do-i-add-additional-verbosity-to-the-build-process-with-colcon" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon<span class="w"> </span>--log-level<span class="w"> </span><span class="m">10</span><span class="w"> </span>build<span class="w"> </span>--merge-install
</pre></div>
</div>
</section>
<section id="how-do-i-add-debugging-symbols-to-ros-2-builds">
<h3>How do I add debugging symbols to ROS 2 builds?<a class="headerlink" href="#how-do-i-add-debugging-symbols-to-ros-2-builds" title="Permalink to this heading">¶</a></h3>
<p>Add <code class="docutils literal notranslate"><span class="pre">--cmake-args</span> <span class="pre">-DCMAKE_BUILD_TYPE=Debug</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon<span class="w"> </span>build<span class="w"> </span>--merge-install<span class="w"> </span>--cmake-args<span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Debug
</pre></div>
</div>
<p>or alternative, if all mixins are installed, you can:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon<span class="w"> </span>build<span class="w"> </span>--merge-install<span class="w"> </span>--mixin<span class="w"> </span>debug
</pre></div>
</div>
</section>
<section id="how-do-i-enable-disable-tracing-for-benchmarking-purposes">
<h3>How do I enable/disable tracing for benchmarking purposes?<a class="headerlink" href="#how-do-i-enable-disable-tracing-for-benchmarking-purposes" title="Permalink to this heading">¶</a></h3>
<div class="admonition-available-from-krs-beta-release-and-on admonition">
<p class="admonition-title">Available from KRS <em>beta</em> release, and on.</p>
<p>Tracing and benchmarking capabilities in KRS are available from <em>beta</em> release, and on.
<em>Check the `official releases &lt;https://github.com/Xilinx/KRS/releases&gt;`_ for more</em>.</p>
</div>
<p>Tracing is <strong>enabled by default in KRS</strong> provided <a class="reference external" href="https://lttng.org/docs/v2.11/">LTTng</a> (&gt;=2.11.1) is found installed in the file system and the <a class="reference external" href="https://gitlab.com/ros-tracing/ros2_tracing/-/tree/master#disabling-tracing"><code class="docutils literal notranslate"><span class="pre">TRACETOOLS_DISABLED</span></code></a> option is not set.</p>
<p>To <strong>disable</strong>, either uninstall LTTng or pass the <code class="docutils literal notranslate"><span class="pre">-DTRACETOOLS_DISABLED=ON</span></code> CMake argument while building the ROS 2 workspace as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># while building packages for the workstation</span>
colcon<span class="w"> </span>build<span class="w"> </span>--merge-install<span class="w"> </span>--cmake-args<span class="w"> </span><span class="s2">&quot; -DTRACETOOLS_DISABLED=ON&quot;</span>

<span class="c1"># while building packages for embedded, e.g. KV260</span>
colcon<span class="w"> </span>build<span class="w"> </span>--build-base<span class="o">=</span>build-kv260<span class="w"> </span>--install-base<span class="o">=</span>install-kv260<span class="w"> </span>--merge-install<span class="w"> </span>--mixin<span class="w"> </span>kv260<span class="w"> </span>--cmake-args<span class="w"> </span><span class="s2">&quot; -DTRACETOOLS_DISABLED=ON&quot;</span>
</pre></div>
</div>
<!-- /////////////// --><!-- /////////////// --><!-- /////////////// --></section>
</section>
<section id="vitis">
<h2>Vitis<a class="headerlink" href="#vitis" title="Permalink to this heading">¶</a></h2>
<section id="what-s-the-boot-image-format-bif-files-and-where-do-i-learn-more-about-it">
<h3>What’s the Boot Image Format (<code class="docutils literal notranslate"><span class="pre">.bif</span></code> files) and where do I learn more about it?<a class="headerlink" href="#what-s-the-boot-image-format-bif-files-and-where-do-i-learn-more-about-it" title="Permalink to this heading">¶</a></h3>
<p>From [^33]</p>
<blockquote>
<div><p>The Xilinx® boot image layout has multiple files, file types, and supporting headers to parse those files by boot loaders. Bootgen defines multiple attributes for generating the boot images and interprets and generates the boot images, based on what is passed in the files. Because there are multiple commands and attributes available, Bootgen defines a boot image format (BIF) to contain those inputs. A BIF comprises of the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- Configuration attributes to create secure/non-secure boot images
- Bootloader
    - First stage boot loader (FSBL) for Zynq® devices and Zynq® UltraScale+™ MPSoCs
    - Platform loader and manager (PLM) for Versal™ ACAP
- One or more Partition Images
</pre></div>
</div>
</div></blockquote>
<p>To learn more, refer to:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug1283-bootgen-user-guide.pdf">UG1283</a></p></li>
<li><p><a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/bootimagelayout.html">Bootgen tool documentation</a></p></li>
</ul>
</section>
<section id="how-do-i-generate-a-boot-bin-from-a-bif-file-and-its-related-artifacts">
<h3>How do I generate a boot.bin from a <code class="docutils literal notranslate"><span class="pre">.bif</span></code> file and its related artifacts?<a class="headerlink" href="#how-do-i-generate-a-boot-bin-from-a-bif-file-and-its-related-artifacts" title="Permalink to this heading">¶</a></h3>
<p>Let’s assume:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>xilinx@xilinx:/tmp/latebinding$<span class="w"> </span>ls
arm-trusted-firmware.elf<span class="w">  </span>fsbl-zcu102-zynqmp.elf<span class="w">          </span>tsn.bit
bootgen.bif<span class="w">               </span>pmu-firmware-zcu102-zynqmp.elf<span class="w">  </span>u-boot-zcu102-zynqmp.elf
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">bootgen.bif</span></code> contains:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>bootgen.bif
the_ROM_image:
<span class="o">{</span>
<span class="w">	 </span><span class="o">[</span>bootloader,<span class="w">  </span><span class="nv">destination_cpu</span><span class="o">=</span>a53-0<span class="o">]</span><span class="w"> </span>fsbl-zcu102-zynqmp.elf
<span class="w">	 </span><span class="o">[</span><span class="nv">destination_device</span><span class="o">=</span>pl<span class="o">]</span><span class="w"> </span>tsn.bit
<span class="w">	 </span><span class="o">[</span><span class="nv">destination_cpu</span><span class="o">=</span>pmu<span class="o">]</span><span class="w"> </span>pmu-firmware-zcu102-zynqmp.elf
<span class="w">	 </span><span class="o">[</span><span class="nv">destination_cpu</span><span class="o">=</span>a53-0,<span class="w"> </span><span class="nv">exception_level</span><span class="o">=</span>el-3,<span class="w"> </span>trustzone<span class="o">]</span><span class="w"> </span>arm-trusted-firmware.elf
<span class="w">	 </span><span class="o">[</span><span class="nv">destination_cpu</span><span class="o">=</span>a53-0,<span class="w"> </span><span class="nv">exception_level</span><span class="o">=</span>el-2<span class="o">]</span><span class="w"> </span>u-boot-zcu102-zynqmp.elf
<span class="o">}</span>
</pre></div>
</div>
<p>Building <code class="docutils literal notranslate"><span class="pre">boot.bin</span></code> can be accomplished with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bootgen</span> <span class="o">-</span><span class="n">arch</span> <span class="n">zynqmp</span> <span class="o">-</span><span class="n">image</span> <span class="n">bootgen</span><span class="o">.</span><span class="n">bif</span> <span class="o">-</span><span class="n">o</span> <span class="n">boot</span><span class="o">.</span><span class="n">bin</span>


<span class="o">******</span> <span class="n">Xilinx</span> <span class="n">Bootgen</span> <span class="n">v2020</span><span class="mf">.2</span>
  <span class="o">****</span> <span class="n">Build</span> <span class="n">date</span> <span class="p">:</span> <span class="n">Nov</span> <span class="mi">18</span> <span class="mi">2020</span><span class="o">-</span><span class="mi">09</span><span class="p">:</span><span class="mi">50</span><span class="p">:</span><span class="mi">31</span>
    <span class="o">**</span> <span class="n">Copyright</span> <span class="mi">1986</span><span class="o">-</span><span class="mi">2020</span> <span class="n">Xilinx</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span> <span class="n">All</span> <span class="n">Rights</span> <span class="n">Reserved</span><span class="o">.</span>


<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>   <span class="p">:</span> <span class="n">Bootimage</span> <span class="n">generated</span> <span class="n">successfully</span>
</pre></div>
</div>
</section>
<section id="how-do-i-introspect-a-boot-bin-file">
<h3>How do I introspect a BOOT.BIN file?<a class="headerlink" href="#how-do-i-introspect-a-boot-bin-file" title="Permalink to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">bootgen_utility</span></code> is a tool used to dump the contents of a Boot Image generated by Bootgen, into a human-readable log file. This is useful in debugging and understanding the contents of the different header tables of a boot image. More at <a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/nps1533233478931.html">the documentation</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>bootgen_utility<span class="w"> </span>-arch<span class="w"> </span>zynqmp<span class="w"> </span>-bin<span class="w"> </span>boot.bin<span class="w"> </span>-out<span class="w"> </span>boot.bin.info
</pre></div>
</div>
</section>
<section id="how-do-i-execute-a-tcl-script-from-cli">
<h3>How do I execute a Tcl script from CLI?<a class="headerlink" href="#how-do-i-execute-a-tcl-script-from-cli" title="Permalink to this heading">¶</a></h3>
<ol class="simple">
<li><p>Source Vitis platform environment</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vivado</span> <span class="pre">-mode</span> <span class="pre">batch</span> <span class="pre">-source</span> <span class="pre">&lt;script.tcl&gt;</span></code></p></li>
</ol>
<!--  --><!--  --><!--  --></section>
</section>
<section id="vivado">
<h2>Vivado<a class="headerlink" href="#vivado" title="Permalink to this heading">¶</a></h2>
<section id="how-do-i-map-an-soc-featured-in-datasheets-to-the-part-for-hls">
<h3>How do I map an SoC featured in datasheets to the part for HLS?<a class="headerlink" href="#how-do-i-map-an-soc-featured-in-datasheets-to-the-part-for-hls" title="Permalink to this heading">¶</a></h3>
<p>!!! note
The part listed in datasheets is sometimes different from the one that can be used in <code class="docutils literal notranslate"><span class="pre">Tcl</span></code> scripts. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">ZCU102</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">datasheet</span><span class="p">:</span> <span class="n">XCZU9EG</span><span class="o">-</span><span class="mi">2</span><span class="n">FFVB1156</span>
    <span class="o">-</span> <span class="n">part</span><span class="p">:</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvb1156</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="n">e</span>
</pre></div>
</div>
<p>To figure things out, use vivado “get_parts” command and match the closes. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_parts</span> <span class="n">xczu9eg</span><span class="o">*</span>

<span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvb1156</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">e</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvb1156</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvb1156</span><span class="o">-</span><span class="mi">1</span><span class="n">L</span><span class="o">-</span><span class="n">i</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvb1156</span><span class="o">-</span><span class="mi">1</span><span class="n">LV</span><span class="o">-</span><span class="n">i</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvb1156</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="n">e</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvb1156</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="n">i</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvb1156</span><span class="o">-</span><span class="mi">2</span><span class="n">L</span><span class="o">-</span><span class="n">e</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvb1156</span><span class="o">-</span><span class="mi">2</span><span class="n">LV</span><span class="o">-</span><span class="n">e</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvb1156</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">e</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvc900</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">e</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvc900</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">i</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvc900</span><span class="o">-</span><span class="mi">1</span><span class="n">L</span><span class="o">-</span><span class="n">i</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvc900</span><span class="o">-</span><span class="mi">1</span><span class="n">LV</span><span class="o">-</span><span class="n">i</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvc900</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="n">e</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvc900</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="n">i</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvc900</span><span class="o">-</span><span class="mi">2</span><span class="n">L</span><span class="o">-</span><span class="n">e</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvc900</span><span class="o">-</span><span class="mi">2</span><span class="n">LV</span><span class="o">-</span><span class="n">e</span> <span class="n">xczu9eg</span><span class="o">-</span><span class="n">ffvc900</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="n">e</span>
</pre></div>
</div>
<!-- abbreviations --><p>*[SDK]: Software Development Kit</p>
<!-- This :abbr:`SDP (Software Development Plan)` defines --><!-- references --></section>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h2>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id1" role="note">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<p>Rifenbark, S. (2015). Yocto Project Mega-Manual. Retrieved from: <a class="reference external" href="https://www.yoctoproject.org/docs/current/mega-manual/mega-manual.html">https://www.yoctoproject.org/docs/current/mega-manual/mega-manual.html</a>.</p>
</aside>
<aside class="footnote brackets" id="id2" role="note">
<span class="label"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></span>
<p>Xilinx (2016). <em>Zynq UltraScale+ MPSoC product brief</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/product-briefs/zynq-ultrascale-plus-product-brief.pdf">https://www.xilinx.com/support/documentation/product-briefs/zynq-ultrascale-plus-product-brief.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id3" role="note">
<span class="label"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></span>
<p>Xilinx (2020). <em>Zynq UltraScale+ Device Technical Reference Manual</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/user_guides/ug1085-zynq-ultrascale-trm.pdf">https://www.xilinx.com/support/documentation/user_guides/ug1085-zynq-ultrascale-trm.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id4" role="note">
<span class="label"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></span>
<p>Xilinx (2020). <em>UltraScale Architecture and Product Data Sheet: Overview</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/data_sheets/ds890-ultrascale-overview.pdf">https://www.xilinx.com/support/documentation/data_sheets/ds890-ultrascale-overview.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id5" role="note">
<span class="label"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></span>
<p>Xilinx (2019). <em>Zynq UltraScale+ MPSoC Data Sheet:Overview</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/data_sheets/ds891-zynq-ultrascale-plus-overview.pdf">https://www.xilinx.com/support/documentation/data_sheets/ds891-zynq-ultrascale-plus-overview.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id6" role="note">
<span class="label"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></span>
<p>Xilinx (2020). <em>Zynq UltraScale+ MPSoC Data Sheet:DC and AC Switching Characteristics</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/data_sheets/ds925-zynq-ultrascale-plus.pdf">https://www.xilinx.com/support/documentation/data_sheets/ds925-zynq-ultrascale-plus.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id7" role="note">
<span class="label"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></span>
<p>Xilinx (2016). <em>Unleash the Unparalleled Power and Flexibility of Zynq UltraScale+ MPSoCs</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/white_papers/wp470-ultrascale-plus-power-flexibility.pdf">https://www.xilinx.com/support/documentation/white_papers/wp470-ultrascale-plus-power-flexibility.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id8" role="note">
<span class="label"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></span>
<p>Xilinx (2016). <em>Managing Power and Performance with the Zynq UltraScale+ MPSoC</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/white_papers/wp482-zu-pwr-perf.pdf">https://www.xilinx.com/support/documentation/white_papers/wp482-zu-pwr-perf.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id9" role="note">
<span class="label"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></span>
<p>Xilinx (2021). <em>Zynq UltraScale+ MPSoC Software Developer Guide</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug1137-zynq-ultrascale-mpsoc-swdev.pdf">https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug1137-zynq-ultrascale-mpsoc-swdev.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id10" role="note">
<span class="label"><span class="fn-bracket">[</span>10<span class="fn-bracket">]</span></span>
<p>Xilinx (2020). <em>Xilinx Quick Emulator User Guide</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug1169-xilinx-qemu.pdf">https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug1169-xilinx-qemu.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id11" role="note">
<span class="label"><span class="fn-bracket">[</span>11<span class="fn-bracket">]</span></span>
<p>Xilinx (2020). <em>UltraScale Architecture Memory Resources</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/user_guides/ug573-ultrascale-memory-resources.pdf">https://www.xilinx.com/support/documentation/user_guides/ug573-ultrascale-memory-resources.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id12" role="note">
<span class="label"><span class="fn-bracket">[</span>12<span class="fn-bracket">]</span></span>
<p>Xilinx (2020). <em>UltraScale Architecture System Monitor</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/user_guides/ug580-ultrascale-sysmon.pdf">https://www.xilinx.com/support/documentation/user_guides/ug580-ultrascale-sysmon.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id13" role="note">
<span class="label"><span class="fn-bracket">[</span>13<span class="fn-bracket">]</span></span>
<p>Xilinx (2020). <em>Zynq UltraScale+ Device Packaging and Pinouts</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/user_guides/ug1075-zynq-ultrascale-pkg-pinout.pdf">https://www.xilinx.com/support/documentation/user_guides/ug1075-zynq-ultrascale-pkg-pinout.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id14" role="note">
<span class="label"><span class="fn-bracket">[</span>14<span class="fn-bracket">]</span></span>
<p>Xilinx (2016). <em>Software Migration to 64-bit ARM Heterogeneous Platforms</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/white_papers/wp473-migration-to-64-bit-arm.pdf">https://www.xilinx.com/support/documentation/white_papers/wp473-migration-to-64-bit-arm.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id15" role="note">
<span class="label"><span class="fn-bracket">[</span>15<span class="fn-bracket">]</span></span>
<p>Xilinx (2016). <em>Enabling Virtualization with Xen Hypervisor on Zynq UltraScale+ MPSoCs</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/white_papers/wp474-xen-hypervisor.pdf">https://www.xilinx.com/support/documentation/white_papers/wp474-xen-hypervisor.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id16" role="note">
<span class="label"><span class="fn-bracket">[</span>16<span class="fn-bracket">]</span></span>
<p>Xilinx (2016). <em>Toward 5G Xilinx Solutions and Enablers for Next-Generation Wireless Systems</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/white_papers/wp476-toward-5g.pdf">https://www.xilinx.com/support/documentation/white_papers/wp476-toward-5g.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id17" role="note">
<span class="label"><span class="fn-bracket">[</span>17<span class="fn-bracket">]</span></span>
<p>Khona, C. (2017). <em>Key Attributes of an Intelligent IIoT Edge Platform</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/white_papers/wp493-iiot-edge-platforms.pdf">https://www.xilinx.com/support/documentation/white_papers/wp493-iiot-edge-platforms.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id18" role="note">
<span class="label"><span class="fn-bracket">[</span>18<span class="fn-bracket">]</span></span>
<p>Xilinx (2020). <em>Isolate Security-Critical Applications on Zynq UltraScale+ Devices</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/white_papers/wp516-security-apps.pdf">https://www.xilinx.com/support/documentation/white_papers/wp516-security-apps.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id19" role="note">
<span class="label"><span class="fn-bracket">[</span>19<span class="fn-bracket">]</span></span>
<p>Xilinx (2020). <em>Key Revocation Lab</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/application_notes/xapp1344-key-revocation-lab.pdf">https://www.xilinx.com/support/documentation/application_notes/xapp1344-key-revocation-lab.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id20" role="note">
<span class="label"><span class="fn-bracket">[</span>20<span class="fn-bracket">]</span></span>
<p>Xilinx (2020). <em>UltraFast Design Methodology Guide for the Vivado Design Suite</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_1/ug949-vivado-design-methodology.pdf">https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_1/ug949-vivado-design-methodology.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id21" role="note">
<span class="label"><span class="fn-bracket">[</span>21<span class="fn-bracket">]</span></span>
<p>Xilinx (2018). <em>UltraFast Embedded Design Methodology Guide</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/ug1046-ultrafast-design-methodology-guide.pdf">https://www.xilinx.com/support/documentation/sw_manuals/ug1046-ultrafast-design-methodology-guide.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id22" role="note">
<span class="label"><span class="fn-bracket">[</span>22<span class="fn-bracket">]</span></span>
<p>Xilinx (2017). <em>Zynq UltraScale+ MPSoC Embedded Design Methodology Guide</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/content/dam/xilinx/support/documentation/sw_manuals/ug1228-ultrafast-embedded-design-methodology-guide.pdf">https://www.xilinx.com/content/dam/xilinx/support/documentation/sw_manuals/ug1228-ultrafast-embedded-design-methodology-guide.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id23" role="note">
<span class="label"><span class="fn-bracket">[</span>23<span class="fn-bracket">]</span></span>
<p>Xilinx (2018). <em>Zynq UltraScale+ MPSoC: Embedded Design Tutorial</em>. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/content/dam/xilinx/support/documentation/sw_manuals/xilinx2018_2/ug1209-embedded-design-tutorial.pdf">https://www.xilinx.com/content/dam/xilinx/support/documentation/sw_manuals/xilinx2018_2/ug1209-embedded-design-tutorial.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id24" role="note">
<span class="label"><span class="fn-bracket">[</span>24<span class="fn-bracket">]</span></span>
<p>Xilinx (2020). <em>PetaLinux Tools Documentation. Reference Guide</em>. Xilinx. UG1144 (v2020.2) November 24, 2020. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug1144-petalinux-tools-reference-guide.pdf">https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug1144-petalinux-tools-reference-guide.pdf</a>.</p>
</aside>
<aside class="footnote brackets" id="id25" role="note">
<span class="label"><span class="fn-bracket">[</span>25<span class="fn-bracket">]</span></span>
<p>Apertis. <em>Sysroots and Devroots</em>. Retrieved from <a class="reference external" href="https://www.apertis.org/architecture/sysroots-and-devroots/">https://www.apertis.org/architecture/sysroots-and-devroots/</a>.</p>
</aside>
<aside class="footnote brackets" id="id26" role="note">
<span class="label"><span class="fn-bracket">[</span>26<span class="fn-bracket">]</span></span>
<p>Arief Wicaksana. <em>Booting Xen Hypervisor with Petalinux on Zynq Ultrascale+</em> .Retrieved from <a class="reference external" href="https://witjaksana.github.io/2018/02/12/booting-xen-on-zcu102/">https://witjaksana.github.io/2018/02/12/booting-xen-on-zcu102/</a>.</p>
</aside>
<aside class="footnote brackets" id="id27" role="note">
<span class="label"><span class="fn-bracket">[</span>27<span class="fn-bracket">]</span></span>
<p>Retrieved from <a class="reference external" href="http://people.redhat.com/williams/latency-howto/rt-latency-howto.txt">http://people.redhat.com/williams/latency-howto/rt-latency-howto.txt</a>.</p>
</aside>
<aside class="footnote brackets" id="id28" role="note">
<span class="label"><span class="fn-bracket">[</span>28<span class="fn-bracket">]</span></span>
<p>Zynq UltraScale+ MPSoC ZCU102 Evaluation Kit. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/boards_and_kits/zcu102/xtp426-zcu102-quickstart.pdf">https://www.xilinx.com/support/documentation/boards_and_kits/zcu102/xtp426-zcu102-quickstart.pdf</a></p>
</aside>
<aside class="footnote brackets" id="id29" role="note">
<span class="label"><span class="fn-bracket">[</span>29<span class="fn-bracket">]</span></span>
<p>ZCU102 Evaluation Board. Retrieved from <a class="reference external" href="https://www.xilinx.com/support/documentation/boards_and_kits/zcu102/ug1182-zcu102-eval-bd.pdf">https://www.xilinx.com/support/documentation/boards_and_kits/zcu102/ug1182-zcu102-eval-bd.pdf</a></p>
</aside>
<aside class="footnote brackets" id="id30" role="note">
<span class="label"><span class="fn-bracket">[</span>30<span class="fn-bracket">]</span></span>
<p>Xilinx ZCU102. Erika Enterprise. Retrieved from <a class="reference external" href="http://www.erika-enterprise.com/wiki/index.php?title=Xilinx_ZCU102">http://www.erika-enterprise.com/wiki/index.php?title=Xilinx_ZCU102</a></p>
</aside>
<aside class="footnote brackets" id="id31" role="note">
<span class="label"><span class="fn-bracket">[</span>31<span class="fn-bracket">]</span></span>
<p>Zynq UltraScale＋ MPSoC Ubuntu part 2 - Building and Running the Ubuntu Desktop From Sources. Xilinx Confluence. Retrieved from <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18841937/Zynq+UltraScale+MPSoC+Ubuntu+part+2+-+Building+and+Running+the+Ubuntu+Desktop+From+Sources">https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/18841937/Zynq+UltraScale+MPSoC+Ubuntu+part+2+-+Building+and+Running+the+Ubuntu+Desktop+From+Sources</a></p>
</aside>
<aside class="footnote brackets" id="id32" role="note">
<span class="label"><span class="fn-bracket">[</span>32<span class="fn-bracket">]</span></span>
<p>ramfs, rootfs and initramfs. Rob Landley. Retrieved from <a class="reference external" href="https://www.kernel.org/doc/Documentation/filesystems/ramfs-rootfs-initramfs.txt">https://www.kernel.org/doc/Documentation/filesystems/ramfs-rootfs-initramfs.txt</a>.</p>
</aside>
<aside class="footnote brackets" id="id33" role="note">
<span class="label"><span class="fn-bracket">[</span>33<span class="fn-bracket">]</span></span>
<p>Creating Boot Images. Xilinx. Retrieved from <a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/creatingbootimages.html#rsz1534706729087">https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/creatingbootimages.html#rsz1534706729087</a>.</p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="examples/vitis_accelerated_function.html" class="btn btn-neutral float-left" title="How to use Vitis Accelerated Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="other/definitions.html" class="btn btn-neutral float-right" title="Definitions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2024, dvanced Micro Devices, Inc.
      <span class="lastupdated">Last updated on January 2, 2024.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>
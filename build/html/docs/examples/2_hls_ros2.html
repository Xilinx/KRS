


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
	    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3. Offloading ROS 2 publisher" href="3_offloading_ros2_publisher.html" />
    <link rel="prev" title="1. Hello Xilinx" href="1_hello_xilinx.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> KRS
          

          
          </a>

          
            
            
              <div class="version">
                alpha
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Kria Robotics Stack (KRS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install KRS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware.html">Hardware supported</a></li>
</ul>
<p class="caption"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../features/ros2centric.html">ROS 2-centric</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/realtime_ros2.html">Real-time ROS 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/accelerated_apps_ros2.html">ROS 2 Accelerated Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/contributing_ros2.html">Contributing back to ROS 2</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="0_ros2_publisher.html">0. ROS 2 publisher</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_hello_xilinx.html">1. Hello Xilinx</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. HLS in ROS 2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prepare-the-environment-and-fetch-the-example">Prepare the environment and fetch the example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-bit-of-background-on-hls-rtl-and-fpgas">A bit of background on HLS, RTL and FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-adder1-a-quick-look-into-the-flow"><code class="docutils literal notranslate"><span class="pre">simple_adder1</span></code>: a quick look into the flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-the-vitis-hls-gui">Using the Vitis HLS GUI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#simple-adder2-optimizing-fpga-synthesis-for-lower-latency-responses"><code class="docutils literal notranslate"><span class="pre">simple_adder2</span></code>: optimizing FPGA synthesis for lower latency responses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="3_offloading_ros2_publisher.html">3. Offloading ROS 2 publisher</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_accelerated_ros2_publisher.html">4. Accelerated ROS 2 publisher</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_faster_ros2_publisher.html">5. Faster ROS 2 publisher</a></li>
</ul>
<p class="caption"><span class="caption-text">HowTo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howto.html">HOWTO and Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../other/definitions.html">Definitions</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../_sources/docs/examples/2_hls_ros2.md.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">KRS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>2. HLS in ROS 2</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/docs/examples/2_hls_ros2.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hls-in-ros-2">
<h1>2. HLS in ROS 2<a class="headerlink" href="#hls-in-ros-2" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<thead>
<tr>
<th></th>
<th>Source code</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/ros-acceleration/acceleration_examples/tree/main/simple_adder"><code>simple_adder</code></a></td>
<td></td>
</tr>
<tr>
<td><strong>adder1</strong></td>
<td></td>
</tr>
<tr>
<td>kernel 1</td>
<td><a href="https://github.com/ros-acceleration/acceleration_examples/blob/main/simple_adder/src/adder1.cpp"><code>adder1.cpp</code></a></td>
</tr>
<tr>
<td>testbench 1</td>
<td><a href="https://github.com/ros-acceleration/acceleration_examples/blob/main/simple_adder/src/testbench1.cpp"><code>testbench1.cpp</code></a></td>
</tr>
<tr>
<td><strong>adder2</strong></td>
<td></td>
</tr>
<tr>
<td>kernel 2</td>
<td><a href="https://github.com/ros-acceleration/acceleration_examples/blob/main/simple_adder/src/adder2.cpp"><code>adder2.cpp</code></a></td>
</tr>
<tr>
<td>testbench 2</td>
<td><a href="https://github.com/ros-acceleration/acceleration_examples/blob/main/simple_adder/src/testbench2.cpp"><code>testbench2.cpp</code></a></td>
</tr>
</tbody>
</table><p>HLS is at the core of C++ hardware acceleration. KRS allows to maintain a ROS 2-centric view while leveraging HLS, optimizing the flow and empowering roboticists toperform everything from the CLI, attaching nicely to the ROS 2 meta build system (<code class="docutils literal notranslate"><span class="pre">ament</span></code>) and the ROS 2 meta build tools (<code class="docutils literal notranslate"><span class="pre">colcon</span></code>).</p>
<p>This example demonstrates how KRS helps to transition from the Xilinx’s Vitis-centric flow to the ROS 2 flow.  The source code performs a trivial add operation. HLS is used directly from the ROS 2 CLI build tools. We explore the possiblities of offloading this operation to the Programmable Logic (PL). The latencies derived from the offloading operation are then analyzed both with the ROS 2 CLI tooling, and later, with the Vitis HLS GUI.</p>
<p><strong>Though we’ll be targeting KV260 hardware platform, no physical hardware is needed for this example.</strong></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The examples assume you’ve already installed KRS. If not, refer to <a class="reference external" href="../install.html">install</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://docs.ros.org/">Learn ROS 2</a> before trying this out first.</p>
</div>
<div class="section" id="prepare-the-environment-and-fetch-the-example">
<h2>Prepare the environment and fetch the example<a class="headerlink" href="#prepare-the-environment-and-fetch-the-example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ~/krs_ws  <span class="c1"># head to your KRS workspace</span>

<span class="c1"># prepare the environment</span>
$ <span class="nb">source</span> /tools/Xilinx/Vitis/2020.2/settings64.sh  <span class="c1"># source Xilinx tools</span>
$ <span class="nb">source</span> /opt/ros/foxy/setup.bash  <span class="c1"># Sources system ROS 2 installation</span>
$ <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/usr/bin&quot;</span>:<span class="nv">$PATH</span>  <span class="c1"># FIXME: adjust path for CMake 3.5+</span>

<span class="c1"># fetch the source code of examples</span>
$ git clone https://github.com/ros-acceleration/acceleration_examples src/acceleration_examples

<span class="c1"># build the workspace</span>
$ colcon build --merge-install  <span class="c1"># about 2 mins</span>

<span class="c1"># source the workspace as an overlay</span>
$ <span class="nb">source</span> install/setup.bash
</pre></div>
</div>
</div>
<div class="section" id="a-bit-of-background-on-hls-rtl-and-fpgas">
<h2>A bit of background on HLS, RTL and FPGAs<a class="headerlink" href="#a-bit-of-background-on-hls-rtl-and-fpgas" title="Permalink to this headline">¶</a></h2>
<div class="admonition-about-c-simulation admonition">
<p class="admonition-title">About C simulation</p>
<p>HLS C Simulation performs a pre-synthesis validation and checks that that the C program correctly implements the required functionality. This allows you to compile, simulate, and debug the C/C++ algorithm. C simulation allows for the function to be synthesized (e.g. <cite>simple_adder</cite> above) to be validated with a test bench using C simulation. A C test bench includes a main() top-level function, that calls the function to be synthesized by the Vitis HLS project. The test bench can also include other functions.</p>
<p>Refer to <a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/verifyingcodecsimulation.html#amz1583532308782/">Verifying Code with C Simulation</a> for more.</p>
</div>
<div class="admonition-about-synthesis admonition">
<p class="admonition-title">About Synthesis</p>
<p>Synthesis transforms the C or C++ function into RTL code for acceleration in programmable logic. HLS allows you to control synthesis process using optimization pragmas to create high-performance implementations.</p>
<p>Refer to <a class="reference external" href="https://www.xilinx.com/html_docs/xilinx2020_2/vitis_doc/synthesizingcode.html#dtu1584226824270/">Synthesizing the Code</a> for more.</p>
</div>
<div class="admonition-a-further-understanding-of-the-synthesis-summary-view admonition">
<p class="admonition-title">A further understanding of the <em>synthesis summary view</em></p>
<p>The <em>synthesis summary view</em> provides lots of information with different fields which may not always be self-explanatory. The list below tries to clarify some of the most relevant ones:</p>
<ul class="simple">
<li><p><strong>Slack</strong>: displays any timing issues in the implementation.</p></li>
<li><p><strong>Latency(cycles)/Latency(ns)</strong>: displays the number of cycles it takes to produce the output. The same information is also displayed in ns.</p></li>
<li><p><strong>Iteration Latency</strong>: latency of a single iteration for a loop.</p></li>
<li><p><strong>Interval</strong>: Interval or Initiation Interval (II) is the number of clock cycles before new inputs can be applied.</p></li>
<li><p><strong>Trip Count</strong>: displays the number of iterations of a specific loop in the implemented hardware. This reflects any unrolling of the loop in hardware.</p></li>
</ul>
</div>
<div class="admonition-a-quick-review-of-the-resources-in-an-fpga admonition">
<p class="admonition-title">A quick review of the resources in an FPGA</p>
<p>Xilinx FPGA designs contain the following core components: Configurable Logic Blocks (CLBs), Programmable Routing Blocks (PRBs), I/O Blocks (IOBs) and Digital Signal Processors (DSPs). Within CLBs we have 4 sub-components: Flip-flops (FFs), Loop-up-tables (LUTs), multiplexers (MUXs) and SRAM.</p>
<p>When accounting for resources consumed, we focus particularly on the following which are further defined below:</p>
<ul class="simple">
<li><p><strong>DSP</strong>: DSPs have been optimized to implement various common digital signal processing functions with maximum performance and minimum logic resource utilization. They have functions to provide multipliers, adders, substractors, accumulators, coefficient register storage or a summation unit, amongst others.</p></li>
<li><p><strong>FF</strong>: they are the smallest storage resource on the FPGA and each FF within a CLB is a binary register used to save logic states between clock cycles on an FPGA circuit.</p></li>
<li><p><strong>LUT</strong>: stores a predefined list of outputs for every combination of inputs. LUTs provide a fast way to retrieve the output of a logic operation because possible results are stored and then referenced, rather than calculated.</p></li>
<li><p><strong>URAM</strong>: UltraRAM is a large, lightweight memory block intended to allow the replacement of off-board memories enabling better overall performance.</p></li>
</ul>
</div>
</div>
<div class="section" id="simple-adder1-a-quick-look-into-the-flow">
<h2><code class="docutils literal notranslate"><span class="pre">simple_adder1</span></code>: a quick look into the flow<a class="headerlink" href="#simple-adder1-a-quick-look-into-the-flow" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/ros-acceleration/acceleration_examples/blob/main/simple_adder/src/adder1.cpp"><code class="docutils literal notranslate"><span class="pre">simple_adder</span></code></a> is pretty straightforward:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">simple_adder</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>We can build this example packaged as a ROS package (though it doesn’t interact with the computational graph) as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ colcon acceleration <span class="k">select</span> kv260  <span class="c1"># select the KV260 firmware</span>
$ colcon build  --merge-install --build-base<span class="o">=</span>build-kv260 --install-base<span class="o">=</span>install-kv260 --mixin kv260 --packages-select simple_adder
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">simple_adder</span></code> package uses the <code class="docutils literal notranslate"><span class="pre">vitis_hls_generate_tcl</span></code> macro on its CMakeLists.txt. This macro commands the build system (<code class="docutils literal notranslate"><span class="pre">ament</span></code>) that when the package is built it should generate a Tcl script for <code class="docutils literal notranslate"><span class="pre">simple_adder</span></code>. This Tcl script will allow architects with HLS experience to use the traditional HLS interface to further optimize and investigate the kernel through C simulation, synthesis, RTL simulation, etc.</p>
<p>Here’s a peek to the macro syntax used:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">vitis_hls_generate_tcl</span><span class="p">(</span>
  <span class="s">PROJECT</span> 
    <span class="s">project_simpleadder1</span>
  <span class="s">SRC</span> 
    <span class="s">src/adder1.cpp</span>
  <span class="s">HEADERS</span>
    <span class="s">include</span>
  <span class="s">TESTBENCH</span> 
    <span class="s">src/testbench.cpp</span>
  <span class="s">TOPFUNCTION</span> 
    <span class="s">simple_adder</span>
  <span class="s">CLOCK</span> 
    <span class="s">4</span>
  <span class="s">SYNTHESIS</span>
<span class="p">)</span>
</pre></div>
</div>
<p>??? note “The Xilinx Tcl traditional path”</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>When using the `vitis_hls_generate_tcl` macro above, a script is automatically generated under `~/krs_ws/build-kv60/simple_adder/project_simpleadder1.tcl`:
```
open_project -reset project_simpleadder1
add_files  /home/xilinx/ros2_ws/src/xilinx/xilinx_examples/simple_adder/src/adder1.cpp
add_files -tb /home/xilinx/ros2_ws/src/xilinx/xilinx_examples/simple_adder/src/testbench.cpp -cflags &quot;-isystem  /home/xilinx/ros2_ws/src/xilinx/xilinx_examples/simple_adder/include&quot;
set_top simple_adder
# solution_4ns
open_solution solution_4ns
set_part {xczu9eg-ffvb1156-2-e}
create_clock -period 4
csim_design -ldflags &quot;-lOpenCL&quot; -profile
csynth_design

# solution_10ns
open_solution solution_10ns
set_part {xczu9eg-ffvb1156-2-e}
create_clock -period 10
csim_design -ldflags &quot;-lOpenCL&quot; -profile
csynth_design

exit
```
The resulting Tcl script can directly be launched with `vitis_hls -f &lt;file-name&gt;` allowing to perform C simulation and synthesis (in this particular case).

```bash
$ vitis_hls -f project_simpleadder1.tcl

****** Vitis HLS - High-Level Synthesis from C, C++ and OpenCL v2020.2.2 (64-bit)
**** SW Build 3118627 on Tue Feb  9 05:13:49 MST 2021
**** IP Build 3115676 on Tue Feb  9 10:48:11 MST 2021
    ** Copyright 1986-2021 Xilinx, Inc. All Rights Reserved.

source /tools/Xilinx/Vitis_HLS/2020.2/scripts/vitis_hls/hls.tcl -notrace
INFO: [HLS 200-10] Running &#39;/tools/Xilinx/Vitis_HLS/2020.2/bin/unwrapped/lnx64.o/vitis_hls&#39;
INFO: [HLS 200-10] For user &#39;xilinx&#39; on host &#39;xilinx&#39; (Linux_x86_64 version 5.10.37-rt39-tsn-measurements) on Sat Jul 10 07:39:11 CEST 2021
INFO: [HLS 200-10] On os Ubuntu 20.04.2 LTS
INFO: [HLS 200-10] In directory &#39;/home/xilinx/ros2_ws/build-zcu102/simple_adder&#39;
Sourcing Tcl script &#39;project_simpleadder1.tcl&#39;
INFO: [HLS 200-1510] Running: open_project -reset project_simpleadder1
INFO: [HLS 200-10] Opening and resetting project &#39;/home/xilinx/ros2_ws/build-zcu102/simple_adder/project_simpleadder1&#39;.
WARNING: [HLS 200-40] No /home/xilinx/ros2_ws/build-zcu102/simple_adder/project_simpleadder1/solution_4ns/solution_4ns.aps file found.
WARNING: [HLS 200-40] No /home/xilinx/ros2_ws/build-zcu102/simple_adder/project_simpleadder1/solution_10ns/solution_10ns.aps file found.
INFO: [HLS 200-1510] Running: add_files /home/xilinx/ros2_ws/src/xilinx/xilinx_examples/simple_adder/src/adder1.cpp
INFO: [HLS 200-10] Adding design file &#39;/home/xilinx/ros2_ws/src/xilinx/xilinx_examples/simple_adder/src/adder1.cpp&#39; to the project
INFO: [HLS 200-1510] Running: add_files -tb /home/xilinx/ros2_ws/src/xilinx/xilinx_examples/simple_adder/src/testbench.cpp -cflags -isystem  /home/xilinx/ros2_ws/src/xilinx/xilinx_examples/simple_adder/include
INFO: [HLS 200-10] Adding test bench file &#39;/home/xilinx/ros2_ws/src/xilinx/xilinx_examples/simple_adder/src/testbench.cpp&#39; to the project
INFO: [HLS 200-1510] Running: set_top simple_adder
INFO: [HLS 200-1510] Running: open_solution solution_4ns
INFO: [HLS 200-10] Creating and opening solution &#39;/home/xilinx/ros2_ws/build-zcu102/simple_adder/project_simpleadder1/solution_4ns&#39;.
INFO: [HLS 200-1505] Using default flow_target &#39;vivado&#39;
Resolution: For help on HLS 200-1505 see www.xilinx.com/cgi-bin/docs/rdoc?v=2020.2;t=hls+guidance;d=200-1505.html
INFO: [HLS 200-1510] Running: set_part xczu9eg-ffvb1156-2-e
INFO: [HLS 200-10] Setting target device to &#39;xczu9eg-ffvb1156-2-e&#39;
INFO: [HLS 200-1510] Running: create_clock -period 4
INFO: [SYN 201-201] Setting up clock &#39;default&#39; with a period of 4ns.
INFO: [HLS 200-1510] Running: csim_design -ldflags -lOpenCL -profile
INFO: [SIM 211-2] *************** CSIM start ***************
INFO: [SIM 211-4] CSIM will launch CLANG as the compiler.
Compiling ../../../../../../src/xilinx/xilinx_examples/simple_adder/src/testbench.cpp in debug mode
Compiling ../../../../../../src/xilinx/xilinx_examples/simple_adder/src/adder1.cpp in debug mode
Generating csim.exe
Expected result: 100, Got Result: 100
Expected result: 103, Got Result: 103
Expected result: 106, Got Result: 106
Expected result: 109, Got Result: 109
Expected result: 112, Got Result: 112
Expected result: 115, Got Result: 115
Expected result: 118, Got Result: 118
Expected result: 121, Got Result: 121
Expected result: 124, Got Result: 124
Expected result: 127, Got Result: 127
Generating dot files
INFO: [SIM 211-1] CSim done with 0 errors.
INFO: [SIM 211-3] *************** CSIM finish ***************
INFO: [HLS 200-111] Finished Command csim_design CPU user time: 0.65 seconds. CPU system time: 0.31 seconds. Elapsed time: 0.8 seconds; current allocated memory: 195.056 MB.
INFO: [HLS 200-1510] Running: csynth_design
INFO: [HLS 200-111] Finished File checks and directory preparation: CPU user time: 0 seconds. CPU system time: 0 seconds. Elapsed time: 0 seconds; current allocated memory: 195.260 MB.
INFO: [HLS 200-10] Analyzing design file &#39;/home/xilinx/ros2_ws/src/xilinx/xilinx_examples/simple_adder/src/adder1.cpp&#39; ...
INFO: [HLS 200-111] Finished Source Code Analysis and Preprocessing: CPU user time: 0.13 seconds. CPU system time: 0.09 seconds. Elapsed time: 0.23 seconds; current allocated memory: 195.911 MB.
INFO: [HLS 200-777] Using interface defaults for &#39;Vivado&#39; flow target.
INFO: [HLS 200-111] Finished Compiling Optimization and Transform: CPU user time: 2.84 seconds. CPU system time: 0.26 seconds. Elapsed time: 3.23 seconds; current allocated memory: 196.203 MB.
INFO: [HLS 200-111] Finished Checking Pragmas: CPU user time: 0 seconds. CPU system time: 0 seconds. Elapsed time: 0 seconds; current allocated memory: 196.220 MB.
INFO: [HLS 200-10] Starting code transformations ...
INFO: [HLS 200-111] Finished Standard Transforms: CPU user time: 0.01 seconds. CPU system time: 0 seconds. Elapsed time: 0.01 seconds; current allocated memory: 197.187 MB.
INFO: [HLS 200-10] Checking synthesizability ...
INFO: [HLS 200-111] Finished Checking Synthesizability: CPU user time: 0.01 seconds. CPU system time: 0 seconds. Elapsed time: 0.01 seconds; current allocated memory: 196.621 MB.
INFO: [HLS 200-111] Finished Loop, function and other optimizations: CPU user time: 0.03 seconds. CPU system time: 0.01 seconds. Elapsed time: 0.04 seconds; current allocated memory: 216.648 MB.
INFO: [HLS 200-111] Finished Architecture Synthesis: CPU user time: 0.02 seconds. CPU system time: 0 seconds. Elapsed time: 0.02 seconds; current allocated memory: 208.313 MB.
INFO: [HLS 200-10] Starting hardware synthesis ...
INFO: [HLS 200-10] Synthesizing &#39;simple_adder&#39; ...
INFO: [HLS 200-10] ----------------------------------------------------------------
INFO: [HLS 200-42] -- Implementing module &#39;simple_adder&#39;
INFO: [HLS 200-10] ----------------------------------------------------------------
INFO: [SCHED 204-11] Starting scheduling ...
INFO: [SCHED 204-11] Finished scheduling.
INFO: [HLS 200-111] Finished Scheduling: CPU user time: 0.01 seconds. CPU system time: 0 seconds. Elapsed time: 0.02 seconds; current allocated memory: 208.520 MB.
INFO: [BIND 205-100] Starting micro-architecture generation ...
INFO: [BIND 205-101] Performing variable lifetime analysis.
INFO: [BIND 205-101] Exploring resource sharing.
INFO: [BIND 205-101] Binding ...
INFO: [BIND 205-100] Finished micro-architecture generation.
INFO: [HLS 200-111] Finished Binding: CPU user time: 0.01 seconds. CPU system time: 0 seconds. Elapsed time: 0.01 seconds; current allocated memory: 208.601 MB.
INFO: [HLS 200-10] ----------------------------------------------------------------
INFO: [HLS 200-10] -- Generating RTL for module &#39;simple_adder&#39;
INFO: [HLS 200-10] ----------------------------------------------------------------
INFO: [RTGEN 206-500] Setting interface mode on port &#39;simple_adder/a&#39; to &#39;ap_none&#39;.
INFO: [RTGEN 206-500] Setting interface mode on port &#39;simple_adder/b&#39; to &#39;ap_none&#39;.
INFO: [RTGEN 206-500] Setting interface mode on function &#39;simple_adder&#39; to &#39;ap_ctrl_hs&#39;.
INFO: [RTGEN 206-100] Finished creating RTL model for &#39;simple_adder&#39;.
INFO: [HLS 200-111] Finished Creating RTL model: CPU user time: 0.01 seconds. CPU system time: 0.01 seconds. Elapsed time: 0.01 seconds; current allocated memory: 208.723 MB.
INFO: [HLS 200-111] Finished Generating all RTL models: CPU user time: 0.8 seconds. CPU system time: 0.01 seconds. Elapsed time: 0.82 seconds; current allocated memory: 214.826 MB.
INFO: [VHDL 208-304] Generating VHDL RTL for simple_adder.
INFO: [VLOG 209-307] Generating Verilog RTL for simple_adder.
INFO: [HLS 200-789] **** Estimated Fmax: 984.25 MHz
INFO: [HLS 200-111] Finished Command csynth_design CPU user time: 3.9 seconds. CPU system time: 0.38 seconds. Elapsed time: 4.43 seconds; current allocated memory: 215.042 MB.
INFO: [HLS 200-1510] Running: open_solution solution_10ns
INFO: [HLS 200-10] Creating and opening solution &#39;/home/xilinx/ros2_ws/build-zcu102/simple_adder/project_simpleadder1/solution_10ns&#39;.
INFO: [HLS 200-1505] Using default flow_target &#39;vivado&#39;
Resolution: For help on HLS 200-1505 see www.xilinx.com/cgi-bin/docs/rdoc?v=2020.2;t=hls+guidance;d=200-1505.html
INFO: [HLS 200-1510] Running: set_part xczu9eg-ffvb1156-2-e
INFO: [HLS 200-1510] Running: create_clock -period 10
INFO: [SYN 201-201] Setting up clock &#39;default&#39; with a period of 10ns.
INFO: [HLS 200-1510] Running: csim_design -ldflags -lOpenCL -profile
INFO: [SIM 211-2] *************** CSIM start ***************
INFO: [SIM 211-4] CSIM will launch CLANG as the compiler.
Compiling ../../../../../../src/xilinx/xilinx_examples/simple_adder/src/testbench.cpp in debug mode
Compiling ../../../../../../src/xilinx/xilinx_examples/simple_adder/src/adder1.cpp in debug mode
Generating csim.exe
Expected result: 100, Got Result: 100
Expected result: 103, Got Result: 103
Expected result: 106, Got Result: 106
Expected result: 109, Got Result: 109
Expected result: 112, Got Result: 112
Expected result: 115, Got Result: 115
Expected result: 118, Got Result: 118
Expected result: 121, Got Result: 121
Expected result: 124, Got Result: 124
Expected result: 127, Got Result: 127
Generating dot files
INFO: [SIM 211-1] CSim done with 0 errors.
INFO: [SIM 211-3] *************** CSIM finish ***************
INFO: [HLS 200-111] Finished Command csim_design CPU user time: 0.45 seconds. CPU system time: 0.25 seconds. Elapsed time: 0.71 seconds; current allocated memory: 204.178 MB.
INFO: [HLS 200-1510] Running: csynth_design
INFO: [HLS 200-111] Finished File checks and directory preparation: CPU user time: 0.01 seconds. CPU system time: 0 seconds. Elapsed time: 0.01 seconds; current allocated memory: 204.280 MB.
INFO: [HLS 200-10] Analyzing design file &#39;/home/xilinx/ros2_ws/src/xilinx/xilinx_examples/simple_adder/src/adder1.cpp&#39; ...
INFO: [HLS 200-111] Finished Source Code Analysis and Preprocessing: CPU user time: 0.12 seconds. CPU system time: 0.1 seconds. Elapsed time: 0.23 seconds; current allocated memory: 204.290 MB.
INFO: [HLS 200-777] Using interface defaults for &#39;Vivado&#39; flow target.
INFO: [HLS 200-111] Finished Compiling Optimization and Transform: CPU user time: 2.96 seconds. CPU system time: 0.28 seconds. Elapsed time: 3.41 seconds; current allocated memory: 204.363 MB.
INFO: [HLS 200-111] Finished Checking Pragmas: CPU user time: 0 seconds. CPU system time: 0 seconds. Elapsed time: 0 seconds; current allocated memory: 204.364 MB.
INFO: [HLS 200-10] Starting code transformations ...
INFO: [HLS 200-111] Finished Standard Transforms: CPU user time: 0 seconds. CPU system time: 0 seconds. Elapsed time: 0 seconds; current allocated memory: 205.081 MB.
INFO: [HLS 200-10] Checking synthesizability ...
INFO: [HLS 200-111] Finished Checking Synthesizability: CPU user time: 0.01 seconds. CPU system time: 0 seconds. Elapsed time: 0.01 seconds; current allocated memory: 204.483 MB.
INFO: [HLS 200-111] Finished Loop, function and other optimizations: CPU user time: 0.04 seconds. CPU system time: 0.01 seconds. Elapsed time: 0.04 seconds; current allocated memory: 224.451 MB.
INFO: [HLS 200-111] Finished Architecture Synthesis: CPU user time: 0.01 seconds. CPU system time: 0 seconds. Elapsed time: 0.02 seconds; current allocated memory: 216.047 MB.
INFO: [HLS 200-10] Starting hardware synthesis ...
INFO: [HLS 200-10] Synthesizing &#39;simple_adder&#39; ...
INFO: [HLS 200-10] ----------------------------------------------------------------
INFO: [HLS 200-42] -- Implementing module &#39;simple_adder&#39;
INFO: [HLS 200-10] ----------------------------------------------------------------
INFO: [SCHED 204-11] Starting scheduling ...
INFO: [SCHED 204-11] Finished scheduling.
INFO: [HLS 200-111] Finished Scheduling: CPU user time: 0.01 seconds. CPU system time: 0 seconds. Elapsed time: 0.02 seconds; current allocated memory: 216.082 MB.
INFO: [BIND 205-100] Starting micro-architecture generation ...
INFO: [BIND 205-101] Performing variable lifetime analysis.
INFO: [BIND 205-101] Exploring resource sharing.
INFO: [BIND 205-101] Binding ...
INFO: [BIND 205-100] Finished micro-architecture generation.
INFO: [HLS 200-111] Finished Binding: CPU user time: 0.01 seconds. CPU system time: 0 seconds. Elapsed time: 0.01 seconds; current allocated memory: 216.140 MB.
INFO: [HLS 200-10] ----------------------------------------------------------------
INFO: [HLS 200-10] -- Generating RTL for module &#39;simple_adder&#39;
INFO: [HLS 200-10] ----------------------------------------------------------------
INFO: [RTGEN 206-500] Setting interface mode on port &#39;simple_adder/a&#39; to &#39;ap_none&#39;.
INFO: [RTGEN 206-500] Setting interface mode on port &#39;simple_adder/b&#39; to &#39;ap_none&#39;.
INFO: [RTGEN 206-500] Setting interface mode on function &#39;simple_adder&#39; to &#39;ap_ctrl_hs&#39;.
INFO: [RTGEN 206-100] Finished creating RTL model for &#39;simple_add&lt;er&#39;.
INFO: [HLS 200-111] Finished Creating RTL model: CPU user time: 0.01 seconds. CPU system time: 0 seconds. Elapsed time: 0.01 seconds; current allocated memory: 216.195 MB.
INFO: [HLS 200-111] Finished Generating all RTL models: CPU user time: 0.75 seconds. CPU system time: 0.02 seconds. Elapsed time: 0.77 seconds; current allocated memory: 216.821 MB.
INFO: [VHDL 208-304] Generating VHDL RTL for simple_adder.
INFO: [VLOG 209-307] Generating Verilog RTL for simple_adder.
INFO: [HLS 200-789] **** Estimated Fmax: 984.25 MHz
INFO: [HLS 200-111] Finished Command csynth_design CPU user time: 3.96 seconds. CPU system time: 0.41 seconds. Elapsed time: 4.57 seconds; current allocated memory: 216.911 MB.
INFO: [HLS 200-112] Total CPU user time: 11.55 seconds. Total CPU system time: 1.84 seconds. Total elapsed time: 12.47 seconds; peak allocated memory: 224.451 MB.
INFO: [Common 17-206] Exiting vitis_hls at Sat Jul 10 07:39:24 2021...    
```
</pre></div>
</div>
<p>With KRS, we can avoid using Tcl and use instead the ROS 2 extensions to <code class="docutils literal notranslate"><span class="pre">colcon</span></code> to easily perform C simulation, synthesis, implementation and more. Before running things, ROS 2 tools will dump the following status:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ colcon acceleration hls simple_adder
 Project:  project_simpleadder2
 Path:  /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder2
 	- Solution:  solution_4ns
 		- C Simulation:               Not Run
 		- C Synthesis:                Not Run
 		- C/RTL Co-simulation:        Not Run
		- Export:
 			- IP Catalog:         Not Run
 			- System Generator:   Not Run
 			- Export Evaluation:  Not Run
 	- Solution:  solution_10ns
 		- C Simulation:               Not Run
 		- C Synthesis:                Not Run
 		- C/RTL Co-simulation:        Not Run
		- Export:
 			- IP Catalog:         Not Run
 			- System Generator:   Not Run
 			- Export Evaluation:  Not Run
 Project:  project_simpleadder1
 Path:  /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder1
 	- Solution:  solution_4ns
 		- C Simulation:               Not Run
 		- C Synthesis:                Not Run
 		- C/RTL Co-simulation:        Not Run
		- Export:
 			- IP Catalog:         Not Run
 			- System Generator:   Not Run
 			- Export Evaluation:  Not Run
</pre></div>
</div>
<p>Let’s run it and get some results:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ colcon acceleration hls simple_adder --run
Found Tcl script <span class="s2">&quot;project_simpleadder2.tcl&quot;</span> <span class="k">for</span> package: simple_adder
Executing /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder2.tcl
Found Tcl script <span class="s2">&quot;project_simpleadder1.tcl&quot;</span> <span class="k">for</span> package: simple_adder
Executing /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder1.tcl
 Project:  project_simpleadder2
 Path:  /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder2
 	- Solution:  solution_4ns
 		- C Simulation:               Pass
 		- C Synthesis:                Run
 		- C/RTL Co-simulation:        Not Run
		- Export:
 			- IP Catalog:         Not Run
 			- System Generator:   Not Run
 			- Export Evaluation:  Not Run
 	- Solution:  solution_10ns
 		- C Simulation:               Pass
 		- C Synthesis:                Run
 		- C/RTL Co-simulation:        Not Run
		- Export:
 			- IP Catalog:         Not Run
 			- System Generator:   Not Run
 			- Export Evaluation:  Not Run
 Project:  project_simpleadder1
 Path:  /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder1
 	- Solution:  solution_4ns
 		- C Simulation:               Pass
 		- C Synthesis:                Run
 		- C/RTL Co-simulation:        Not Run
		- Export:
 			- IP Catalog:         Not Run
 			- System Generator:   Not Run
 			- Export Evaluation:  Not Run
</pre></div>
</div>
<p>If we want to inspect the results from the CLI, we can add the <code class="docutils literal notranslate"><span class="pre">--synthesis-report</span></code> flag:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ colcon acceleration hls simple_adder --synthesis-report

...

  Project:  project_simpleadder1
 Path:  /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder1
 	- Solution:  solution_4ns
 		- C Simulation:               Pass
 		- C Synthesis:                Run
 		- C/RTL Co-simulation:        Not Run
		- Export:
 			- IP Catalog:         Not Run
 			- System Generator:   Not Run
 			- Export Evaluation:  Not Run
		- Synthesis report: /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder1/solution_4ns/syn/report/simple_adder_csynth.rpt


  			<span class="o">================================================================</span>
  			<span class="o">==</span> Vitis HLS Report <span class="k">for</span> <span class="s1">&#39;simple_adder&#39;</span>
  			<span class="o">================================================================</span>
  			* Date:           Sun Aug <span class="m">22</span> <span class="m">15</span>:58:31 <span class="m">2021</span>

  			* Version:        <span class="m">2020</span>.2.2 <span class="o">(</span>Build <span class="m">3118627</span> on Tue Feb  <span class="m">9</span> <span class="m">05</span>:13:49 MST <span class="m">2021</span><span class="o">)</span>
  			* Project:        project_simpleadder1
  			* Solution:       solution_4ns <span class="o">(</span>Vitis Kernel Flow Target<span class="o">)</span>
  			* Product family: zynquplus
  			* Target device:  xck26-sfvc784-2LV-c


  			<span class="o">================================================================</span>
  			<span class="o">==</span> Performance <span class="nv">Estimates</span>
  			<span class="o">================================================================</span>
  			+ Timing:
  			    * Summary:
  			    +--------+---------+----------+------------+
  			    <span class="p">|</span>  Clock <span class="p">|</span>  Target <span class="p">|</span> Estimated<span class="p">|</span> Uncertainty<span class="p">|</span>
  			    +--------+---------+----------+------------+
  			    <span class="p">|</span>ap_clk  <span class="p">|</span>  <span class="m">4</span>.00 ns<span class="p">|</span>  <span class="m">2</span>.016 ns<span class="p">|</span>     <span class="m">1</span>.08 ns<span class="p">|</span>
  			    +--------+---------+----------+------------+

  			+ Latency:
  			    * Summary:
  			    +---------+---------+----------+----------+-----+-----+---------+
  			    <span class="p">|</span>  Latency <span class="o">(</span>cycles<span class="o">)</span> <span class="p">|</span>  Latency <span class="o">(</span>absolute<span class="o">)</span> <span class="p">|</span>  Interval <span class="p">|</span> Pipeline<span class="p">|</span>
  			    <span class="p">|</span>   min   <span class="p">|</span>   max   <span class="p">|</span>    min   <span class="p">|</span>    max   <span class="p">|</span> min <span class="p">|</span> max <span class="p">|</span>   Type  <span class="p">|</span>
  			    +---------+---------+----------+----------+-----+-----+---------+
  			    <span class="p">|</span>        <span class="m">0</span><span class="p">|</span>        <span class="m">0</span><span class="p">|</span>      <span class="m">0</span> ns<span class="p">|</span>      <span class="m">0</span> ns<span class="p">|</span>    <span class="m">1</span><span class="p">|</span>    <span class="m">1</span><span class="p">|</span>     none<span class="p">|</span>
  			    +---------+---------+----------+----------+-----+-----+---------+

  			    + Detail:
  			        * Instance:
  			        N/A

  			        * Loop:
  			        N/A



  			<span class="o">================================================================</span>
  			<span class="o">==</span> Utilization <span class="nv">Estimates</span>
  			<span class="o">================================================================</span>
  			* Summary:
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>       Name      <span class="p">|</span> BRAM_18K<span class="p">|</span>  DSP <span class="p">|</span>   FF   <span class="p">|</span>   LUT  <span class="p">|</span> URAM<span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>DSP              <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Expression       <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       <span class="m">0</span><span class="p">|</span>      <span class="m">41</span><span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>FIFO             <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Instance         <span class="p">|</span>        <span class="m">0</span><span class="p">|</span>     -<span class="p">|</span>     <span class="m">144</span><span class="p">|</span>     <span class="m">232</span><span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Memory           <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Multiplexer      <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>      <span class="m">18</span><span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Register         <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>      <span class="m">37</span><span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>Total            <span class="p">|</span>        <span class="m">0</span><span class="p">|</span>     <span class="m">0</span><span class="p">|</span>     <span class="m">181</span><span class="p">|</span>     <span class="m">291</span><span class="p">|</span>    <span class="m">0</span><span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>Available        <span class="p">|</span>      <span class="m">288</span><span class="p">|</span>  <span class="m">1248</span><span class="p">|</span>  <span class="m">234240</span><span class="p">|</span>  <span class="m">117120</span><span class="p">|</span>   <span class="m">64</span><span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>Utilization <span class="o">(</span>%<span class="o">)</span>  <span class="p">|</span>        <span class="m">0</span><span class="p">|</span>     <span class="m">0</span><span class="p">|</span>      ~0<span class="p">|</span>      ~0<span class="p">|</span>    <span class="m">0</span><span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
...
</pre></div>
</div>
<p>Results show how the <code class="docutils literal notranslate"><span class="pre">simple_adder</span></code> function can be implemented with only a few LUTs and using only one single cycle (0 is counted as the first cycle). The FPGA can be programmed to run with a clock at <code class="docutils literal notranslate"><span class="pre">2.016</span> <span class="pre">ns</span></code> (estimated). This means that <strong>by using solely 291 LUTs and 181 FFs of the FPGA to build specialized circuitry, we can get deterministic responses when launching the <code class="docutils literal notranslate"><span class="pre">simple_adder</span></code> function with a maximum response period of (<code class="docutils literal notranslate"><span class="pre">2.016</span> <span class="pre">ns</span></code> (estimated) + <code class="docutils literal notranslate"><span class="pre">1.08</span> <span class="pre">ns</span></code> (uncertainty)). In other words, <code class="docutils literal notranslate"><span class="pre">3.09600</span></code> ns</strong>.</p>
<p>Let’s compare this with the results we may get if we were to run this (only) on the PS system without relying on the FPGA. The Zynq UltraScale+ MPSoC targeted uses Quad-core Arm Cortex-A53 which has a CPU frequency of up to 1.5 GHz. Since the clock of the processor can theoretically run at 1.5 GHz, this means that one cycle has a period of approximately <code class="docutils literal notranslate"><span class="pre">0.666</span> <span class="pre">ns</span></code>. If the CPU were to be able to fit the whole function into one cycle, this would is indeed better than the <code class="docutils literal notranslate"><span class="pre">3.09600</span> <span class="pre">ns</span></code> we estimated before when using the FPGA, however, things aren’t that easy. Neither Von-Neumann-based CPU architectures can fit all operations into one cycle nor adaptive SoCs like the Zynq UltraScale+ MPSoC can leverage hardware acceleration without considering the interfacing with the FPGA. The following considerations should be taken into account:</p>
<ol class="simple">
<li><p>CPUs control-driven machine model is based on a token of control, which indicates when a statement should be executed. This gives CPUs full control to implement easily complex data and control structures however, this also comes at the cost of being less efficient since every operation needs to push data in-and-out of ALUs (each operation needs to be managed in this control flow mechanism). Ultimately this leads to multiple cycles for even the simplest operations like what’s illustrated in <code class="docutils literal notranslate"><span class="pre">simple_adder</span></code> above.</p></li>
<li><p>Besides the additional cycles required for the sole computation, the PS deals with tons of complex aspects that may very easily interrupt the computation, produce a switch of context and get back to the computation of <code class="docutils literal notranslate"><span class="pre">simple_adder</span></code> afterwards. Even in a somewhat ideal scenario, with a soft/firm real-time operating system running on the PS, the kernel can incur on delays of several tenths of microseconds.</p></li>
<li><p>FPGAs offer a deterministic response which can be specially exploited when relying onits resources, e.g. while driving I/O directly. In adaptive SoCs, interfacing the Processing System (PS, the CPU), with the Programmable Logic (PL, the FPGA) has a time/cycle cost which should be considered. If the output of the function/kernel is to return to the PS,  one should account for the complexity of such function/kernel. In very simple examples like the <code class="docutils literal notranslate"><span class="pre">simple_adder</span></code> above, this cost of interfacing PS-PL is generally much bigger than the optimizations one could get and the determinism is essentially degraded due to the involvement of the CPU.</p></li>
</ol>
<div class="section" id="using-the-vitis-hls-gui">
<h3>Using the Vitis HLS GUI<a class="headerlink" href="#using-the-vitis-hls-gui" title="Permalink to this headline">¶</a></h3>
<p>The project files generated by ROS 2 CLI tools can also be opened with <code class="docutils literal notranslate"><span class="pre">vitis_hls</span></code> GUI by pointing to the new project folder created. Within the Vitis HLS GUI, the various reports generated can be inspected graphically:</p>
<style>
table th:first-of-type {
    width: 70%;
}
table th:nth-of-type(2) {
    width: 30%;
}

.wy-table-responsive table td,
.wy-table-responsive table th {
    white-space: normal;
}
</style><table border="1" class="docutils">
<thead>
<tr>
<th>Image</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="" src="../../_images/1.png" /></td>
<td>The <em>synthesis summary view</em> shows that the target clock is <code>10ns</code>, as specified in the first solution in the Tcl script above. Note however that the synthesized clock ends up being much lower. The <em>Performance &amp; Resource Estimates</em> section summarizes that overall timing characteristics. Note that the timing characteristics show a 0 latency</td>
</tr>
<tr>
<td><img alt="" src="../../_images/2.png" /></td>
<td>The <em>schedule viewer view</em> shows how the two read operation are executed in the same clock and then get fed into the add operation. Everything gets executed in the same cycle.</td>
</tr>
<tr>
<td><img alt="" src="../../_images/3.png" /></td>
<td>The <em>pre-synthesis control flow view</em> shows that this function has a trivial control flow.</td>
</tr>
<tr>
<td><img alt="" src="../../_images/4.png" /></td>
<td>The <em>synthesis details view</em> shows a summary of the latency and also the resources consumed to synthesis the function. In this case only 39 LUTs.</td>
</tr>
</tbody>
</table><p>The data that we just inspected through Vitis HLS GUI is available in reports which can be parsed and exposed in a CLI interface. KRS does exactly this. KRS provides a series of CLI verbs and subverbs that allow to fetch this information directly from the CLI allowing ROS developers to create their own development flows.</p>
<p>Let’s now complicate a bit more the <code class="docutils literal notranslate"><span class="pre">simple_adder</span></code> function and see how faster clocks aren’t alwasy better. Specially, we show how FPGAs can be optimized to fit operations in less cycles delivering lower latencies.</p>
</div>
</div>
<div class="section" id="simple-adder2-optimizing-fpga-synthesis-for-lower-latency-responses">
<h2><code class="docutils literal notranslate"><span class="pre">simple_adder2</span></code>: optimizing FPGA synthesis for lower latency responses<a class="headerlink" href="#simple-adder2-optimizing-fpga-synthesis-for-lower-latency-responses" title="Permalink to this headline">¶</a></h2>
<p>The source code of <code class="docutils literal notranslate"><span class="pre">simple_adder2</span></code> will now be the following:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">simple_adder</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="o">*</span><span class="n">a</span><span class="o">*</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="o">*</span><span class="n">b</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w">    </span>
</pre></div>
</div>
<p>The CMakeLists.txt file uses now a different testbench and kernel source code:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">vitis_hls_generate_tcl</span><span class="p">(</span>
  <span class="s">PROJECT</span> 
    <span class="s">project_simpleadder2</span>
  <span class="s">SRC</span> 
    <span class="s">src/adder2.cpp</span>
  <span class="s">HEADERS</span>
    <span class="s">include</span>
  <span class="s">TESTBENCH</span> 
    <span class="s">src/testbench2.cpp</span>
  <span class="s">TOPFUNCTION</span> 
    <span class="s">simple_adder</span>
  <span class="s">CLOCK</span> 
    <span class="s">4</span> <span class="s">5</span> <span class="s">6</span> <span class="s">7</span> <span class="s">8</span> <span class="s">9</span> <span class="s">10</span>
  <span class="s">SYNTHESIS</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note that the macro will generate one solution per each <code class="docutils literal notranslate"><span class="pre">CLOCK</span></code> (in ns) argument provided.</p>
<p>Let’s compare the <em>Schedule Viewer</em> of the <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">ns</span></code> and <code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">ns</span></code> clock solutions. <em>These were generated with a different firmware (<code class="docutils literal notranslate"><span class="pre">zcu102</span></code>). Similar ones can be also obtained with the KV260 board. See <a class="reference internal" href="1_hello_xilinx.html"><span class="doc">Hello Xilinx example</span></a> if you need to recap on how to switch between multiple firmware options ;)</em>.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Image</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="" src="../../_images/5.png" /></td>
<td>Targeting <code>4 ns</code> clock. Note the whole operation takes 4 cycles.</td>
</tr>
<tr>
<td><img alt="" src="../../_images/6.png" /></td>
<td>Targeting <code>10 ns</code> clock. Note the whole operation takes 2 cycles.</td>
</tr>
</tbody>
</table><p>Futher inspecting the solutions with <code class="docutils literal notranslate"><span class="pre">colcon</span></code> CLI extensions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ colcon acceleration hls simple_adder --synthesis-report
 Project:  project_simpleadder2
 Path:  /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder2
 	- Solution:  solution_4ns
 		- C Simulation:               Pass
 		- C Synthesis:                Run
 		- C/RTL Co-simulation:        Not Run
		- Export:
 			- IP Catalog:         Not Run
 			- System Generator:   Not Run
 			- Export Evaluation:  Not Run
		- Synthesis report: /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder2/solution_4ns/syn/report/simple_adder_csynth.rpt


  			<span class="o">================================================================</span>
  			<span class="o">==</span> Vitis HLS Report <span class="k">for</span> <span class="s1">&#39;simple_adder&#39;</span>
  			<span class="o">================================================================</span>
  			* Date:           Sun Aug <span class="m">22</span> <span class="m">15</span>:58:17 <span class="m">2021</span>

  			* Version:        <span class="m">2020</span>.2.2 <span class="o">(</span>Build <span class="m">3118627</span> on Tue Feb  <span class="m">9</span> <span class="m">05</span>:13:49 MST <span class="m">2021</span><span class="o">)</span>
  			* Project:        project_simpleadder2
  			* Solution:       solution_4ns <span class="o">(</span>Vitis Kernel Flow Target<span class="o">)</span>
  			* Product family: zynquplus
  			* Target device:  xck26-sfvc784-2LV-c


  			<span class="o">================================================================</span>
  			<span class="o">==</span> Performance <span class="nv">Estimates</span>
  			<span class="o">================================================================</span>
  			+ Timing:
  			    * Summary:
  			    +--------+---------+----------+------------+
  			    <span class="p">|</span>  Clock <span class="p">|</span>  Target <span class="p">|</span> Estimated<span class="p">|</span> Uncertainty<span class="p">|</span>
  			    +--------+---------+----------+------------+
  			    <span class="p">|</span>ap_clk  <span class="p">|</span>  <span class="m">4</span>.00 ns<span class="p">|</span>  <span class="m">2</span>.365 ns<span class="p">|</span>     <span class="m">1</span>.08 ns<span class="p">|</span>
  			    +--------+---------+----------+------------+

  			+ Latency:
  			    * Summary:
  			    +---------+---------+-----------+-----------+-----+-----+---------+
  			    <span class="p">|</span>  Latency <span class="o">(</span>cycles<span class="o">)</span> <span class="p">|</span>   Latency <span class="o">(</span>absolute<span class="o">)</span>  <span class="p">|</span>  Interval <span class="p">|</span> Pipeline<span class="p">|</span>
  			    <span class="p">|</span>   min   <span class="p">|</span>   max   <span class="p">|</span>    min    <span class="p">|</span>    max    <span class="p">|</span> min <span class="p">|</span> max <span class="p">|</span>   Type  <span class="p">|</span>
  			    +---------+---------+-----------+-----------+-----+-----+---------+
  			    <span class="p">|</span>        <span class="m">5</span><span class="p">|</span>        <span class="m">5</span><span class="p">|</span>  <span class="m">20</span>.000 ns<span class="p">|</span>  <span class="m">20</span>.000 ns<span class="p">|</span>    <span class="m">6</span><span class="p">|</span>    <span class="m">6</span><span class="p">|</span>     none<span class="p">|</span>
  			    +---------+---------+-----------+-----------+-----+-----+---------+

  			    + Detail:
  			        * Instance:
  			        N/A

  			        * Loop:
  			        N/A



  			<span class="o">================================================================</span>
  			<span class="o">==</span> Utilization <span class="nv">Estimates</span>
  			<span class="o">================================================================</span>
  			* Summary:
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>       Name      <span class="p">|</span> BRAM_18K<span class="p">|</span>  DSP <span class="p">|</span>   FF   <span class="p">|</span>   LUT  <span class="p">|</span> URAM<span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>DSP              <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Expression       <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       <span class="m">0</span><span class="p">|</span>      <span class="m">41</span><span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>FIFO             <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Instance         <span class="p">|</span>        <span class="m">0</span><span class="p">|</span>     <span class="m">0</span><span class="p">|</span>     <span class="m">639</span><span class="p">|</span>     <span class="m">379</span><span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Memory           <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Multiplexer      <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>      <span class="m">46</span><span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Register         <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>     <span class="m">106</span><span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>Total            <span class="p">|</span>        <span class="m">0</span><span class="p">|</span>     <span class="m">0</span><span class="p">|</span>     <span class="m">745</span><span class="p">|</span>     <span class="m">466</span><span class="p">|</span>    <span class="m">0</span><span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>Available        <span class="p">|</span>      <span class="m">288</span><span class="p">|</span>  <span class="m">1248</span><span class="p">|</span>  <span class="m">234240</span><span class="p">|</span>  <span class="m">117120</span><span class="p">|</span>   <span class="m">64</span><span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>Utilization <span class="o">(</span>%<span class="o">)</span>  <span class="p">|</span>        <span class="m">0</span><span class="p">|</span>     <span class="m">0</span><span class="p">|</span>      ~0<span class="p">|</span>      ~0<span class="p">|</span>    <span class="m">0</span><span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+

...

  	- Solution:  solution_10ns
 		- C Simulation:               Pass
 		- C Synthesis:                Run
 		- C/RTL Co-simulation:        Not Run
		- Export:
 			- IP Catalog:         Not Run
 			- System Generator:   Not Run
 			- Export Evaluation:  Not Run
		- Synthesis report: /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder2/solution_10ns/syn/report/simple_adder_csynth.rpt


  			<span class="o">================================================================</span>
  			<span class="o">==</span> Vitis HLS Report <span class="k">for</span> <span class="s1">&#39;simple_adder&#39;</span>
  			<span class="o">================================================================</span>
  			* Date:           Sun Aug <span class="m">22</span> <span class="m">15</span>:58:23 <span class="m">2021</span>

  			* Version:        <span class="m">2020</span>.2.2 <span class="o">(</span>Build <span class="m">3118627</span> on Tue Feb  <span class="m">9</span> <span class="m">05</span>:13:49 MST <span class="m">2021</span><span class="o">)</span>
  			* Project:        project_simpleadder2
  			* Solution:       solution_10ns <span class="o">(</span>Vitis Kernel Flow Target<span class="o">)</span>
  			* Product family: zynquplus
  			* Target device:  xck26-sfvc784-2LV-c


  			<span class="o">================================================================</span>
  			<span class="o">==</span> Performance <span class="nv">Estimates</span>
  			<span class="o">================================================================</span>
  			+ Timing:
  			    * Summary:
  			    +--------+----------+----------+------------+
  			    <span class="p">|</span>  Clock <span class="p">|</span>  Target  <span class="p">|</span> Estimated<span class="p">|</span> Uncertainty<span class="p">|</span>
  			    +--------+----------+----------+------------+
  			    <span class="p">|</span>ap_clk  <span class="p">|</span>  <span class="m">10</span>.00 ns<span class="p">|</span>  <span class="m">5</span>.436 ns<span class="p">|</span>     <span class="m">2</span>.70 ns<span class="p">|</span>
  			    +--------+----------+----------+------------+

  			+ Latency:
  			    * Summary:
  			    +---------+---------+-----------+-----------+-----+-----+---------+
  			    <span class="p">|</span>  Latency <span class="o">(</span>cycles<span class="o">)</span> <span class="p">|</span>   Latency <span class="o">(</span>absolute<span class="o">)</span>  <span class="p">|</span>  Interval <span class="p">|</span> Pipeline<span class="p">|</span>
  			    <span class="p">|</span>   min   <span class="p">|</span>   max   <span class="p">|</span>    min    <span class="p">|</span>    max    <span class="p">|</span> min <span class="p">|</span> max <span class="p">|</span>   Type  <span class="p">|</span>
  			    +---------+---------+-----------+-----------+-----+-----+---------+
  			    <span class="p">|</span>        <span class="m">1</span><span class="p">|</span>        <span class="m">1</span><span class="p">|</span>  <span class="m">10</span>.000 ns<span class="p">|</span>  <span class="m">10</span>.000 ns<span class="p">|</span>    <span class="m">2</span><span class="p">|</span>    <span class="m">2</span><span class="p">|</span>     none<span class="p">|</span>
  			    +---------+---------+-----------+-----------+-----+-----+---------+

  			    + Detail:
  			        * Instance:
  			        N/A

  			        * Loop:
  			        N/A



  			<span class="o">================================================================</span>
  			<span class="o">==</span> Utilization <span class="nv">Estimates</span>
  			<span class="o">================================================================</span>
  			* Summary:
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>       Name      <span class="p">|</span> BRAM_18K<span class="p">|</span>  DSP <span class="p">|</span>   FF   <span class="p">|</span>   LUT  <span class="p">|</span> URAM<span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>DSP              <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Expression       <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       <span class="m">0</span><span class="p">|</span>      <span class="m">41</span><span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>FIFO             <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Instance         <span class="p">|</span>        <span class="m">0</span><span class="p">|</span>     <span class="m">0</span><span class="p">|</span>     <span class="m">144</span><span class="p">|</span>     <span class="m">292</span><span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Memory           <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Multiplexer      <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>       -<span class="p">|</span>      <span class="m">32</span><span class="p">|</span>    -<span class="p">|</span>
  			<span class="p">|</span>Register         <span class="p">|</span>        -<span class="p">|</span>     -<span class="p">|</span>      <span class="m">70</span><span class="p">|</span>       -<span class="p">|</span>    -<span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>Total            <span class="p">|</span>        <span class="m">0</span><span class="p">|</span>     <span class="m">0</span><span class="p">|</span>     <span class="m">214</span><span class="p">|</span>     <span class="m">365</span><span class="p">|</span>    <span class="m">0</span><span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>Available        <span class="p">|</span>      <span class="m">288</span><span class="p">|</span>  <span class="m">1248</span><span class="p">|</span>  <span class="m">234240</span><span class="p">|</span>  <span class="m">117120</span><span class="p">|</span>   <span class="m">64</span><span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+
  			<span class="p">|</span>Utilization <span class="o">(</span>%<span class="o">)</span>  <span class="p">|</span>        <span class="m">0</span><span class="p">|</span>     <span class="m">0</span><span class="p">|</span>      ~0<span class="p">|</span>      ~0<span class="p">|</span>    <span class="m">0</span><span class="p">|</span>
  			+-----------------+---------+------+--------+--------+-----+

...
</pre></div>
</div>
<p><strong>We observe how using a target <code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">ns</span></code> clock (which is slower than <code class="docutils literal notranslate"><span class="pre">4</span> <span class="pre">ns</span></code>) leads to a) the use of less LUT and FF resources and b) a lower latency (due to a smaller number of cycles required)</strong>. It’s pretty interesting to note that getting a higher frequency in the clock does not necesarily mean we’ll obtain a lower period for the function. This happens very clearly in this case.</p>
<p><code class="docutils literal notranslate"><span class="pre">colcon</span></code> CLI tooling also allows to obtain a quick summary of all the solutions to evaluate time and use of resources:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ colcon acceleration hls simple_adder --summary
<span class="c1"># /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder2.tcl</span>
Solution#	tar.clk	est.clk		latency_max	BRAM_18K	DSP	FF		LUT
solution_10ns	<span class="m">10</span>.00	<span class="m">5</span>.436		<span class="m">10</span>.000		<span class="m">0</span> <span class="o">(</span><span class="m">0</span>%<span class="o">)</span>		<span class="m">0</span> <span class="o">(</span><span class="m">0</span>%<span class="o">)</span>	<span class="m">214</span> <span class="o">(</span>~0%<span class="o">)</span>	<span class="m">365</span> <span class="o">(</span>~0%<span class="o">)</span>
solution_4ns	<span class="m">4</span>.00	<span class="m">2</span>.365		<span class="m">20</span>.000		<span class="m">0</span> <span class="o">(</span><span class="m">0</span>%<span class="o">)</span>		<span class="m">0</span> <span class="o">(</span><span class="m">0</span>%<span class="o">)</span>	<span class="m">745</span> <span class="o">(</span>~0%<span class="o">)</span>	<span class="m">466</span> <span class="o">(</span>~0%<span class="o">)</span>
<span class="c1"># /home/xilinx/krs_ws/build-kv260/simple_adder/project_simpleadder1.tcl</span>
Solution#	tar.clk	est.clk		latency_max	BRAM_18K	DSP	FF		LUT
solution_4ns	<span class="m">4</span>.00	<span class="m">2</span>.016		<span class="m">0</span>		<span class="m">0</span> <span class="o">(</span><span class="m">0</span>%<span class="o">)</span>		<span class="m">0</span> <span class="o">(</span><span class="m">0</span>%<span class="o">)</span>	<span class="m">181</span> <span class="o">(</span>~0%<span class="o">)</span>	<span class="m">291</span> <span class="o">(</span>~0%<span class="o">)</span>
</pre></div>
</div>
<!-- Hack: copy images for tables --><style>

.rst-content div.figure {
  margin-bottom: 0px;
}

</style><div class="figure align-default">
<a class="reference internal image-reference" href="../../_images/1.png"><img alt="../../_images/1.png" src="../../_images/1.png" style="height: 0px;" /></a>
</div>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../_images/2.png"><img alt="../../_images/2.png" src="../../_images/2.png" style="height: 0px;" /></a>
</div>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../_images/3.png"><img alt="../../_images/3.png" src="../../_images/3.png" style="height: 0px;" /></a>
</div>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../_images/4.png"><img alt="../../_images/4.png" src="../../_images/4.png" style="height: 0px;" /></a>
</div>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../_images/5.png"><img alt="../../_images/5.png" src="../../_images/5.png" style="height: 0px;" /></a>
</div>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../_images/6.png"><img alt="../../_images/6.png" src="../../_images/6.png" style="height: 0px;" /></a>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="3_offloading_ros2_publisher.html" class="btn btn-neutral float-right" title="3. Offloading ROS 2 publisher" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="1_hello_xilinx.html" class="btn btn-neutral float-left" title="1. Hello Xilinx" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on September 14, 2021.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2021, Xilinx, Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>